<!DOCTYPE html>

<html lang="zh-CN"  class=" language_zh  heading_no_counter ">


<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="keywords" content="">
    
    
    <meta name="description" content="">
    
    <meta name="generator" content="teedoc">
    <meta name="theme" content="teedoc-plugin-theme-default">
    
        
        <meta name="markdown-generator" content="teedoc-plugin-markdown-parser">
        
        <script>
MathJax = {"loader": {"load": ["output/svg"]}, "tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]]}, "svg": {"fontCache": "global"}};
</script>
        
        <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        
        <script src="/static/js/theme_default/pre_main.js"></script>
        
        <link rel="stylesheet" href="/static/css/theme_default/prism.min.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/theme_default/viewer.min.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/theme_default/dark.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/theme_default/light.css" type="text/css"/>
        
        <script src="/static/js/theme_default/jquery.min.js"></script>
        
        <script src="/static/js/theme_default/split.js"></script>
        
        <link rel="stylesheet" href="/static/css/search/style.css" type="text/css"/>
        
        <meta name="blog-generator" content="teedoc-plugin-blog">
        
        <link rel="stylesheet" href="/static/css/custom.css" type="text/css"/>
        
    
    
    <title>mysite</title>
    
    <script type="text/javascript">js_vars = {}</script>
    <script type="text/javascript">metadata = {"tags": [], "date": false, "update": [], "ts": 0, "author": "", "brief": "", "cover": "", "class": "heading_no_counter"}</script>
</head>


<body class="type_doc">
    
    <div id="navbar">
        <div id="navbar_menu">
            <a class="site_title" href="/">
                
                    <img class="site_logo" src="/static/image/logo-1600.png" alt="logo">
                
                
                    <h2>xmake</h2>
                
        </a>
            <a id="navbar_menu_btn"></a>
        </div>
        <div id="navbar_items">
            <div>
                <ul id="nav_left">
<li class=""><a  href="/get_started/zh/tutorial/quick-start.md">å®‰è£…ä½¿ç”¨</a></li>
<li class=""><a  href="/dev/">å¼€å‘æ–‡æ¡£</a></li>
</ul>

            </div>
            <div>
                <ul id="nav_right">
<li class=""><a target="_blank" href="https://github.com/neutree/teedoc">github</a></li>
<li class="sub_items "><a  >Language: ä¸­æ–‡ ç®€ä½“</a><ul><li class=""><a  href="/get_started/en/tutorial/project-examples.html">English</a></li>
<li class="active"><a  href="/get_started/zh/tutorial/project-examples.html">ä¸­æ–‡ ç®€ä½“</a></li>
</ul></li>
</ul>

                <ul class="nav_plugins"><li><a id="themes" class="light"></a></li></ul><ul class="nav_plugins"><li><a id="search"><span class="icon"></span><span class="placeholder">æœç´¢</span>
                            <div id="search_hints">
                                <span id="search_input_hint">è¾“å…¥å…³é”®è¯ï¼Œå¤šå…³é”®è¯ç©ºæ ¼éš”å¼€</span>
                                <span id="search_loading_hint">æ­£åœ¨åŠ è½½ï¼Œè¯·ç¨å€™ã€‚ã€‚ã€‚</span>
                                <span id="search_download_err_hint">ä¸‹è½½æ–‡ä»¶å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•æˆ–æ£€æŸ¥ç½‘ç»œ</span>
                                <span id="search_other_docs_result_hint">æ¥è‡ªå…¶å®ƒæ–‡æ¡£çš„ç»“æœ</span>
                                <span id="search_curr_doc_result_hint">å½“å‰æ–‡æ¡£æœç´¢ç»“æœ</span>
                            </div></a></li></ul>
            </div>
        </div>
    </div>
    
    <div id="wrapper">
        <div id="sidebar_wrapper">
            <div id="sidebar">
                <div id="sidebar_title">
                    
                </div>
                <ul class="show">
<li class="not_active no_link sidebar_category"><span class="label">æ–°æ‰‹æ•™ç¨‹</span></li>
<li class="not_active with_link"><a href="/get_started/zh/tutorial/install.html"><span class="label">å®‰è£…</span><span class=""></span></a></li>
<li class="active_parent with_link"><a href="/get_started/zh/tutorial/quick-start.html"><span class="label">å¿«é€Ÿå…¥é—¨</span><span class="sub_indicator"></span></a><ul class="show">
<li class="not_active with_link"><a href="/get_started/zh/tutorial/syntax-description.html"><span class="label">è¯­æ³•æè¿°</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/get_started/zh/tutorial/description-scope.html"><span class="label">æè¿°åŸŸ</span><span class=""></span></a></li>
</ul>
</li>
<li class="active with_link"><a href="/get_started/zh/tutorial/project-examples.html"><span class="label">å·¥ç¨‹ä¾‹å­</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/get_started/zh/tutorial/configuration.html"><span class="label">é…ç½®è¯´æ˜</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/get_started/zh/tutorial/environment-variables.html"><span class="label">ç¯å¢ƒå˜é‡</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/get_started/zh/tutorial/build-policies.html"><span class="label">æ„å»ºç­–ç•¥</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/get_started/zh/tutorial/FAQ.html"><span class="label">FAQ</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">target ç¼–è¯‘ç›®æ ‡</span><span class="sub_indicator"></span></a><ul class="show">
<li class="not_active with_link"><a href="/get_started/zh/target/description-scope.html"><span class="label">æè¿°åŸŸ</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">option é€‰é¡¹</span><span class="sub_indicator"></span></a><ul class="show">
<li class="not_active with_link"><a href="/get_started/zh/option/description-scope.html"><span class="label">æè¿°åŸŸ</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active with_link"><a href="/get_started/zh/no_translate.html?ref=package/index.html&from=/get_started/zh/package/index.html"><span class="label">package åŒ…ç®¡ç†</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/get_started/zh/rule/index.html"><span class="label">rule è§„åˆ™</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/get_started/zh/rule/builtin-rules.html"><span class="label">å†…å»ºè§„åˆ™</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/get_started/zh/rule/description-scope.html"><span class="label">æè¿°åŸŸ</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">toolchain å·¥å…·é“¾</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/get_started/zh/toolchain/builtin-toolchains.html"><span class="label">å†…ç½®å·¥å…·é“¾</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/get_started/zh/toolchain/custom-toolchains.html"><span class="label">è‡ªå®šä¹‰å·¥å…·é“¾</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active with_link"><a href="/get_started/zh/no_translate.html?ref=plugin/index.html&from=/get_started/zh/plugin/index.html"><span class="label">plugin æ’ä»¶</span><span class=""></span></a></li>
</ul>

            </div>
        </div>
        <div id="article">
            <div id="menu_wrapper">
                <div id="menu">
                </div>
            </div>
            <div id="content_wrapper">
                <div id="content_body">
                    <div id="article_head">
                        <div id="article_title">
                            
                            <h1></h1>
                            
                        </div>
                        <div id="article_tags">
                            <ul>
                            
                            </ul>
                        </div>
                        <div id="article_info">
                        <div id="article_info_left">
                            <span class="article_author">
                                
                            </span>
                            
                        </div>
                        <div id="article_info_right">
                            
                            <div id="source_link">
                                <a href="https://github.com/TOMO-CAT/xmake-teedoc/docs/get_started/zh/tutorial/project-examples.md" target="_blank">
                                    ç¼–è¾‘æœ¬é¡µ
                                </a>
                            </div>
                            
                        </div>
                        </div>
                    </div>
                    <div id="article_tools">
                        <span></span>
                        <span id="toc_btn"></span>
                    </div>
                    <div id="update_history">
                        
                    </div>
                    <div id="article_content">
                        
                            <h1 id="%E5%B7%A5%E7%A8%8B%E4%BE%8B%E5%AD%90">å·¥ç¨‹ä¾‹å­</h1>
<p>ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„å·¥ç¨‹ä¾‹å­ï¼Œæ›´å¤šçš„ examples å¯ä»¥åˆ° <a href="https://github.com/TOMO-CAT/xmake/tree/master/tests/projects"  target="_blank">project examples</a> ä¸­æŸ¥çœ‹ã€‚</p>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ <code>xmake create</code> å‘½ä»¤åˆ›å»ºå„ç§å¸¸ç”¨çš„ç©ºå·¥ç¨‹æ¥å¿«é€Ÿå¼€å§‹ï¼Œå…·ä½“å¯¹äºè¿™ä¸ªå‘½ä»¤çš„ä»‹ç»ä»¥åŠæ”¯æŒçš„å·¥ç¨‹æ¨¡æ¿å¯ä»¥æ•²ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹ï¼š</p>

<pre class="language-bash"><code class="language-bash">xmake create --help
</code></pre>
<h2 id="%E5%8F%AF%E6%89%A7%E8%A1%8C%E7%A8%8B%E5%BA%8F">å¯æ‰§è¡Œç¨‹åº</h2>

<pre class="language-lua"><code class="language-lua">target(&quot;test&quot;, function()
    set_kind(&quot;binary&quot;)
    add_files(&quot;src/*c&quot;)
end)
</code></pre>
<p>å®Œæ•´ä¾‹å­è¯·æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æ¥åˆ›å»ºï¼š</p>

<pre class="language-bash"><code class="language-bash">xmake create -l c -t console test
</code></pre>
<h2 id="%E9%9D%99%E6%80%81%E5%BA%93%E7%A8%8B%E5%BA%8F">é™æ€åº“ç¨‹åº</h2>

<pre class="language-lua"><code class="language-lua">target(&quot;library&quot;, function()
    set_kind(&quot;static&quot;)
    add_files(&quot;src/library/*.c&quot;)
end)

target(&quot;test&quot;, function()
    set_kind(&quot;binary&quot;)
    add_files(&quot;src/*c&quot;)
    add_deps(&quot;library&quot;)
end)
</code></pre>
<p>é€šè¿‡ <code>add_deps</code> å°†ä¸€ä¸ªé™æ€åº“è‡ªåŠ¨é“¾æ¥åˆ° test å¯æ‰§è¡Œç¨‹åºã€‚</p>
<p>å®Œæ•´ä¾‹å­è¯·æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æ¥åˆ›å»ºï¼š</p>

<pre class="language-bash"><code class="language-bash">xmake create -l c -t static test
</code></pre>
<h2 id="%E5%8A%A8%E6%80%81%E5%BA%93%E7%A8%8B%E5%BA%8F">åŠ¨æ€åº“ç¨‹åº</h2>

<pre class="language-lua"><code class="language-lua">target(&quot;library&quot;, function()
    set_kind(&quot;shared&quot;)
    add_files(&quot;src/library/*.c&quot;)
end)

target(&quot;test&quot;, function()
    set_kind(&quot;binary&quot;)
    add_files(&quot;src/*c&quot;)
    add_deps(&quot;library&quot;)
end)
</code></pre>
<p>é€šè¿‡ <code>add_deps</code> å°†ä¸€ä¸ªåŠ¨æ€åº“è‡ªåŠ¨é“¾æ¥åˆ° test å¯æ‰§è¡Œç¨‹åºã€‚</p>
<p>å®Œæ•´ä¾‹å­è¯·æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æ¥åˆ›å»ºï¼š</p>

<pre class="language-bash"><code class="language-bash">xmake create -l c -t shared test
</code></pre>
<h2 id="Wasm-%E7%A8%8B%E5%BA%8F">Wasm ç¨‹åº</h2>
<p>æ‰€æœ‰ c/c++ ç¨‹åºï¼Œæˆ‘ä»¬éƒ½å¯ä»¥ç¼–è¯‘æˆ Wasmï¼Œæ— éœ€ä»»ä½• xmake.lua é…ç½®æ”¹åŠ¨ï¼Œåªéœ€è¦åˆ‡æ¢åˆ° wasm ç¼–è¯‘å¹³å°è¿›è¡Œç¼–è¯‘ã€‚</p>

<pre class="language-bash"><code class="language-bash">$ xmake f -p wasm
$ xmake
</code></pre>
<p>è¯¦ç»†çš„ Wasm ç¼–è¯‘é…ç½®è§ï¼š<a href="/zh-cn/guide/configuration?id=wasm"  >Wasm é…ç½®</a></p>
<p>å¦å¤–ï¼Œåœ¨ç¼–è¯‘å¸¦æœ‰ <code>--preload-file assets/xxx.md</code> è®¾ç½®çš„æ–‡ä»¶æ—¶å€™ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡é…ç½®ï¼Œç®€åŒ–å¯¹å®ƒçš„è®¾ç½®ã€‚</p>

<pre class="language-lua"><code class="language-lua">target(&quot;test5&quot;, function()
    set_kind(&quot;binary&quot;)
    add_files(&quot;src/*.cpp&quot;)
    add_values(&quot;wasm.preloadfiles&quot;, &quot;src/xxx.md&quot;)
    add_values(&quot;wasm.preloadfiles&quot;, &quot;src/xxx2.md&quot;)
end)
</code></pre>
<h2 id="Qt-%E7%A8%8B%E5%BA%8F">Qt ç¨‹åº</h2>
<p>åˆ›å»ºä¸€ä¸ªç©ºå·¥ç¨‹ï¼š</p>

<pre class="language-bash"><code class="language-bash">$ xmake create -t qt.console test
$ xmake create -t qt.static test
$ xmake create -t qt.shared test
$ xmake create -t qt.quickapp test
$ xmake create -t qt.widgetapp test
</code></pre>
<p>æ›´å¤šå·¥ç¨‹æ¨¡æ¿è§ï¼š<code>xmake create --help</code>ã€‚</p>
<p>é»˜è®¤ä¼šè‡ªåŠ¨æ¢æµ‹ Qt ç¯å¢ƒï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æŒ‡å®š Qt SDK ç¯å¢ƒç›®å½•ï¼š</p>

<pre class="language-bash"><code class="language-bash">$ xmake f --qt=~/Qt/Qt5.9.1
</code></pre>
<p>ä¸Šè¿°æŒ‡å®šçš„ MingW SDK ç”¨çš„æ˜¯ Qt ä¸‹ Tools ç›®å½•è‡ªå¸¦çš„ç¯å¢ƒï¼Œå½“ç„¶å¦‚æœæœ‰å…¶ä»–ç¬¬ä¸‰æ–¹ MingW ç¼–è¯‘ç¯å¢ƒï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨æŒ‡å®š, å…·ä½“å¯ä»¥å‚è€ƒï¼š<a href="/zh-cn/guide/configuration?id=mingw"  >MingW ç¼–è¯‘é…ç½®</a>ã€‚</p>
<p>æ›´å¤šè¯¦æƒ…å¯ä»¥å‚è€ƒï¼š<a href="https://github.com/xmake-io/xmake/issues/160"  target="_blank">#160</a></p>
<p>å¦å¤–ï¼Œå½“å‰ xmake ä¹Ÿæ”¯æŒ Qt/Wasmï¼Œè¯¦æƒ…è§ï¼š<a href="/zh-cn/guide/configuration?id=wasm"  >Wasm é…ç½®</a></p>

<pre class="language-bash"><code class="language-bash">$ xmake f -p wasm
</code></pre>
<h3 id="%E9%9D%99%E6%80%81%E5%BA%93%E7%A8%8B%E5%BA%8F">é™æ€åº“ç¨‹åº</h3>

<pre class="language-lua"><code class="language-lua">target(&quot;qt_static_library&quot;, function()
    add_rules(&quot;qt.static&quot;)
    add_files(&quot;src/*.cpp&quot;)
    add_frameworks(&quot;QtNetwork&quot;, &quot;QtGui&quot;)
end)
</code></pre>
<h3 id="%E5%8A%A8%E6%80%81%E5%BA%93%E7%A8%8B%E5%BA%8F">åŠ¨æ€åº“ç¨‹åº</h3>

<pre class="language-lua"><code class="language-lua">target(&quot;qt_shared_library&quot;, function()
    add_rules(&quot;qt.shared&quot;)
    add_files(&quot;src/*.cpp&quot;)
    add_frameworks(&quot;QtNetwork&quot;, &quot;QtGui&quot;)
end)
</code></pre>
<h3 id="%E6%8E%A7%E5%88%B6%E5%8F%B0%E7%A8%8B%E5%BA%8F">æ§åˆ¶å°ç¨‹åº</h3>

<pre class="language-lua"><code class="language-lua">target(&quot;qt_console&quot;, function()
    add_rules(&quot;qt.console&quot;)
    add_files(&quot;src/*.cpp&quot;)
end)
</code></pre>
<h3 id="Quick-%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F">Quick åº”ç”¨ç¨‹åº</h3>

<pre class="language-lua"><code class="language-lua">target(&quot;qt_quickapp&quot;, function()
    add_rules(&quot;qt.quickapp&quot;)
    add_files(&quot;src/*.cpp&quot;)
    add_files(&quot;src/qml.qrc&quot;)
end)
</code></pre>
<blockquote>
<p>å¦‚æœä½¿ç”¨çš„è‡ªå·±ç¼–è¯‘çš„ static ç‰ˆæœ¬ QT SDKï¼Œé‚£ä¹ˆéœ€è¦åˆ‡æ¢åˆ° <code>add_rules(&quot;qt.quickapp_static&quot;)</code> é™æ€è§„åˆ™æ‰è¡Œï¼Œå› ä¸ºé“¾æ¥çš„åº“æ˜¯ä¸åŒçš„ï¼Œéœ€è¦åšé™æ€é“¾æ¥ã€‚</p>
</blockquote>
<h3 id="Quick-Plugin-%E7%A8%8B%E5%BA%8F">Quick Plugin ç¨‹åº</h3>
<p>å®Œæ•´ä¾‹å­è§ï¼š<a href="https://github.com/xmake-io/xmake/tree/master/tests/projects/qt/quickplugin"  target="_blank">quickplugin example</a></p>

<pre class="language-lua"><code class="language-lua">add_rules(&quot;mode.debug&quot;, &quot;mode.release&quot;)

target(&quot;demo&quot;, function()
    add_rules(&quot;qt.qmlplugin&quot;)
    add_headerfiles(&quot;src/*.h&quot;)
    add_files(&quot;src/*.cpp&quot;)

    set_values(&quot;qt.qmlplugin.import_name&quot;, &quot;My.Plugin&quot;)
end)
</code></pre>
<h3 id="Widgets-%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F">Widgets åº”ç”¨ç¨‹åº</h3>

<pre class="language-lua"><code class="language-lua">target(&quot;qt_widgetapp&quot;, function()
    add_rules(&quot;qt.widgetapp&quot;)
    add_files(&quot;src/*.cpp&quot;)
    add_files(&quot;src/mainwindow.ui&quot;)
    add_files(&quot;src/mainwindow.h&quot;)  -- æ·»åŠ å¸¦æœ‰ Q_OBJECT çš„metaå¤´æ–‡ä»¶
end)
</code></pre>
<h3 id="Android-%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F">Android åº”ç”¨ç¨‹åº</h3>
<p>å¯ä»¥ç›´æ¥åˆ‡åˆ° android å¹³å°ç¼–è¯‘ Quick/Widgets åº”ç”¨ç¨‹åºï¼Œç”Ÿæˆ apk åŒ…ï¼Œå¹¶ä¸”å¯é€šè¿‡ <code>xmake install</code> å‘½ä»¤å®‰è£…åˆ°è®¾å¤‡ï¼š</p>

<pre class="language-bash"><code class="language-bash">$ xmake create -t quickapp_qt -l c++ appdemo
$ cd appdemo
$ xmake f -p android --ndk=~/Downloads/android-ndk-r19c/ --android_sdk=~/Library/Android/sdk/ -c
$ xmake
[  0%]: compiling.qt.qrc src/qml.qrc
[ 50%]: cache compiling.release src/main.cpp
[100%]: linking.release libappdemo.so
[100%]: generating.qt.app appdemo.apk
</code></pre>
<p>ç„¶åå®‰è£…åˆ°è®¾å¤‡ï¼š</p>

<pre class="language-bash"><code class="language-bash">$ xmake install
installing appdemo ...
installing build/android/release/appdemo.apk ..
Success
install ok!ğŸ‘Œ
</code></pre>
<h3 id="%E7%9B%AE%E5%89%8D%E6%94%AF%E6%8C%81%E7%9A%84-Qt-SDK">ç›®å‰æ”¯æŒçš„ Qt SDK</h3>
<h4 id="%E6%9D%A5%E8%87%AA-Qt-%E5%AE%98%E6%96%B9%E6%8F%90%E4%BE%9B%E7%9A%84-SDK-%E5%AE%89%E8%A3%85%E5%8C%85">æ¥è‡ª Qt å®˜æ–¹æä¾›çš„ SDK å®‰è£…åŒ…</h4>
<p>åœ¨ macos ä¸Šé€šå¸¸èƒ½è‡ªåŠ¨æ¢æµ‹åˆ°ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥æ‰‹åŠ¨æŒ‡å®š Qt SDK è·¯å¾„ã€‚</p>

<pre class="language-bash"><code class="language-bash">$ xmake f --qt=[qt sdk path]
</code></pre>
<h4 id="%E6%9D%A5%E8%87%AA-Ubuntu-Apt-%E5%AE%89%E8%A3%85%E5%8C%85">æ¥è‡ª Ubuntu Apt å®‰è£…åŒ…</h4>
<p>ä½¿ç”¨ apt å®‰è£…å®Œ Qt SDKï¼Œxmake ä¹Ÿèƒ½å¤Ÿè‡ªåŠ¨æ£€æµ‹åˆ°ã€‚</p>

<pre class="language-bash"><code class="language-bash">$ sudo apt install -y qtcreator qtbase5-dev
$ xmake
</code></pre>
<h4 id="%E6%9D%A5%E8%87%AA-msys2/pacman-%E7%9A%84-Qt-Mingw-%E5%AE%89%E8%A3%85%E5%8C%85">æ¥è‡ª msys2/pacman çš„ Qt Mingw å®‰è£…åŒ…</h4>
<p>xmake ä¹Ÿæ”¯æŒä» pacman å®‰è£…çš„ Qt Mingw SDK</p>

<pre class="language-bash"><code class="language-bash">$ pacman -S mingw-w64-x86_64-qt5 mingw-w64-x86_64-qt-creator
$ xmake
</code></pre>
<h4 id="%E6%9D%A5%E8%87%AA-aqtinstall-%E8%84%9A%E6%9C%AC%E7%9A%84-Qt-SDK-%E5%8C%85">æ¥è‡ª aqtinstall è„šæœ¬çš„ Qt SDK åŒ…</h4>
<p><a href="https://github.com/miurahr/aqtinstall"  target="_blank">aqtinstall</a> å®‰è£…çš„ Qt SDK æ˜¯å®Œå…¨åŸºäºå®˜æ–¹ SDK ç»“æ„çš„ï¼Œæ‰€ä»¥ xmake ä¹Ÿå®Œå…¨æ”¯æŒã€‚</p>
<p>ä½†æ˜¯ï¼Œé€šå¸¸éœ€è¦è‡ªå·±æŒ‡å®š SDK è·¯å¾„ã€‚</p>

<pre class="language-bash"><code class="language-bash">$ xmake f --qt=[Qt SDK]
</code></pre>
<h4 id="%E8%B7%A8%E5%B9%B3%E5%8F%B0-Qt-%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91">è·¨å¹³å° Qt äº¤å‰ç¼–è¯‘</h4>
<p>å¯¹äºè·¨å¹³å° Qt å¼€å‘ï¼Œxmake æ”¯æŒä¸ºä¸»æœºå·¥å…·å’Œç›®æ ‡å¹³å°ä½¿ç”¨å•ç‹¬çš„ SDKã€‚è¿™åœ¨ä¸ºä¸åŒäºå¼€å‘æœºå™¨çš„å¹³å°æ„å»º Qt åº”ç”¨ç¨‹åºæ—¶ç‰¹åˆ«æœ‰ç”¨ã€‚</p>
<p><code>--qt_host</code> é€‰é¡¹å…è®¸æ‚¨æŒ‡å®šä¸æ„å»ºæœºå™¨å…¼å®¹çš„ Qt å·¥å…·çš„ä½ç½®ï¼Œè€Œ <code>--qt</code> æŒ‡å‘ç›®æ ‡å¹³å°çš„ SDKï¼š</p>

<pre class="language-bash"><code class="language-bash">$ xmake f --qt=[target Qt sdk] --qt_host=[host Qt sdk]
</code></pre>
<p><strong>é‡è¦æ³¨æ„äº‹é¡¹</strong>ï¼š</p>
<ul>
<li>ç¡®ä¿ä¸»æœºå’Œç›®æ ‡ Qt ç‰ˆæœ¬åŒ¹é…ï¼Œå¦åˆ™å¯èƒ½ä¼šå¯¼è‡´æ„å»ºé—®é¢˜ã€‚</li>
<li>æœ¬æœºéƒ¨ç½²å·¥å…·ï¼ˆå¦‚ <code>windeployqt</code> å’Œ <code>macdeployqt</code>ï¼‰å¿…é¡»åœ¨å„è‡ªçš„å¹³å°ä¸Šè¿è¡Œï¼Œå› æ­¤è·¨å¹³å°ä»»åŠ¡ï¼ˆå¦‚ <code>xmake install</code>ï¼‰å¯èƒ½ä¼šå¤±è´¥ã€‚</li>
</ul>
<h4 id="%E6%9D%A5%E8%87%AA-xmake-repo-%E4%BB%93%E5%BA%93%E7%9A%84-Qt-%E5%8C%85">æ¥è‡ª xmake-repo ä»“åº“çš„ Qt åŒ…</h4>
<p>xmake ç°åœ¨å®˜æ–¹æä¾›äº† Qt5 SDK çš„å„ç§æ¨¡å—åŒ…ï¼Œå¯ä»¥è‡ªåŠ¨é›†æˆä½¿ç”¨ï¼Œæ— éœ€ä»»ä½•æ‰‹åŠ¨å®‰è£…ã€‚</p>
<p>åªéœ€è¦é…ç½®é›†æˆåŒ…å°±è¡Œäº†ï¼Œxmake ä¼šè‡ªåŠ¨å¤„ç† Qt çš„å®‰è£…é›†æˆï¼Œå¹¶ä¸”è‡ªåŠ¨ç¼–è¯‘é¡¹ç›®ã€‚</p>

<pre class="language-lua"><code class="language-lua">add_rules(&quot;mode.debug&quot;, &quot;mode.release&quot;)

add_requires(&quot;qt5widgets&quot;)

target(&quot;test&quot;, function()
    add_rules(&quot;qt.widgetapp&quot;)
    add_packages(&quot;qt5widgets&quot;)

    add_headerfiles(&quot;src/*.h&quot;)
    add_files(&quot;src/*.cpp&quot;)
    add_files(&quot;src/mainwindow.ui&quot;)
    -- add files with Q_OBJECT meta (only for qt.moc)
    add_files(&quot;src/mainwindow.h&quot;)
end)
</code></pre>
<p>é™¤äº† <code>qt5widgets</code> åŒ…ï¼Œä»“åº“è¿˜æä¾›äº† <code>qt5gui</code>, <code>qt5network</code> ç­‰åŒ…ï¼Œå¯ä»¥ä½¿ç”¨ã€‚</p>
<p>é…ç½®å®Œï¼Œåªéœ€è¦æ‰§è¡Œï¼š</p>

<pre class="language-bash"><code class="language-bash">$ xmake
</code></pre>
<h4 id="%E6%9D%A5%E8%87%AA-vcpkg/conan-%E7%9A%84-Qt-%E5%8C%85">æ¥è‡ª vcpkg/conan çš„ Qt åŒ…</h4>
<p>æš‚æ—¶è¿˜æ²¡æ—¶é—´æ”¯æŒï¼Œè¯·å°½é‡ä½¿ç”¨ä¸Šé¢çš„æ–¹å¼é›†æˆ Qt SDKã€‚</p>
<h2 id="umdf-%E9%A9%B1%E5%8A%A8%E7%A8%8B%E5%BA%8F">umdf é©±åŠ¨ç¨‹åº</h2>

<pre class="language-lua"><code class="language-lua">target(&quot;echo&quot;, function()
    add_rules(&quot;wdk.driver&quot;, &quot;wdk.env.umdf&quot;)
    add_files(&quot;driver/*.c&quot;)
    add_files(&quot;driver/*.inx&quot;)
    add_includedirs(&quot;exe&quot;)
end)

target(&quot;app&quot;, function()
    add_rules(&quot;wdk.binary&quot;, &quot;wdk.env.umdf&quot;)
    add_files(&quot;exe/*.cpp&quot;)
end)
</code></pre>
<h3 id="wdm-%E9%A9%B1%E5%8A%A8%E7%A8%8B%E5%BA%8F">wdm é©±åŠ¨ç¨‹åº</h3>

<pre class="language-lua"><code class="language-lua">target(&quot;kcs&quot;, function()
    add_rules(&quot;wdk.driver&quot;, &quot;wdk.env.wdm&quot;)
    add_values(&quot;wdk.man.flags&quot;, &quot;-prefix Kcs&quot;)
    add_values(&quot;wdk.man.resource&quot;, &quot;kcsCounters.rc&quot;)
    add_values(&quot;wdk.man.header&quot;, &quot;kcsCounters.h&quot;)
    add_values(&quot;wdk.man.counter_header&quot;, &quot;kcsCounters_counters.h&quot;)
    add_files(&quot;*.c&quot;, &quot;*.rc&quot;, &quot;*.man&quot;)
end)
</code></pre>

<pre class="language-lua"><code class="language-lua">target(&quot;msdsm&quot;, function()
    add_rules(&quot;wdk.driver&quot;, &quot;wdk.env.wdm&quot;)
    add_values(&quot;wdk.tracewpp.flags&quot;, &quot;-func:TracePrint((LEVEL,FLAGS,MSG,...))&quot;)
    add_files(&quot;*.c&quot;, {rule = &quot;wdk.tracewpp&quot;})
    add_files(&quot;*.rc&quot;, &quot;*.inf&quot;)
    add_files(&quot;*.mof|msdsm.mof&quot;)
    add_files(&quot;msdsm.mof&quot;, {values = {wdk_mof_header = &quot;msdsmwmi.h&quot;}})
end)
</code></pre>
<h3 id="%E7%94%9F%E6%88%90%E9%A9%B1%E5%8A%A8%E5%8C%85">ç”Ÿæˆé©±åŠ¨åŒ…</h3>
<p>å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆ .cab é©±åŠ¨åŒ…ï¼š</p>

<pre class="language-bash"><code class="language-bash">$ xmake [p|package]
$ xmake [p|package] -o outputdir
</code></pre>
<p>è¾“å‡ºçš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>

<pre class="language-none"><code class="language-none">  - drivers
    - sampledsm
       - debug/x86/sampledsm.cab
       - release/x64/sampledsm.cab
       - debug/x86/sampledsm.cab
       - release/x64/sampledsm.cab
</code></pre>
<h3 id="%E9%A9%B1%E5%8A%A8%E7%AD%BE%E5%90%8D">é©±åŠ¨ç­¾å</h3>
<p>é»˜è®¤ç¼–è¯‘ç¦ç”¨ç­¾åï¼Œå¯ä»¥é€šè¿‡ <code>set_values(&quot;wdk.sign.mode&quot;, ...)</code> è®¾ç½®ç­¾åæ¨¡å¼æ¥å¯ç”¨ç­¾åã€‚</p>
<h4 id="%E6%B5%8B%E8%AF%95%E7%AD%BE%E5%90%8D">æµ‹è¯•ç­¾å</h4>
<p>æµ‹è¯•ç­¾åä¸€èˆ¬æœ¬æœºè°ƒè¯•æ—¶å€™ç”¨ï¼Œå¯ä»¥ä½¿ç”¨ xmake è‡ªå¸¦çš„ test è¯ä¹¦æ¥è¿›è¡Œç­¾åï¼Œä¾‹å¦‚ï¼š</p>

<pre class="language-lua"><code class="language-lua">target(&quot;msdsm&quot;, function()
    add_rules(&quot;wdk.driver&quot;, &quot;wdk.env.wdm&quot;)
    set_values(&quot;wdk.sign.mode&quot;, &quot;test&quot;)
end)
</code></pre>
<p>ä¸è¿‡è¿™ç§æƒ…å†µä¸‹ï¼Œéœ€è¦ç”¨æˆ·æ‰‹åŠ¨åœ¨ç®¡ç†å‘˜æ¨¡å¼ä¸‹ï¼Œæ‰§è¡Œä¸€éï¼š<code>$xmake l utils.wdk.testcert install</code>ï¼Œæ¥ç”Ÿæˆå’Œæ³¨å†Œ test è¯ä¹¦åˆ°æœ¬æœºç¯å¢ƒã€‚<br />
è¿™ä¸ªåªéœ€è¦æ‰§è¡Œä¸€æ¬¡å°±è¡Œäº†ï¼Œåç»­å°±å¯ä»¥æ­£å¸¸ç¼–è¯‘å’Œç­¾åäº†ã€‚</p>
<p>å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨æœ¬æœºå·²æœ‰çš„æœ‰æ•ˆè¯ä¹¦å»ç­¾åã€‚</p>
<p>ä» sha1 æ¥é€‰æ‹©åˆé€‚çš„è¯ä¹¦è¿›è¡Œç­¾åï¼š</p>

<pre class="language-lua"><code class="language-lua">target(&quot;msdsm&quot;, function()
    add_rules(&quot;wdk.driver&quot;, &quot;wdk.env.wdm&quot;)
    set_values(&quot;wdk.sign.mode&quot;, &quot;test&quot;)
    set_values(&quot;wdk.sign.thumbprint&quot;, &quot;032122545DCAA6167B1ADBE5F7FDF07AE2234AAA&quot;)
end)
</code></pre>
<p>ä» store/company æ¥é€‰æ‹©åˆé€‚çš„è¯ä¹¦è¿›è¡Œç­¾åï¼š</p>

<pre class="language-lua"><code class="language-lua">target(&quot;msdsm&quot;, function()
    add_rules(&quot;wdk.driver&quot;, &quot;wdk.env.wdm&quot;)
    set_values(&quot;wdk.sign.mode&quot;, &quot;test&quot;)
    set_values(&quot;wdk.sign.store&quot;, &quot;PrivateCertStore&quot;)
    set_values(&quot;wdk.sign.company&quot;, &quot;tboox.org(test)&quot;)
end)
</code></pre>
<h4 id="%E6%AD%A3%E5%BC%8F%E7%AD%BE%E5%90%8D">æ­£å¼ç­¾å</h4>
<p>é€šè¿‡æŒ‡å®šå¯¹åº”çš„æ­£å¼ç­¾åè¯ä¹¦æ–‡ä»¶è¿›è¡Œç­¾åï¼š</p>

<pre class="language-lua"><code class="language-lua">target(&quot;msdsm&quot;, function()
    add_rules(&quot;wdk.driver&quot;, &quot;wdk.env.wdm&quot;)
    set_values(&quot;wdk.sign.mode&quot;, &quot;release&quot;)
    set_values(&quot;wdk.sign.company&quot;, &quot;xxxx&quot;)
    set_values(&quot;wdk.sign.certfile&quot;, path.join(os.projectdir(), &quot;xxxx.cer&quot;))
end)
</code></pre>
<h3 id="%E7%94%9F%E6%88%90%E4%BD%8E%E7%89%88%E6%9C%AC%E9%A9%B1%E5%8A%A8">ç”Ÿæˆä½ç‰ˆæœ¬é©±åŠ¨</h3>
<p>å¦‚æœæƒ³åœ¨ wdk10 ç¯å¢ƒç¼–è¯‘ç”Ÿæˆ win7, win8 ç­‰ä½ç‰ˆæœ¬ç³»ç»Ÿæ”¯æŒçš„é©±åŠ¨ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® <code>wdk.env.winver</code> æ¥åˆ‡æ¢ç³»ç»Ÿç‰ˆæœ¬ï¼š</p>

<pre class="language-lua"><code class="language-lua">set_values(&quot;wdk.env.winver&quot;, &quot;win10&quot;)
set_values(&quot;wdk.env.winver&quot;, &quot;win10_rs3&quot;)
set_values(&quot;wdk.env.winver&quot;, &quot;win81&quot;)
set_values(&quot;wdk.env.winver&quot;, &quot;win8&quot;)
set_values(&quot;wdk.env.winver&quot;, &quot;win7&quot;)
set_values(&quot;wdk.env.winver&quot;, &quot;win7_sp1&quot;)
set_values(&quot;wdk.env.winver&quot;, &quot;win7_sp2&quot;)
set_values(&quot;wdk.env.winver&quot;, &quot;win7_sp3&quot;)
</code></pre>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨æŒ‡å®šç¼–è¯‘çš„ç›®æ ‡ç¨‹åºæ”¯æŒçš„ windows ç‰ˆæœ¬ï¼š</p>

<pre class="language-bash"><code class="language-bash">$ xmake f --wdk_winver=[win10_rs3|win8|win7|win7_sp1]
$ xmake
</code></pre>
<h2 id="iOS/MacOS-%E7%A8%8B%E5%BA%8F">iOS/MacOS ç¨‹åº</h2>
<h3 id="App-%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F">App åº”ç”¨ç¨‹åº</h3>
<p>ç”¨äºç”Ÿæˆ <code>*.app/*.ipa</code> åº”ç”¨ç¨‹åºï¼ŒåŒæ—¶æ”¯æŒ iOS/MacOSã€‚</p>

<pre class="language-lua"><code class="language-lua">target(&quot;test&quot;, function()
    add_rules(&quot;xcode.application&quot;)
    add_files(&quot;src/*.m&quot;, &quot;src/**.storyboard&quot;, &quot;src/*.xcassets&quot;)
    add_files(&quot;src/Info.plist&quot;)
end)
</code></pre>
<blockquote>
<p>å¯ä»¥æ”¯æŒç›´æ¥æ·»åŠ  <code>*.metal</code> æ–‡ä»¶ï¼Œxmake ä¼šè‡ªåŠ¨ç”Ÿæˆ default.metallib æä¾›ç»™åº”ç”¨ç¨‹åºåŠ è½½ä½¿ç”¨ã€‚</p>
</blockquote>
<h4 id="%E5%88%9B%E5%BB%BA%E5%B7%A5%E7%A8%8B">åˆ›å»ºå·¥ç¨‹</h4>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡æ¨¡æ¿å·¥ç¨‹å¿«é€Ÿåˆ›å»ºï¼š</p>

<pre class="language-bash"><code class="language-bash">$ xmake create -t xcode.macapp -l objc test
$ xmake create -t xcode.iosapp -l objc test
</code></pre>
<h4 id="%E7%BC%96%E8%AF%91">ç¼–è¯‘</h4>

<pre class="language-bash"><code class="language-bash">$ xmake f -p [iphoneos|macosx]
$ xmake
[ 18%]: compiling.xcode.release src/Assets.xcassets
[ 27%]: processing.xcode.release src/Info.plist
[ 72%]: compiling.xcode.release src/Base.lproj/Main.storyboard
[ 81%]: compiling.xcode.release src/Base.lproj/LaunchScreen.storyboard
[ 45%]: cache compiling.release src/ViewController.m
[ 63%]: cache compiling.release src/AppDelegate.m
[ 54%]: cache compiling.release src/SceneDelegate.m
[ 36%]: cache compiling.release src/main.m
[ 90%]: linking.release test
[100%]: generating.xcode.release test.app
[100%]: build ok!
</code></pre>
<h4 id="%E9%85%8D%E7%BD%AE%E7%AD%BE%E5%90%8D">é…ç½®ç­¾å</h4>
<p>å¯¹äº iOS ç¨‹åºï¼Œé»˜è®¤ä¼šæ£€æµ‹ç³»ç»Ÿå…ˆç”¨å¯ç”¨ç­¾åæ¥ç­¾å appï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨æŒ‡å®šå…¶ä»–ç­¾åè¯ä¹¦ï¼š</p>

<pre class="language-bash"><code class="language-bash">$ xmake f -p iphoneos --xcode_codesign_identity='Apple Development: xxx@gmail.com (T3NA4MRVPU)' --xcode_mobile_provision='iOS Team Provisioning Profile: org.tboox.test --xcode_bundle_identifier=org.tboox.test'
$ xmake
</code></pre>
<p>å¦‚æœæ¯æ¬¡è¿™ä¹ˆé…ç½®ç­¾åè§‰å¾—ç¹ççš„è¯ï¼Œå¯ä»¥è®¾ç½®åˆ° <code>xmake global</code> å…¨å±€é…ç½®ä¸­ï¼Œä¹Ÿå¯ä»¥åœ¨ xmake.lua ä¸­å¯¹æ¯ä¸ª target å•ç‹¬è®¾ç½®ï¼š</p>

<pre class="language-lua"><code class="language-lua">target(&quot;test&quot;, function()
    add_rules(&quot;xcode.application&quot;)
    add_files(&quot;src/*.m&quot;, &quot;src/**.storyboard&quot;, &quot;src/*.xcassets&quot;)
    add_files(&quot;src/Info.plist&quot;)
    add_values(&quot;xcode.bundle_identifier&quot;, &quot;org.tboox.test&quot;)
    add_values(&quot;xcode.codesign_identity&quot;, &quot;Apple Development: xxx@gmail.com (T3NA4MRVPU)&quot;)
    add_values(&quot;xcode.mobile_provision&quot;, &quot;iOS Team Provisioning Profile: org.tboox.test&quot;)
end)
</code></pre>
<p>é‚£å¦‚ä½•çŸ¥é“æˆ‘ä»¬éœ€è¦çš„ç­¾åé…ç½®å‘¢ï¼Ÿä¸€ç§å°±æ˜¯åœ¨ xcode é‡Œé¢æŸ¥çœ‹ï¼Œå¦å¤– xmake ä¹Ÿæä¾›äº†ä¸€äº›è¾…åŠ©å·¥å…·å¯ä»¥ dump å‡ºå½“å‰å¯ç”¨çš„æ‰€æœ‰ç­¾åé…ç½®ï¼š</p>

<pre class="language-bash"><code class="language-bash">$ xmake l private.tools.codesign.dump
==================================== codesign identities ====================================
{
  &quot;Apple Development: waruqi@gmail.com (T3NA4MRVPU)&quot; = &quot;AF73C231A0C35335B72761BD3759694739D34EB1&quot;
}

===================================== mobile provisions =====================================
{
  &quot;iOS Team Provisioning Profile: org.xmake.test&quot; = &quot;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;
&lt;plist version=&quot;1.0&quot;&gt;
&lt;dict&gt;
    &lt;key&gt;AppIDName&lt;/key&gt;
    &lt;string&gt;XC org xmake test5&lt;/string&gt;
    &lt;key&gt;ApplicationIdentifierPrefix&lt;/key&gt;
    &lt;array&gt;
    &lt;string&gt;43AAQM58X3&lt;/string&gt;
...
</code></pre>
<p>æˆ‘ä»¬ä¹Ÿæä¾›äº†å…¶ä»–è¾…åŠ©å·¥å…·æ¥å¯¹å·²æœ‰çš„ ipa/app ç¨‹åºè¿›è¡Œé‡ç­¾åï¼Œä¾‹å¦‚ï¼š</p>

<pre class="language-bash"><code class="language-bash">$ xmake l utils.ipa.resign test.ipa|test.app [codesign_identity] [mobile_provision] [bundle_identifier]
</code></pre>
<p>å…¶ä¸­ï¼Œåé¢çš„ç­¾åå‚æ•°éƒ½æ˜¯å¯é€‰çš„ï¼Œå¦‚æœæ²¡è®¾ç½®ï¼Œé‚£ä¹ˆé»˜è®¤ä¼šæ¢æµ‹ä½¿ç”¨ä¸€ä¸ªæœ‰æ•ˆçš„ç­¾åï¼š</p>

<pre class="language-bash"><code class="language-bash">$ xmake l utils.ipa.resign test.ipa
$ xmake l utils.ipa.resign test.app &quot;Apple Development: cat@gmail.com (T3NA4MRVPU)&quot;
$ xmake l utils.ipa.resign test.ipa &quot;Apple Development: cat@gmail.com (T3NA4MRVPU)&quot; iOS Team Provisioning Profile: org.xmake.test&quot; org.xmake.test
</code></pre>
<h4 id="%E8%BF%90%E8%A1%8C%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F">è¿è¡Œåº”ç”¨ç¨‹åº</h4>
<p>ç›®å‰ä»…æ”¯æŒè¿è¡Œmacosç¨‹åºï¼š</p>

<pre class="language-bash"><code class="language-bash">$ xmake run
</code></pre>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="/assets/img/guide/macapp.png" alt="" /></p>
<h4 id="%E7%94%9F%E6%88%90%E7%A8%8B%E5%BA%8F%E5%8C%85">ç”Ÿæˆç¨‹åºåŒ…</h4>
<p>å¦‚æœæ˜¯ iOS ç¨‹åºä¼šç”Ÿæˆ ipa å®‰è£…åŒ…ï¼Œå¦‚æœæ˜¯ macos ä¼šç”Ÿæˆ dmg ï¼ˆdmg åŒ…ç”Ÿæˆæš‚æ—¶è¿˜åœ¨å¼€å‘ä¸­ï¼‰ã€‚</p>

<pre class="language-bash"><code class="language-bash">$ xmake package
output: build/iphoneos/release/arm64/test.ipa
package ok!
</code></pre>
<p>æˆ‘ä»¬ä¹Ÿæä¾›äº†è¾…åŠ©å·¥å…·ï¼Œæ¥å¯¹æŒ‡å®š app ç¨‹åºè¿›è¡Œæ‰“åŒ…ï¼š</p>

<pre class="language-bash"><code class="language-bash">$ xmake l utils.ipa.package test.app output.ipa [iconfile.png]
</code></pre>
<h4 id="%E5%AE%89%E8%A3%85">å®‰è£…</h4>
<p>å¦‚æœæ˜¯ iOS ç¨‹åºä¼šå®‰è£… ipa åˆ°è®¾å¤‡ï¼Œå¦‚æœæ˜¯ macos ä¼šå®‰è£… app åˆ° /Applications ç›®å½•ã€‚</p>

<pre class="language-bash"><code class="language-bash">$ xmake install
</code></pre>
<p>æˆ‘ä»¬ä¹Ÿæä¾›äº†è¾…åŠ©å·¥å…·ï¼Œæ¥å¯¹æŒ‡å®šipa/appç¨‹åºå®‰è£…åˆ°è®¾å¤‡ï¼š</p>

<pre class="language-bash"><code class="language-bash">$ xmake l utils.ipa.install test.app
$ xmake l utils.ipa.install test.ipa
</code></pre>
<h4 id="%E5%8D%B8%E8%BD%BD">å¸è½½</h4>
<blockquote>
<p>ç›®å‰ä»…æ”¯æŒ macos ç¨‹åºå¸è½½</p>
</blockquote>

<pre class="language-bash"><code class="language-bash">$ xmake uninstall
</code></pre>
<h3 id="Framework-%E5%BA%93%E7%A8%8B%E5%BA%8F">Framework åº“ç¨‹åº</h3>

<pre class="language-lua"><code class="language-lua">target(&quot;test&quot;, function()
    add_rules(&quot;xcode.framework&quot;)
    add_files(&quot;src/*.m&quot;)
    add_files(&quot;src/Info.plist&quot;)
end)
</code></pre>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡æ¨¡æ¿å·¥ç¨‹å¿«é€Ÿåˆ›å»ºï¼š</p>

<pre class="language-bash"><code class="language-bash">$ xmake create -t xcode.framework -l objc test
</code></pre>
<p>å¦å¤–ï¼Œxmake è¿˜æä¾›äº†å¸¦æœ‰ framework åº“ä½¿ç”¨çš„å®Œæ•´ iosapp/macapp ç©ºå·¥ç¨‹æ¨¡æ¿ï¼Œå¯ä»¥å®Œæ•´ä½“éªŒ framework çš„ç¼–è¯‘ï¼Œä¾èµ–ä½¿ç”¨ä»¥åŠé›†æˆåˆ° app åº”ç”¨ç¨‹åºä¸­ã€‚</p>
<p>åŒæ—¶ï¼Œå¦‚æœæˆ‘ä»¬å¼€å¯äº†æ¨¡æ‹Ÿå™¨ï¼Œxmake å¯ä»¥æ”¯æŒç›´æ¥ <code>xmake install</code> å’Œ <code>xmake run</code> å°† app å®‰è£…åˆ°æ¨¡æ‹Ÿå™¨å¹¶åŠ è½½è¿è¡Œã€‚</p>

<pre class="language-bash"><code class="language-bash">$ xmake create -t xcode.iosapp_with_framework -l objc testapp
$ cd testapp
$ xmake f -p iphoneos -a x86_64
$ xmake
$ xmake install
$ xmake run
</code></pre>
<h3 id="Bundle%E7%A8%8B%E5%BA%8F">Bundleç¨‹åº</h3>

<pre class="language-lua"><code class="language-lua">target(&quot;test&quot;, function()
    add_rules(&quot;xcode.bundle&quot;)
    add_files(&quot;src/*.m&quot;)
    add_files(&quot;src/Info.plist&quot;)
end)
</code></pre>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡æ¨¡æ¿å·¥ç¨‹å¿«é€Ÿåˆ›å»ºï¼š</p>

<pre class="language-bash"><code class="language-bash">$ xmake create -t xcode.bundle -l objc test
</code></pre>
<h2 id="Protobuf%E7%A8%8B%E5%BA%8F">Protobufç¨‹åº</h2>
<h3 id="%E4%BD%BF%E7%94%A8c%E5%BA%93">ä½¿ç”¨cåº“</h3>

<pre class="language-lua"><code class="language-lua">add_requires(&quot;protobuf-c&quot;)

target(&quot;console_c&quot;, function()
    set_kind(&quot;binary&quot;)
    add_packages(&quot;protobuf-c&quot;)
    add_rules(&quot;protobuf.c&quot;)
    add_files(&quot;src/*.c&quot;)
    add_files(&quot;src/*.proto&quot;)
end)
</code></pre>
<p>æˆ‘ä»¬è¿˜å¯ä»¥è®¾ç½® <code>proto_public = true</code> æ¥å¯¼å‡º proto çš„å¤´æ–‡ä»¶æœç´¢ç›®å½•ï¼Œå¼€æ”¾ç»™å…¶ä»–çˆ¶ target ç»§æ‰¿ä½¿ç”¨ã€‚</p>

<pre class="language-lua"><code class="language-lua">    add_packages(&quot;protobuf-c&quot;, {public = true})
    add_files(&quot;src/**.proto&quot;, {proto_public = true})
</code></pre>
<p>æ³¨ï¼šç”±äº protobuf ç”Ÿæˆçš„å¤´æ–‡ä»¶å¼•ç”¨äº† protobuf-c åŒ…çš„å¤´æ–‡ä»¶ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦å°†åŒ…çš„å¤´æ–‡ä»¶æ ‡è®°ä¸º <code>{public = true}</code> å¯¹å¤–å¯¼å‡ºå®ƒã€‚</p>
<h3 id="%E4%BD%BF%E7%94%A8c%2B%2B%E5%BA%93">ä½¿ç”¨c++åº“</h3>

<pre class="language-lua"><code class="language-lua">add_requires(&quot;protobuf-cpp&quot;)

target(&quot;console_c++&quot;, function()
    set_kind(&quot;binary&quot;)
    set_languages(&quot;c++11&quot;)
    add_packages(&quot;protobuf-cpp&quot;)
    add_rules(&quot;protobuf.cpp&quot;)
    add_files(&quot;src/*.cpp&quot;)
    add_files(&quot;src/*.proto&quot;)
end)
</code></pre>
<p>æˆ‘ä»¬è¿˜å¯ä»¥è®¾ç½® <code>proto_public = true</code> æ¥å¯¼å‡º proto çš„å¤´æ–‡ä»¶æœç´¢ç›®å½•ï¼Œå¼€æ”¾ç»™å…¶ä»–çˆ¶ target ç»§æ‰¿ä½¿ç”¨ã€‚</p>

<pre class="language-lua"><code class="language-lua">    add_packages(&quot;protobuf-cpp&quot;, {public = true})
    add_files(&quot;src/**.proto&quot;, {proto_public = true})
</code></pre>
<p>æ³¨ï¼šç”±äº protobuf ç”Ÿæˆçš„å¤´æ–‡ä»¶å¼•ç”¨äº† protobuf-cpp åŒ…çš„å¤´æ–‡ä»¶ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦å°†åŒ…çš„å¤´æ–‡ä»¶æ ‡è®°ä¸º <code>{public = true}</code> å¯¹å¤–å¯¼å‡ºå®ƒã€‚</p>
<h2 id="Cuda%E7%A8%8B%E5%BA%8F">Cudaç¨‹åº</h2>
<p>åˆ›å»ºä¸€ä¸ªç©ºå·¥ç¨‹ï¼š</p>

<pre class="language-bash"><code class="language-bash">$ xmake create -P test -l cuda
$ cd test
$ xmake
</code></pre>

<pre class="language-lua"><code class="language-lua">-- define target
target(&quot;cuda_console&quot;, function()
    set_kind(&quot;binary&quot;)
    add_files(&quot;src/*.cu&quot;)
    -- generate SASS code for SM architecture of current host
    add_cugencodes(&quot;native&quot;)
    -- generate PTX code for the virtual architecture to guarantee compatibility
    add_cugencodes(&quot;compute_30&quot;)
end)
</code></pre>
<blockquote>
<p>é»˜è®¤æ„å»ºä¼šå¯ç”¨ device-linkã€‚ï¼ˆå‚è§ <a href="https://devblogs.nvidia.com/separate-compilation-linking-cuda-device-code/"  target="_blank">Separate Compilation and Linking of CUDA C++ Device Code</a>ï¼‰</p>
</blockquote>
<p>å¦‚æœè¦æ˜¾å¼ç¦ç”¨ device-linkï¼Œå¯ä»¥é€šè¿‡ <code>set_policy(&quot;build.cuda.devlink&quot;, false)</code> æ¥è®¾ç½®ã€‚</p>
<blockquote>
<p>cuda æºæ–‡ä»¶ä¸­çš„ device å‡½æ•°éœ€è¦è¢« device-link ä¸”åª device-link ä¸€æ¬¡ã€‚åœ¨ <code>shared</code> æˆ– <code>binary</code> çš„ target ä¸Š xmake ä¼šè‡ªåŠ¨è¿›è¡Œ device-link ï¼Œè¿™æ—¶å®ƒä»¬ä¾èµ–çš„ <code>static</code> target ä¹Ÿä¼šåŒæ—¶è¢« device-link ï¼Œå› æ­¤é»˜è®¤æƒ…å†µä¸‹ <code>static</code> target ä¸ä¼šè¢« device-linkã€‚ç„¶è€Œï¼Œå¦‚æœæœ€ç»ˆçš„ <code>shared</code> æˆ– <code>binary</code> çš„ target ä¸åŒ…å«ä»»ä½• cuda æºæ–‡ä»¶ï¼Œåˆ™ä¸ä¼šå‘ç”Ÿ device-link é˜¶æ®µï¼Œå¯¼è‡´å‡ºç° undefined reference é”™è¯¯ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œéœ€è¦æ‰‹åŠ¨ä¸º <code>static</code> target æŒ‡å®š <code>add_values(&quot;cuda.build.devlink&quot;, true)</code>.</p>
</blockquote>
<p>é»˜è®¤ä¼šè‡ªåŠ¨æ¢æµ‹ cuda ç¯å¢ƒï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æŒ‡å®š Cuda SDK ç¯å¢ƒç›®å½•ï¼Œæˆ–è€…æŒ‡å®š cuda ç‰ˆæœ¬ï¼ˆæ­¤æ—¶å°†åœ¨é»˜è®¤å®‰è£…ç›®å½•è¿›è¡ŒæŸ¥æ‰¾ï¼‰ï¼š</p>

<pre class="language-bash"><code class="language-bash">$ xmake f --cuda=/usr/local/cuda-9.1/
$ xmake f --cuda=9.1
$ xmake
</code></pre>
<p>æ›´å¤šè¯¦æƒ…å¯ä»¥å‚è€ƒï¼š<a href="https://github.com/xmake-io/xmake/issues/158"  target="_blank">#158</a></p>
<h2 id="Lex-%26amp%3B-Yacc%E7%A8%8B%E5%BA%8F">Lex &amp; Yaccç¨‹åº</h2>

<pre class="language-lua"><code class="language-lua">target(&quot;calc&quot;, function()
    set_kind(&quot;binary&quot;)
    add_rules(&quot;lex&quot;, &quot;yacc&quot;)
    add_files(&quot;src/*.l&quot;, &quot;src/*.y&quot;)
end)
</code></pre>
<h2 id="OpenMP-%E7%A8%8B%E5%BA%8F">OpenMP ç¨‹åº</h2>
<p>æˆ‘ä»¬ä¸éœ€è¦é¢å¤–é…ç½® rulesï¼Œä»…ä»…é€šè¿‡ä¸€ä¸ªé€šç”¨çš„ openmp åŒ…å°±å¯ä»¥å®ç°ç›¸åŒçš„æ•ˆæœã€‚</p>

<pre class="language-lua"><code class="language-lua">add_requires(&quot;openmp&quot;)
target(&quot;loop&quot;, function()
    set_kind(&quot;binary&quot;)
    add_files(&quot;src/*.cpp&quot;)
    add_packages(&quot;openmp&quot;)
end)
</code></pre>
<h2 id="Fortran-%E7%A8%8B%E5%BA%8F">Fortran ç¨‹åº</h2>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤ï¼Œå¿«é€Ÿåˆ›å»ºä¸€ä¸ªåŸºäº fortran çš„ç©ºå·¥ç¨‹ï¼š</p>

<pre class="language-bash"><code class="language-bash">$ xmake create -l fortran -t console test
</code></pre>
<p>å®ƒçš„xmake.luaå†…å®¹å¦‚ä¸‹ï¼š</p>

<pre class="language-lua"><code class="language-lua">add_rules(&quot;mode.debug&quot;, &quot;mode.release&quot;)

target(&quot;test&quot;, function()
    set_kind(&quot;binary&quot;)
    add_files(&quot;src/*.f90&quot;)
end)
</code></pre>
<p>æ›´å¤šä»£ç ä¾‹å­å¯ä»¥åˆ°è¿™é‡ŒæŸ¥çœ‹ï¼š<a href="https://github.com/xmake-io/xmake/tree/master/tests/projects/fortran"  target="_blank">Fortran Examples</a></p>
<h2 id="Go-%E7%A8%8B%E5%BA%8F">Go ç¨‹åº</h2>
<p>xmake ä¹Ÿæ”¯æŒ go ç¨‹åºçš„æ„å»ºï¼Œä¹Ÿæä¾›äº†ç©ºå·¥ç¨‹çš„åˆ›å»ºå‘½ä»¤æ”¯æŒ:</p>

<pre class="language-bash"><code class="language-bash">$ xmake create -l go -t console test
</code></pre>
<p>xmake.lua å†…å®¹å¦‚ä¸‹:</p>

<pre class="language-lua"><code class="language-lua">add_rules(&quot;mode.debug&quot;, &quot;mode.release&quot;)

target(&quot;test&quot;, function()
    set_kind(&quot;binary&quot;)
    add_files(&quot;src/*.go&quot;)
end)
</code></pre>
<p>æ›´å¤šä¾‹å­è§ï¼š<a href="https://github.com/xmake-io/xmake/tree/master/tests/projects/go"  target="_blank">Go Examples</a></p>
<h2 id="Dlang-%E7%A8%8B%E5%BA%8F">Dlang ç¨‹åº</h2>
<p>åˆ›å»ºç©ºå·¥ç¨‹ï¼š</p>

<pre class="language-bash"><code class="language-bash">$ xmake create -l dlang -t console test
</code></pre>
<p>xmake.lua å†…å®¹ï¼š</p>

<pre class="language-lua"><code class="language-lua">add_rules(&quot;mode.debug&quot;, &quot;mode.release&quot;)

target(&quot;test&quot;, function()
    set_kind(&quot;binary&quot;)
    add_files(&quot;src/*.d&quot;)
end)
</code></pre>
<p>xmake ä¹Ÿæä¾›å¯¹ dub åŒ…ç®¡ç†çš„æ”¯æŒï¼Œå¯ä»¥å¿«é€Ÿé›†æˆ dlang çš„ç¬¬ä¸‰æ–¹ä¾èµ–åŒ…ï¼š</p>

<pre class="language-lua"><code class="language-lua">add_rules(&quot;mode.debug&quot;, &quot;mode.release&quot;)

add_requires(&quot;dub::log 0.4.3&quot;, {alias = &quot;log&quot;})
add_requires(&quot;dub::dateparser&quot;, {alias = &quot;dateparser&quot;})
add_requires(&quot;dub::emsi_containers&quot;, {alias = &quot;emsi_containers&quot;})
add_requires(&quot;dub::stdx-allocator&quot;, {alias = &quot;stdx-allocator&quot;})
add_requires(&quot;dub::mir-core&quot;, {alias = &quot;mir-core&quot;})

target(&quot;test&quot;, function()
    set_kind(&quot;binary&quot;)
    add_files(&quot;src/*.d&quot;)
    add_packages(&quot;log&quot;, &quot;dateparser&quot;, &quot;emsi_containers&quot;, &quot;stdx-allocator&quot;, &quot;mir-core&quot;)
end)
</code></pre>
<p>ä¸è¿‡è¿˜æœ‰ä¸€äº›ä¸å®Œå–„çš„åœ°æ–¹ï¼Œæ¯”å¦‚ç›®å‰å¿…é¡»æ‰‹åŠ¨é…ç½®æ‰€æœ‰çº§è”ä¾èµ–åŒ…ï¼Œä¼šç¨å¾®ç¹çäº›ï¼Œåç»­æœ‰å¾…æ”¹è¿›ã€‚</p>
<p>æ›´å¤šä¾‹å­è§ï¼š<a href="https://github.com/xmake-io/xmake/tree/master/tests/projects/dlang"  target="_blank">Dlang Examples</a></p>
<h2 id="Rust%E7%A8%8B%E5%BA%8F">Rustç¨‹åº</h2>
<p>åˆ›å»ºç©ºå·¥ç¨‹ï¼š</p>

<pre class="language-bash"><code class="language-bash">$ xmake create -l rust -t console test
</code></pre>
<p>xmake.lua å†…å®¹ï¼š</p>

<pre class="language-lua"><code class="language-lua">add_rules(&quot;mode.debug&quot;, &quot;mode.release&quot;)

target(&quot;test&quot;, function()
    set_kind(&quot;binary&quot;)
    add_files(&quot;src/main.rs&quot;)
end)
</code></pre>
<p>æ›´å¤šä¾‹å­è§ï¼š<a href="https://github.com/xmake-io/xmake/tree/master/tests/projects/rust"  target="_blank">Rust Examples</a></p>
<h3 id="%E6%B7%BB%E5%8A%A0-Cargo-%E5%8C%85%E4%BE%9D%E8%B5%96">æ·»åŠ  Cargo åŒ…ä¾èµ–</h3>
<p>ä¾‹å­: <a href="https://github.com/xmake-io/xmake/tree/dev/tests/projects/rust/cargo_deps"  target="_blank">https://github.com/xmake-io/xmake/tree/dev/tests/projects/rust/cargo_deps</a></p>

<pre class="language-lua"><code class="language-lua">add_rules(&quot;mode.release&quot;, &quot;mode.debug&quot;)
add_requires(&quot;cargo::base64 0.13.0&quot;)
add_requires(&quot;cargo::flate2 1.0.17&quot;, {configs = {features = &quot;zlib&quot;}})

target(&quot;test&quot;, function()
    set_kind(&quot;binary&quot;)
    add_files(&quot;src/main.rs&quot;)
    add_packages(&quot;cargo::base64&quot;, &quot;cargo::flate2&quot;)
end)
</code></pre>
<h3 id="%E9%9B%86%E6%88%90-Cargo.toml-%E7%9A%84%E4%BE%9D%E8%B5%96%E5%8C%85">é›†æˆ Cargo.toml çš„ä¾èµ–åŒ…</h3>
<p>ä¸Šé¢ç›´æ¥ä½¿ç”¨ <code>add_requires(&quot;cargo::base64 0.13.0&quot;)</code> çš„æ–¹å¼é›†æˆä¾èµ–ï¼Œä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼š</p>
<p>å¦‚æœä¾èµ–å¾ˆå¤šï¼Œå¹¶ä¸”æœ‰å‡ ä¸ªä¾èµ–éƒ½å…±åŒä¾èµ–äº†ç›¸åŒçš„å­ä¾èµ–ï¼Œé‚£ä¹ˆä¼šå‡ºç°é‡å®šä¹‰é—®é¢˜ï¼Œå› æ­¤å¦‚æœæˆ‘ä»¬ä½¿ç”¨å®Œæ•´çš„ Cargo.toml å»ç®¡ç†ä¾èµ–å°±ä¸ä¼šå­˜åœ¨è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>

<pre class="language-lua"><code class="language-lua">add_rules(&quot;mode.release&quot;, &quot;mode.debug&quot;)
add_requires(&quot;cargo::test&quot;, {configs = {cargo_toml = path.join(os.projectdir(), &quot;Cargo.toml&quot;)}})

target(&quot;test&quot;)
    set_kind(&quot;binary&quot;)
    add_files(&quot;src/main.rs&quot;)
    add_packages(&quot;cargo::test&quot;)
</code></pre>
<p>å®Œæ•´ä¾‹å­è§ï¼š<a href="https://github.com/xmake-io/xmake/blob/dev/tests/projects/rust/cargo_deps_with_toml/xmake.lua"  target="_blank">cargo_deps_with_toml</a></p>
<h3 id="%E4%BD%BF%E7%94%A8-cxxbridge-%E5%9C%A8-c%2B%2B-%E4%B8%AD%E8%B0%83%E7%94%A8-rust">ä½¿ç”¨ cxxbridge åœ¨ c++ ä¸­è°ƒç”¨ rust</h3>
<p>ä¾‹å­: <a href="https://github.com/xmake-io/xmake/tree/dev/tests/projects/rust/cxx_call_rust_library"  target="_blank">https://github.com/xmake-io/xmake/tree/dev/tests/projects/rust/cxx_call_rust_library</a></p>

<pre class="language-lua"><code class="language-lua">add_rules(&quot;mode.debug&quot;, &quot;mode.release&quot;)

add_requires(&quot;cargo::cxx 1.0&quot;)

target(&quot;foo&quot;, function()
    set_kind(&quot;static&quot;)
    add_files(&quot;src/foo.rs&quot;)
    set_values(&quot;rust.cratetype&quot;, &quot;staticlib&quot;)
    add_packages(&quot;cargo::cxx&quot;)
end)

target(&quot;test&quot;, function()
    set_kind(&quot;binary&quot;)
    add_rules(&quot;rust.cxxbridge&quot;)
    add_deps(&quot;foo&quot;)
    add_files(&quot;src/main.cc&quot;)
    add_files(&quot;src/bridge.rsx&quot;)
end)
</code></pre>
<p>foo.rs</p>

<pre class="language-rust"><code class="language-rust">#[cxx::bridge]
mod foo {
    extern &quot;Rust&quot; {
        fn add(a: i32, b: i32) -&gt; i32;
    }
}

pub fn add(a: i32, b: i32) -&gt; i32 {
    return a + b;
}
</code></pre>
<p>æˆ‘ä»¬è¿˜éœ€è¦åœ¨ c++ é¡¹ç›®ä¸­æ·»åŠ æ¡¥æ¥æ–‡ä»¶ bridge.rsx</p>

<pre class="language-rust"><code class="language-rust">#[cxx::bridge]
mod foo {
    extern &quot;Rust&quot; {
        fn add(a: i32, b: i32) -&gt; i32;
    }
}
</code></pre>
<p>main.cc</p>

<pre class="language-c++"><code class="language-c++">#include &lt;stdio.h&gt;
#include &quot;bridge.rs.h&quot;

int main(int argc, char** argv) {
    printf(&quot;add(1, 2) == %d\n&quot;, add(1, 2));
    return 0;
}
</code></pre>
<h3 id="%E5%9C%A8-Rust-%E4%B8%AD%E8%B0%83%E7%94%A8-C%2B%2B">åœ¨ Rust ä¸­è°ƒç”¨ C++</h3>
<p>ä¾‹å­: <a href="https://github.com/xmake-io/xmake/tree/dev/tests/projects/rust/rust_call_cxx_library"  target="_blank">https://github.com/xmake-io/xmake/tree/dev/tests/projects/rust/rust_call_cxx_library</a></p>

<pre class="language-lua"><code class="language-lua">add_rules(&quot;mode.debug&quot;, &quot;mode.release&quot;)

target(&quot;foo&quot;, function()
    set_kind(&quot;static&quot;)
    add_files(&quot;src/foo.cc&quot;)
end)

target(&quot;test&quot;, function()
    set_kind(&quot;binary&quot;)
    add_deps(&quot;foo&quot;)
    add_files(&quot;src/main.rs&quot;)
end)
</code></pre>
<p>main.rs</p>

<pre class="language-rust"><code class="language-rust">extern &quot;C&quot; {
    fn add(a: i32, b: i32) -&gt; i32;
}

fn main() {
    unsafe {
        println!(&quot;add(1, 2) = {}&quot;, add(1, 2));
    }
}
</code></pre>
<p>foo.cc</p>

<pre class="language-c++"><code class="language-c++">extern &quot;C&quot; int add(int a, int b) {
    return a + b;
}
</code></pre>
<h2 id="Swift-%E7%A8%8B%E5%BA%8F">Swift ç¨‹åº</h2>
<p>åˆ›å»ºç©ºå·¥ç¨‹ï¼š</p>

<pre class="language-bash"><code class="language-bash">$ xmake create -l swift -t console test
</code></pre>
<p>xmake.luaå†…å®¹ï¼š</p>

<pre class="language-lua"><code class="language-lua">add_rules(&quot;mode.debug&quot;, &quot;mode.release&quot;)

target(&quot;test&quot;, function()
    set_kind(&quot;binary&quot;)
    add_files(&quot;src/*.swift&quot;)
end)
</code></pre>
<p>æ›´å¤šä¾‹å­è§ï¼š<a href="https://github.com/xmake-io/xmake/tree/master/tests/projects/swift"  target="_blank">Swift Examples</a></p>
<h2 id="Objc-%E7%A8%8B%E5%BA%8F">Objc ç¨‹åº</h2>
<p>åˆ›å»ºç©ºå·¥ç¨‹ï¼š</p>

<pre class="language-bash"><code class="language-bash">$ xmake create -l objc -t console test
</code></pre>
<p>xmake.lua å†…å®¹ï¼š</p>

<pre class="language-lua"><code class="language-lua">add_rules(&quot;mode.debug&quot;, &quot;mode.release&quot;)

target(&quot;test&quot;, function()
    set_kind(&quot;binary&quot;)
    add_files(&quot;src/*.m&quot;)
end)
</code></pre>
<p>æ›´å¤šä¾‹å­è§ï¼š<a href="https://github.com/xmake-io/xmake/tree/master/tests/projects/objc++"  target="_blank">Objc Examples</a></p>
<h2 id="Objc-%E7%A8%8B%E5%BA%8F">Objc ç¨‹åº</h2>
<p>åˆ›å»ºç©ºå·¥ç¨‹ï¼š</p>

<pre class="language-bash"><code class="language-bash">$ xmake create -l objc -t console test
</code></pre>
<p>xmake.lua å†…å®¹ï¼š</p>

<pre class="language-lua"><code class="language-lua">add_rules(&quot;mode.debug&quot;, &quot;mode.release&quot;)

target(&quot;test&quot;, function()
    set_kind(&quot;binary&quot;)
    add_files(&quot;src/*.m&quot;)
end)
</code></pre>
<p>æ›´å¤šä¾‹å­è§ï¼š<a href="https://github.com/xmake-io/xmake/tree/master/tests/projects/objc++"  target="_blank">Objc Examples</a></p>
<h2 id="Zig-%E7%A8%8B%E5%BA%8F">Zig ç¨‹åº</h2>
<p>åˆ›å»ºç©ºå·¥ç¨‹ï¼š</p>

<pre class="language-bash"><code class="language-bash">$ xmake create -l zig -t console test
</code></pre>
<p>xmake.lua å†…å®¹ï¼š</p>

<pre class="language-lua"><code class="language-lua">add_rules(&quot;mode.debug&quot;, &quot;mode.release&quot;)

target(&quot;test&quot;, function()
    set_kind(&quot;binary&quot;)
    add_files(&quot;src/*.zig&quot;)
end)
</code></pre>
<p>æ›´å¤šä¾‹å­è§ï¼š<a href="https://github.com/xmake-io/xmake/tree/master/tests/projects/zig"  target="_blank">Zig Examples</a></p>
<h2 id="Linux-Bpf-%E7%A8%8B%E5%BA%8F">Linux Bpf ç¨‹åº</h2>
<p>xmake æ”¯æŒ bpf ç¨‹åºæ„å»ºï¼ŒåŒæ—¶æ”¯æŒ linux ä»¥åŠ android å¹³å°ï¼Œèƒ½å¤Ÿè‡ªåŠ¨æ‹‰å– llvm å’Œ android ndk å·¥å…·é“¾ã€‚</p>
<p>æ›´å¤šè¯¦æƒ…è§ï¼š<a href="https://github.com/xmake-io/xmake/issues/1274"  target="_blank">#1274</a></p>

<pre class="language-lua"><code class="language-lua">add_rules(&quot;mode.release&quot;, &quot;mode.debug&quot;)
add_rules(&quot;platform.linux.bpf&quot;)

add_requires(&quot;linux-tools&quot;, {configs = {bpftool = true}})
add_requires(&quot;libbpf&quot;)
if is_plat(&quot;android&quot;) then
    add_requires(&quot;ndk &gt;=22.x&quot;)
    set_toolchains(&quot;@ndk&quot;, {sdkver = &quot;23&quot;})
else
    add_requires(&quot;llvm &gt;=10.x&quot;)
    set_toolchains(&quot;@llvm&quot;)
    add_requires(&quot;linux-headers&quot;)
end

target(&quot;minimal&quot;, function()
    set_kind(&quot;binary&quot;)
    add_files(&quot;src/*.c&quot;)
    add_packages(&quot;linux-tools&quot;, &quot;linux-headers&quot;, &quot;libbpf&quot;)
    set_license(&quot;GPL-2.0&quot;)
end)
</code></pre>
<h2 id="Vala-%E7%A8%8B%E5%BA%8F">Vala ç¨‹åº</h2>
<p>xmake æ”¯æŒæ„å»º Vala ç¨‹åºï¼Œæˆ‘ä»¬éœ€è¦åº”ç”¨ <code>add_rules(&quot;vala&quot;)</code> è§„åˆ™ï¼Œå¹¶ä¸” glib åŒ…æ˜¯å¿…é¡»çš„ã€‚</p>
<p>ç›¸å…³ issues: <a href="https://github.com/xmake-io/xmake/issues/1618"  target="_blank">#1618</a></p>
<p><code>add_values(&quot;vala.packages&quot;)</code> ç”¨äºå‘Šè¯‰ valacï¼Œé¡¹ç›®éœ€è¦å“ªäº›åŒ…ï¼Œå®ƒä¼šå¼•å…¥ç›¸å…³åŒ…çš„ vala apiï¼Œä½†æ˜¯åŒ…çš„ä¾èµ–é›†æˆï¼Œè¿˜æ˜¯éœ€è¦é€šè¿‡ <code>add_requires(&quot;lua&quot;)</code> ä¸‹è½½é›†æˆã€‚</p>
<h3 id="%E6%8E%A7%E5%88%B6%E5%8F%B0%E7%A8%8B%E5%BA%8F">æ§åˆ¶å°ç¨‹åº</h3>

<pre class="language-lua"><code class="language-lua">add_rules(&quot;mode.release&quot;, &quot;mode.debug&quot;)

add_requires(&quot;lua&quot;, &quot;glib&quot;)

target(&quot;test&quot;, function()
    set_kind(&quot;binary&quot;)
    add_rules(&quot;vala&quot;)
    add_files(&quot;src/*.vala&quot;)
    add_packages(&quot;lua&quot;, &quot;glib&quot;)
    add_values(&quot;vala.packages&quot;, &quot;lua&quot;)
end)
</code></pre>
<h3 id="%E9%9D%99%E6%80%81%E5%BA%93%E7%A8%8B%E5%BA%8F">é™æ€åº“ç¨‹åº</h3>
<p>æˆ‘ä»¬èƒ½å¤Ÿé€šè¿‡ <code>add_values(&quot;vala.header&quot;, &quot;mymath.h&quot;)</code> è®¾ç½®å¯¼å‡ºçš„æ¥å£å¤´æ–‡ä»¶åï¼Œé€šè¿‡ <code>add_values(&quot;vala.vapi&quot;, &quot;mymath-1.0.vapi&quot;)</code> è®¾ç½®å¯¼å‡ºçš„ vapi æ–‡ä»¶åã€‚</p>

<pre class="language-lua"><code class="language-lua">add_rules(&quot;mode.release&quot;, &quot;mode.debug&quot;)

add_requires(&quot;glib&quot;)

target(&quot;mymath&quot;, function()
    set_kind(&quot;static&quot;)
    add_rules(&quot;vala&quot;)
    add_files(&quot;src/mymath.vala&quot;)
    add_values(&quot;vala.header&quot;, &quot;mymath.h&quot;)
    add_values(&quot;vala.vapi&quot;, &quot;mymath-1.0.vapi&quot;)
    add_packages(&quot;glib&quot;)
end)

target(&quot;test&quot;, function()
    set_kind(&quot;binary&quot;)
    add_deps(&quot;mymath&quot;)
    add_rules(&quot;vala&quot;)
    add_files(&quot;src/main.vala&quot;)
    add_packages(&quot;glib&quot;)
end)
</code></pre>
<h3 id="%E5%8A%A8%E6%80%81%E5%BA%93%E7%A8%8B%E5%BA%8F">åŠ¨æ€åº“ç¨‹åº</h3>

<pre class="language-lua"><code class="language-lua">add_rules(&quot;mode.release&quot;, &quot;mode.debug&quot;)

add_requires(&quot;glib&quot;)

target(&quot;mymath&quot;, function()
    set_kind(&quot;shared&quot;)
    add_rules(&quot;vala&quot;)
    add_files(&quot;src/mymath.vala&quot;)
    add_values(&quot;vala.header&quot;, &quot;mymath.h&quot;)
    add_values(&quot;vala.vapi&quot;, &quot;mymath-1.0.vapi&quot;)
    add_packages(&quot;glib&quot;)
end)

target(&quot;test&quot;, function()
    set_kind(&quot;binary&quot;)
    add_deps(&quot;mymath&quot;)
    add_rules(&quot;vala&quot;)
    add_files(&quot;src/main.vala&quot;)
    add_packages(&quot;glib&quot;)
end)
</code></pre>
<p>æ›´å¤šä¾‹å­ï¼š<a href="https://github.com/xmake-io/xmake/tree/master/tests/projects/vala"  target="_blank">Vala examples</a></p>
<h2 id="Pascal-%E7%A8%8B%E5%BA%8F">Pascal ç¨‹åº</h2>
<p>æˆ‘ä»¬èƒ½å¤Ÿæ”¯æŒæ„å»º Pascal ç¨‹åºï¼Œç›¸å…³ issues è§ï¼š<a href="https://github.com/xmake-io/xmake/issues/388"  target="_blank">#388</a></p>
<h3 id="%E6%8E%A7%E5%88%B6%E5%8F%B0%E7%A8%8B%E5%BA%8F">æ§åˆ¶å°ç¨‹åº</h3>

<pre class="language-lua"><code class="language-lua">add_rules(&quot;mode.debug&quot;, &quot;mode.release&quot;)
target(&quot;test&quot;, function()
    set_kind(&quot;binary&quot;)
    add_files(&quot;src/*.pas&quot;)
end)
</code></pre>
<h3 id="%E5%8A%A8%E6%80%81%E5%BA%93%E7%A8%8B%E5%BA%8F">åŠ¨æ€åº“ç¨‹åº</h3>

<pre class="language-lua"><code class="language-lua">add_rules(&quot;mode.debug&quot;, &quot;mode.release&quot;)
target(&quot;foo&quot;, function()
    set_kind(&quot;shared&quot;)
    add_files(&quot;src/foo.pas&quot;)
end)

target(&quot;test&quot;, function()
    set_kind(&quot;binary&quot;)
    add_deps(&quot;foo&quot;)
    add_files(&quot;src/main.pas&quot;)
end)
</code></pre>
<p>æ›´å¤šä¾‹å­ï¼š<a href="https://github.com/xmake-io/xmake/tree/master/tests/projects/pascal"  target="_blank">Pascal examples</a></p>
<h2 id="Swig-%E6%A8%A1%E5%9D%97">Swig æ¨¡å—</h2>
<p>xmake æ”¯æŒæ„å»º Swig æ¨¡å—ï¼Œæˆ‘ä»¬æä¾›äº† <code>swig.c</code> å’Œ <code>swig.cpp</code> è§„åˆ™ï¼Œåˆ†åˆ«å¯¹åº”æ”¯æŒç”Ÿæˆ c/c++ æ¨¡å—æ¥å£ä»£ç ï¼Œé…åˆ xmake çš„åŒ…ç®¡ç†ç³»ç»Ÿå®ç°å®Œå…¨è‡ªåŠ¨åŒ–çš„æ¨¡å—å’Œä¾èµ–åŒ…æ•´åˆã€‚</p>
<p>ç›¸å…³ issues: <a href="https://github.com/xmake-io/xmake/issues/1622"  target="_blank">#1622</a></p>
<h3 id="Lua/C-%E6%A8%A1%E5%9D%97">Lua/C æ¨¡å—</h3>

<pre class="language-lua"><code class="language-lua">add_rules(&quot;mode.release&quot;, &quot;mode.debug&quot;)
add_requires(&quot;lua&quot;)

target(&quot;example&quot;, function()
    add_rules(&quot;swig.c&quot;, {moduletype = &quot;lua&quot;})
    add_files(&quot;src/example.i&quot;, {swigflags = &quot;-no-old-metatable-bindings&quot;})
    add_files(&quot;src/example.c&quot;)
    add_packages(&quot;lua&quot;)
end)
</code></pre>
<h3 id="Python/C-%E6%A8%A1%E5%9D%97">Python/C æ¨¡å—</h3>

<pre class="language-lua"><code class="language-lua">add_rules(&quot;mode.release&quot;, &quot;mode.debug&quot;)
add_requires(&quot;python 3.x&quot;)

target(&quot;example&quot;, function()
    add_rules(&quot;swig.c&quot;, {moduletype = &quot;python&quot;})
    add_files(&quot;src/example.i&quot;, {scriptdir = &quot;share&quot;})
    add_files(&quot;src/example.c&quot;)
    add_packages(&quot;python&quot;)
end)
</code></pre>
<h3 id="Python/C%2B%2B-%E6%A8%A1%E5%9D%97">Python/C++ æ¨¡å—</h3>

<pre class="language-lua"><code class="language-lua">add_rules(&quot;mode.release&quot;, &quot;mode.debug&quot;)
add_requires(&quot;python 3.x&quot;)

target(&quot;example&quot;, function()
    add_rules(&quot;swig.cpp&quot;, {moduletype = &quot;python&quot;})
    add_files(&quot;src/example.i&quot;, {scriptdir = &quot;share&quot;})
    add_files(&quot;src/example.cpp&quot;)
    add_packages(&quot;python&quot;)
end)
</code></pre>
<h3 id="Java/C-%E6%A8%A1%E5%9D%97">Java/C æ¨¡å—</h3>
<p><a href="https://github.com/xmake-io/xmake/blob/dev/tests/projects/swig/java_c"  target="_blank">å®Œæ•´ä¾‹å­</a></p>

<pre class="language-lua"><code class="language-lua">-- make sure you config to an enviroment with jni.h
-- for example: xmake f -c -p android

target(&quot;example&quot;, function()
    set_kind('shared')
    -- set moduletype to java
    add_rules(&quot;swig.c&quot;, {moduletype = &quot;java&quot;})
    -- test jar build
    -- add_rules(&quot;swig.c&quot;, {moduletype = &quot;java&quot; , buildjar = true})
    -- use swigflags to provider package name and output path of java files
    add_files(&quot;src/example.i&quot;, {swigflags = {
        &quot;-package&quot;,
        &quot;com.example&quot;,
        &quot;-outdir&quot;,
        &quot;build/java/com/example/&quot;
    }})
    add_files(&quot;src/example.c&quot;)
    add_includedirs(&quot;src&quot;)
    before_build(function()
        -- ensure output path exists before running swig
        os.mkdir(&quot;build/java/com/example/&quot;)
    end)
end)
</code></pre>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥é…ç½®</p>

<pre class="language-lua"><code class="language-lua">add_rules(&quot;swig.c&quot;, {moduletype = &quot;java&quot;, buildjar = true})
</code></pre>
<p>å»åŒæ—¶æ„å»º jar åŒ…ï¼Œæ–¹ä¾¿ç›´æ¥ä½¿ç”¨ã€‚</p>
<h2 id="C%2B%2B20-%E6%A8%A1%E5%9D%97">C++20 æ¨¡å—</h2>
<h3 id="%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B">å¿«é€Ÿå¼€å§‹</h3>
<p>xmake é‡‡ç”¨ <code>.mpp</code> ä½œä¸ºé»˜è®¤çš„æ¨¡å—æ‰©å±•åï¼Œä½†æ˜¯ä¹ŸåŒæ—¶æ”¯æŒ <code>.ixx</code>, <code>.cppm</code>, <code>.mxx</code> ç­‰æ‰©å±•åã€‚</p>
<p>ç›®å‰ xmake å·²ç»å®Œæ•´æ”¯æŒ gcc11/clang/msvc çš„ C++20 Modules æ„å»ºæ”¯æŒï¼Œå¹¶ä¸”èƒ½å¤Ÿè‡ªåŠ¨åˆ†ææ¨¡å—é—´çš„ä¾èµ–å…³ç³»ï¼Œå®ç°æœ€å¤§åŒ–å¹¶è¡Œç¼–è¯‘ã€‚</p>

<pre class="language-lua"><code class="language-lua">set_languages(&quot;c++20&quot;)
target(&quot;class&quot;, function()
    set_kind(&quot;binary&quot;)
    add_files(&quot;src/*.cpp&quot;, &quot;src/*.mpp&quot;)
end)
</code></pre>
<p>æ›´å¤šä¾‹å­è§ï¼š<a href="https://github.com/xmake-io/xmake/tree/master/tests/projects/c%2B%2B/modules"  target="_blank">C++ Modules</a></p>
<h3 id="Cpp-Only-%E5%B7%A5%E7%A8%8B">Cpp-Only å·¥ç¨‹</h3>
<p>xmake å¯¹ C++20 æ¨¡å—çš„å®ç°è¿›è¡Œäº†é‡æ„å’Œå‡çº§ï¼Œæ–°å¢äº†å¯¹ Headerunits çš„æ”¯æŒï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ¨¡å—ä¸­å¼•å…¥ Stl å’Œ ç”¨æˆ·å¤´æ–‡ä»¶æ¨¡å—ã€‚</p>
<p>ç›¸å…³çš„è¡¥ä¸è§ï¼š<a href="https://github.com/xmake-io/xmake/pull/2641"  target="_blank">#2641</a>ã€‚</p>
<p>æ³¨ï¼šé€šå¸¸æˆ‘ä»¬è‡³å°‘éœ€è¦æ·»åŠ ä¸€ä¸ª <code>.mpp</code> æ–‡ä»¶ï¼Œæ‰èƒ½å¼€å¯ C++20 modules ç¼–è¯‘ï¼Œå¦‚æœåªæœ‰ cpp æ–‡ä»¶ï¼Œé»˜è®¤æ˜¯ä¸ä¼šå¼€å¯æ¨¡å—ç¼–è¯‘çš„ã€‚</p>
<p>ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬ä»…ä»…åªæ˜¯æƒ³åœ¨ cpp æ–‡ä»¶ä¸­ä½¿ç”¨æ¨¡å—çš„ Headerunits ç‰¹æ€§ï¼Œæ¯”å¦‚å¼•å…¥ä¸€äº› stl Headerunits åœ¨ cpp ä¸­ä½¿ç”¨ï¼Œ<br />
é‚£ä¹ˆæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡è®¾ç½® <code>set_policy(&quot;build.c++.modules&quot;, true)</code> æ¥å¼ºè¡Œå¼€å¯ C++ Modules ç¼–è¯‘ï¼Œä¾‹å¦‚ï¼š</p>

<pre class="language-lua"><code class="language-lua">add_rules(&quot;mode.debug&quot;, &quot;mode.release&quot;)

target(&quot;test&quot;, function()
    set_kind(&quot;binary&quot;)
    add_files(&quot;src/*.cpp&quot;)
    set_languages(&quot;c++20&quot;)
    set_policy(&quot;build.c++.modules&quot;, true)
end)
</code></pre>
<h3 id="%E6%A8%A1%E5%9D%97%E7%9A%84%E5%88%86%E5%8F%91%E5%92%8C%E9%9B%86%E6%88%90">æ¨¡å—çš„åˆ†å‘å’Œé›†æˆ</h3>
<h4 id="%E5%88%86%E5%8F%91-C%2B%2B-Modules-%E5%8C%85">åˆ†å‘ C++ Modules åŒ…</h4>
<p>æˆ‘ä»¬å…ˆä½¿ç”¨ xmake.lua ç»´æŠ¤æ¨¡å—çš„æ„å»ºï¼Œå¹¶é€šè¿‡æŒ‡å®š <code>{install = true}</code>ï¼Œæ¥å‘Šè¯‰ xmake å“ªäº›æ¨¡å—æ–‡ä»¶éœ€è¦å®‰è£…å¯¹å¤–åˆ†å‘ã€‚</p>

<pre class="language-lua"><code class="language-lua">add_rules(&quot;mode.release&quot;, &quot;mode.debug&quot;)
set_languages(&quot;c++20&quot;)

target(&quot;foo&quot;, function()
    set_kind(&quot;static&quot;)
    add_files(&quot;*.cpp&quot;)
    add_files(&quot;*.mpp&quot;, { install = true })
end)
</code></pre>
<p>ç„¶åï¼Œæˆ‘ä»¬æŠŠå®ƒåšæˆåŒ…ï¼Œå¯ä»¥æäº¤åˆ° <a href="https://github.com/xmake-io/xmake-repo"  target="_blank">xmake-repo</a> ä»“åº“ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥åšæˆæœ¬åœ°åŒ…ï¼Œæˆ–è€…ç§æœ‰ä»“åº“åŒ…ã€‚</p>
<p>è¿™é‡Œï¼Œä¸ºäº†æ–¹ä¾¿æµ‹è¯•éªŒè¯ï¼Œæˆ‘ä»¬ä»…ä»…é€šè¿‡ <code>set_sourcedir</code> å°†å®ƒåšæˆæœ¬åœ°åŒ…ã€‚</p>

<pre class="language-lua"><code class="language-lua">package(&quot;foo&quot;, function()
    set_sourcedir(path.join(os.scriptdir(), &quot;src&quot;))
    on_install(function(package)
        import(&quot;package.tools.xmake&quot;).install(package, {})
    end)
end)
</code></pre>
<h4 id="%E9%9B%86%E6%88%90-C%2B%2B-Modules-%E5%8C%85">é›†æˆ C++ Modules åŒ…</h4>
<p>ç„¶åï¼Œæˆ‘ä»¬é€šè¿‡ <code>add_requires(&quot;foo&quot;)</code> çš„åŒ…é›†æˆæ¥å£ï¼Œå¯¹ C++ Modules åŒ…è¿›è¡Œå¿«é€Ÿé›†æˆä½¿ç”¨ã€‚</p>
<p>ç”±äº foo çš„æ¨¡å—åŒ…ï¼Œæˆ‘ä»¬æ”¾åœ¨ç§æœ‰ä»“åº“ä¸­å®šä¹‰ï¼Œæ‰€ä»¥æˆ‘ä»¬é€šè¿‡ <code>add_repositories(&quot;my-repo my-repo&quot;)</code> å¼•å…¥è‡ªå·±çš„åŒ…ä»“åº“ã€‚</p>
<p>å¦‚æœï¼ŒåŒ…å·²ç»æäº¤åˆ° xmake-repo å®˜æ–¹ä»“åº“ï¼Œå°±ä¸éœ€è¦é¢å¤–é…ç½®å®ƒã€‚</p>

<pre class="language-lua"><code class="language-lua">add_rules(&quot;mode.release&quot;, &quot;mode.debug&quot;)
set_languages(&quot;c++20&quot;)

add_repositories(&quot;my-repo my-repo&quot;)
add_requires(&quot;foo&quot;, &quot;bar&quot;)

target(&quot;packages&quot;, function()
    set_kind(&quot;binary&quot;)
    add_files(&quot;src/*.cpp&quot;)
    add_packages(&quot;foo&quot;, &quot;bar&quot;)
    set_policy(&quot;build.c++.modules&quot;, true)
end)
</code></pre>
<p>é›†æˆå¥½åŒ…åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ‰§è¡Œ <code>xmake</code> å‘½ä»¤ï¼Œä¸€é”®ä¸‹è½½ã€ç¼–è¯‘ã€é›†æˆ C++ Modules åŒ…æ¥ä½¿ç”¨ã€‚</p>

<pre class="language-bash"><code class="language-bash">$ xmake
checking for platform ... linux
checking for architecture ... x86_64
note: install or modify (m) these packages (pass -y to skip confirm)?
in my-repo:
  -&gt; foo latest
  -&gt; bar latest
please input: y (y/n/m)

  =&gt; install bar latest .. ok
  =&gt; install foo latest .. ok
[  0%]: generating.module.deps src/main.cpp
[  0%]: generating.module.deps /mnt/xmake/tests/projects/c++/modules/packages/build/.packages/b/bar/latest/4e0143c97b65425b855ad5fd03038b6a/modules/bar/bar.mpp
[  0%]: generating.module.deps /mnt/xmake/tests/projects/c++/modules/packages/build/.packages/f/foo/latest/4e0143c97b65425b855ad5fd03038b6a/modules/foo/foo.mpp
[ 14%]: compiling.module.release bar
[ 14%]: compiling.module.release foo
[ 57%]: compiling.release src/main.cpp
[ 71%]: linking.release packages
[100%]: build ok!
</code></pre>
<p>æ³¨ï¼šæ¯ä¸ªåŒ…å®‰è£…åï¼Œä¼šåœ¨åŒ…è·¯å¾„ä¸‹ï¼Œå­˜å‚¨ç»´æŠ¤æ¨¡å—çš„ meta-info æ–‡ä»¶ï¼Œè¿™æ˜¯ <code>p2473r1.pdf</code> ä¸­çº¦å®šçš„ä¸€ç§æ ¼å¼è§„èŒƒï¼Œä¹Ÿè®¸å®ƒä¸æ˜¯æœ€ç»ˆçš„æ ‡å‡†ï¼Œä½†è¿™å¹¶ä¸å½±å“æˆ‘ä»¬ç°åœ¨å»ä½¿ç”¨æ¨¡å—çš„åˆ†å‘ã€‚</p>

<pre class="language-bash"><code class="language-bash">$ cat ./build/.packages/f/foo/latest/4e0143c97b65425b855ad5fd03038b6a/modules/foo/foo.mpp.meta-info
{&quot;_VENDOR_extension&quot;:{&quot;xmake&quot;:{&quot;name&quot;:&quot;foo&quot;,&quot;file&quot;:&quot;foo.mpp&quot;}},&quot;definitions&quot;:{},&quot;include_paths&quot;:{}}
</code></pre>
<p>å®Œæ•´çš„ä¾‹å­å·¥ç¨‹è§ï¼š<a href="https://github.com/xmake-io/xmake/tree/master/tests/projects/c%2B%2B/modules/packages"  target="_blank">C++ Modules åŒ…åˆ†å‘ä¾‹å­å·¥ç¨‹</a></p>
<h3 id="%E6%94%AF%E6%8C%81-C%2B%2B23-Std-Modules">æ”¯æŒ C++23 Std Modules</h3>
<p><a href="https://github.com/Arthapz"  target="_blank">Arthapz</a> ä¹Ÿå¸®å¿™æ”¹è¿›äº†å¯¹ C++23 Std Modules çš„æ”¯æŒã€‚</p>
<p>ç›®å‰ä¸‰ä¸ªç¼–è¯‘å™¨å¯¹å®ƒçš„æ”¯æŒè¿›å±•ï¼š</p>
<h4 id="Clang">Clang</h4>
<p>ç›®å‰æœ€æ–°çš„ clang ä¼¼ä¹ä¹Ÿè¿˜æ²¡å®Œå…¨æ”¯æŒ C++23 std modulesï¼Œå½“å‰è¿˜æ˜¯ draft patch çŠ¶æ€ï¼Œ<a href="https://reviews.llvm.org/D135507"  target="_blank">#D135507</a>ã€‚</p>
<p>ä½†æ˜¯ï¼ŒXmake ä¹Ÿå¯¹å®ƒè¿›è¡Œäº†æ”¯æŒï¼Œå¦‚æœå¤§å®¶æƒ³è¦å°é²œï¼Œå¯ä»¥è‡ªè¡Œåˆå…¥è¿™ä¸ª patchï¼Œç„¶åä½¿ç”¨ xmake æ¥æµ‹è¯•ã€‚</p>
<p>å¦å¤–ï¼Œä½ç‰ˆæœ¬çš„ clang ä¹Ÿæœ‰å¯¹éæ ‡å‡†çš„ std modules åšäº†å®éªŒæ€§æ”¯æŒã€‚</p>
<p>æˆ‘ä»¬è¿˜æ˜¯å¯ä»¥åœ¨ä½ç‰ˆæœ¬ clang ä¸­å°è¯•æ€§ä½¿ç”¨ xmake æ¥æ„å»º std modulesï¼Œå°½ç®¡å®ƒå¯èƒ½è¿˜åªæ˜¯ä¸ªç©å…·ï¼ˆä¼šé‡åˆ°å¾ˆå¤šé—®é¢˜ï¼‰ã€‚</p>
<p>ç›¸å…³è®¨è®ºè§ï¼š<a href="https://github.com/xmake-io/xmake/pull/3255"  target="_blank">#3255</a></p>
<h4 id="Gcc">Gcc</h4>
<p>ç›®å‰è¿˜ä¸æ”¯æŒã€‚</p>
<h2 id="%E5%90%88%E5%B9%B6%E9%9D%99%E6%80%81%E5%BA%93">åˆå¹¶é™æ€åº“</h2>
<h3 id="%E8%87%AA%E5%8A%A8%E5%90%88%E5%B9%B6-target-%E5%BA%93">è‡ªåŠ¨åˆå¹¶ target åº“</h3>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½® <code>build.merge_archive</code> ç­–ç•¥ï¼Œå¯ç”¨è‡ªåŠ¨åˆå¹¶ä¾èµ–çš„æ‰€æœ‰é™æ€åº“ï¼Œä¾‹å¦‚ï¼š</p>

<pre class="language-lua"><code class="language-lua">add_rules(&quot;mode.debug&quot;, &quot;mode.release&quot;)

target(&quot;add&quot;, function()
    set_kind(&quot;static&quot;)
    add_files(&quot;src/add.c&quot;)
    add_files(&quot;src/subdir/add.c&quot;)
end)

target(&quot;sub&quot;, function()
    set_kind(&quot;static&quot;)
    add_files(&quot;src/sub.c&quot;)
    add_files(&quot;src/subdir/sub.c&quot;)
end)

target(&quot;mul&quot;, function()
    set_kind(&quot;static&quot;)
    add_deps(&quot;add&quot;, &quot;sub&quot;)
    add_files(&quot;src/mul.c&quot;)
    set_policy(&quot;build.merge_archive&quot;, true)
end)
</code></pre>
<p>mul é™æ€åº“è‡ªåŠ¨åˆå¹¶äº† add å’Œ sub é™æ€åº“ï¼Œç”Ÿæˆä¸€ä¸ªåŒ…å« add/sub ä»£ç çš„å®Œæ•´ libmul.a åº“ã€‚</p>
<p>è¿™ä¸ªåˆå¹¶ç›¸å¯¹æ¯”è¾ƒç¨³å®šå®Œå–„ï¼Œæ”¯æŒ ar å’Œ msvc/lib.exeï¼Œä¹Ÿæ”¯æŒäº¤å‰ç¼–è¯‘å·¥å…·é“¾ç”Ÿæˆçš„é™æ€åº“åˆå¹¶ï¼Œä¹Ÿæ”¯æŒå¸¦æœ‰é‡å obj æ–‡ä»¶çš„é™æ€åº“ã€‚</p>
<h3 id="%E5%90%88%E5%B9%B6%E6%8C%87%E5%AE%9A%E7%9A%84%E9%9D%99%E6%80%81%E5%BA%93%E6%96%87%E4%BB%B6">åˆå¹¶æŒ‡å®šçš„é™æ€åº“æ–‡ä»¶</h3>
<p>å¦‚æœè‡ªåŠ¨åˆå¹¶ä¸æ»¡è¶³éœ€æ±‚ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸»åŠ¨è°ƒç”¨ <code>utils.archive.merge_archive</code> æ¨¡å—åœ¨ <code>after_link</code> é˜¶æ®µåˆå¹¶æŒ‡å®šçš„é™æ€åº“åˆ—è¡¨ã€‚</p>

<pre class="language-lua"><code class="language-lua">target(&quot;test&quot;, function()
    after_link(function (target)
        import(&quot;utils.archive.merge_staticlib&quot;)
        merge_staticlib(target, &quot;libout.a&quot;, {&quot;libfoo.a&quot;, &quot;libbar.a&quot;})
    end)
end)
</code></pre>
<h3 id="%E4%BD%BF%E7%94%A8-add_files-%E5%90%88%E5%B9%B6%E9%9D%99%E6%80%81%E5%BA%93">ä½¿ç”¨ add_files åˆå¹¶é™æ€åº“</h3>
<p>å…¶å®ï¼Œæˆ‘ä»¬ä¹‹å‰çš„ç‰ˆæœ¬å·²ç»æ”¯æŒé€šè¿‡ <code>add_files(&quot;*.a&quot;)</code> æ¥åˆå¹¶é™æ€åº“ã€‚</p>

<pre class="language-lua"><code class="language-lua">target(&quot;test&quot;, function()
    set_kind(&quot;binary&quot;)
    add_files(&quot;*.a&quot;)
    add_files(&quot;*.c&quot;)
end)
</code></pre>
<p>ä½†æ˜¯å®ƒæœ‰ä¸€äº›ç¼ºé™·ï¼šå¦‚æœä½¿ç”¨ arï¼Œå¯èƒ½ä¼šå­˜åœ¨ .obj å¯¹è±¡æ–‡ä»¶åŒåå†²çªå¯¼è‡´åˆå¹¶å¤±è´¥ï¼Œå› æ­¤æ¨èä½¿ç”¨ä¸Šæ–‡ä»‹ç»çš„åˆå¹¶æ–¹å¼ï¼Œæ›´åŠ çš„ç¨³å®šå¯é ï¼Œä¹Ÿæ›´åŠ çš„ç®€å•ã€‚</p>
<p>ç›¸å…³ issues: <a href="https://github.com/xmake-io/xmake/issues/1638"  target="_blank">#1638</a></p>
<h2 id="Nim-%E7%A8%8B%E5%BA%8F">Nim ç¨‹åº</h2>
<p>xmake æ”¯æŒ Nimlang é¡¹ç›®ï¼Œç›¸å…³ issues è§ï¼š<a href="https://github.com/xmake-io/xmake/issues/1756"  target="_blank">#1756</a></p>
<h3 id="%E5%88%9B%E5%BB%BA%E7%A9%BA%E5%B7%A5%E7%A8%8B">åˆ›å»ºç©ºå·¥ç¨‹</h3>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>xmake create</code> å‘½ä»¤åˆ›å»ºç©ºå·¥ç¨‹ã€‚</p>

<pre class="language-bash"><code class="language-bash">xmake create -l nim -t console test
xmake create -l nim -t static test
xmake create -l nim -t shared test
</code></pre>
<h3 id="%E6%8E%A7%E5%88%B6%E5%8F%B0%E7%A8%8B%E5%BA%8F">æ§åˆ¶å°ç¨‹åº</h3>

<pre class="language-lua"><code class="language-lua">add_rules(&quot;mode.debug&quot;, &quot;mode.release&quot;)

target(&quot;test&quot;, function()
    set_kind(&quot;binary&quot;)
    add_files(&quot;src/main.nim&quot;)
end)
</code></pre>

<pre class="language-bash"><code class="language-bash">$ xmake -v
[ 33%]: linking.release test
/usr/local/bin/nim c --opt:speed --nimcache:build/.gens/test/macosx/x86_64/release/nimcache -o:b
uild/macosx/x86_64/release/test src/main.nim
[100%]: build ok!
</code></pre>
<h3 id="%E9%9D%99%E6%80%81%E5%BA%93%E7%A8%8B%E5%BA%8F">é™æ€åº“ç¨‹åº</h3>

<pre class="language-lua"><code class="language-lua">add_rules(&quot;mode.debug&quot;, &quot;mode.release&quot;)

target(&quot;foo&quot;, function()
    set_kind(&quot;static&quot;)
    add_files(&quot;src/foo.nim&quot;)
end)

target(&quot;test&quot;, function()
    set_kind(&quot;binary&quot;)
    add_deps(&quot;foo&quot;)
    add_files(&quot;src/main.nim&quot;)
end)
</code></pre>

<pre class="language-bash"><code class="language-bash">$ xmake -v
[ 33%]: linking.release libfoo.a
/usr/local/bin/nim c --opt:speed --nimcache:build/.gens/foo/macosx/x86_64/release/nimcache --app
:staticlib --noMain --passC:-DNimMain=NimMain_B6D5BD02 --passC:-DNimMainInner=NimMainInner_B6D5B
D02 --passC:-DNimMainModule=NimMainModule_B6D5BD02 --passC:-DPreMain=PreMain_B6D5BD02 --passC:-D
PreMainInner=PreMainInner_B6D5BD02 -o:build/macosx/x86_64/release/libfoo.a src/foo.nim
[ 66%]: linking.release test
/usr/local/bin/nim c --opt:speed --nimcache:build/.gens/test/macosx/x86_64/release/nimcache --pa
ssL:-Lbuild/macosx/x86_64/release --passL:-lfoo -o:build/macosx/x86_64/release/test src/main.nim
[100%]: build ok!
</code></pre>
<h3 id="%E5%8A%A8%E6%80%81%E5%BA%93%E7%A8%8B%E5%BA%8F">åŠ¨æ€åº“ç¨‹åº</h3>

<pre class="language-lua"><code class="language-lua">add_rules(&quot;mode.debug&quot;, &quot;mode.release&quot;)

target(&quot;foo&quot;, function()
    set_kind(&quot;shared&quot;)
    add_files(&quot;src/foo.nim&quot;)
end)

target(&quot;test&quot;, function()
    set_kind(&quot;binary&quot;)
    add_deps(&quot;foo&quot;)
    add_files(&quot;src/main.nim&quot;)
end)
</code></pre>

<pre class="language-bash"><code class="language-bash">$ xmake -rv
[ 33%]: linking.release libfoo.dylib
/usr/local/bin/nim c --opt:speed --nimcache:build/.gens/foo/macosx/x86_64/release/nimcache --app
:lib --noMain -o:build/macosx/x86_64/release/libfoo.dylib src/foo.nim
[ 66%]: linking.release test
/usr/local/bin/nim c --opt:speed --nimcache:build/.gens/test/macosx/x86_64/release/nimcache --pa
ssL:-Lbuild/macosx/x86_64/release --passL:-lfoo -o:build/macosx/x86_64/release/test src/main.nim
[100%]: build ok!
</code></pre>
<h3 id="C-%E4%BB%A3%E7%A0%81%E6%B7%B7%E5%90%88%E7%BC%96%E8%AF%91">C ä»£ç æ··åˆç¼–è¯‘</h3>

<pre class="language-lua"><code class="language-lua">add_rules(&quot;mode.debug&quot;, &quot;mode.release&quot;)

target(&quot;foo&quot;, function()
    set_kind(&quot;static&quot;)
    add_files(&quot;src/*.c&quot;)
end)

target(&quot;test&quot;, function()
    set_kind(&quot;binary&quot;)
    add_deps(&quot;foo&quot;)
    add_files(&quot;src/main.nim&quot;)
end)
</code></pre>
<h3 id="Nimble-%E4%BE%9D%E8%B5%96%E5%8C%85%E9%9B%86%E6%88%90">Nimble ä¾èµ–åŒ…é›†æˆ</h3>
<p>å®Œæ•´ä¾‹å­è§ï¼š<a href="https://github.com/xmake-io/xmake/tree/dev/tests/projects/nim/nimble_package"  target="_blank">Nimble Package Example</a></p>

<pre class="language-lua"><code class="language-lua">add_rules(&quot;mode.debug&quot;, &quot;mode.release&quot;)

add_requires(&quot;nimble::zip &gt;0.3&quot;)

target(&quot;test, function()
    set_kind(&quot;binary&quot;)
    add_files(&quot;src/main.nim&quot;)
    add_packages(&quot;nimble::zip&quot;)
end)
</code></pre>
<p>main.nim</p>

<pre class="language-nim"><code class="language-nim">import zip/zlib

echo zlibVersion()
</code></pre>
<h3 id="Native-%E4%BE%9D%E8%B5%96%E5%8C%85%E9%9B%86%E6%88%90">Native ä¾èµ–åŒ…é›†æˆ</h3>
<p>å®Œæ•´ä¾‹å­è§ï¼š<a href="https://github.com/xmake-io/xmake/tree/dev/tests/projects/nim/native_package"  target="_blank">Native Package Example</a></p>

<pre class="language-lua"><code class="language-lua">add_rules(&quot;mode.debug&quot;, &quot;mode.release&quot;)

add_requires(&quot;zlib&quot;)

target(&quot;test&quot;, function()
    set_kind(&quot;binary&quot;)
    add_files(&quot;src/main.nim&quot;)
    add_packages(&quot;zlib&quot;)
end)
</code></pre>
<p>main.nim</p>

<pre class="language-nim"><code class="language-nim">proc zlibVersion(): cstring {.cdecl, importc}

echo zlibVersion()
</code></pre>
<h2 id="Keil/MDK-%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%A8%8B%E5%BA%8F">Keil/MDK åµŒå…¥å¼ç¨‹åº</h2>
<p>ç›¸å…³ä¾‹å­å·¥ç¨‹ï¼š<a href="https://github.com/xmake-io/xmake/tree/dev/tests/projects/embed/mdk/hello"  target="_blank">Example</a></p>
<p>xmake ä¼šè‡ªåŠ¨æ¢æµ‹ Keil/MDK å®‰è£…çš„ç¼–è¯‘å™¨ï¼Œç›¸å…³ issues <a href="https://github.com/xmake-io/xmake/issues/1753"  target="_blank">#1753</a>ã€‚</p>
<p>ä½¿ç”¨ armcc ç¼–è¯‘</p>

<pre class="language-bash"><code class="language-bash">$ xmake f -p cross -a cortex-m3 --toolchain=armcc -c
$ xmake
</code></pre>
<p>ä½¿ç”¨ armclang ç¼–è¯‘</p>

<pre class="language-bash"><code class="language-bash">$ xmake f -p cross -a cortex-m3 --toolchain=armclang -c
$ xmake
</code></pre>
<h3 id="%E5%8F%AF%E6%89%A7%E8%A1%8C%E7%A8%8B%E5%BA%8F">å¯æ‰§è¡Œç¨‹åº</h3>

<pre class="language-lua"><code class="language-lua">target(&quot;hello&quot;, function()
    add_deps(&quot;foo&quot;)
    add_rules(&quot;mdk.binary&quot;)
    add_files(&quot;src/*.c&quot;, &quot;src/*.s&quot;)
    add_includedirs(&quot;src/lib/cmsis&quot;)
    set_runtimes(&quot;microlib&quot;)
end)
</code></pre>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç›®å‰ä¸€äº› mdk ç¨‹åºéƒ½ä½¿ç”¨äº† microlib åº“è¿è¡Œæ—¶ï¼Œå®ƒéœ€è¦ç¼–è¯‘å™¨åŠ ä¸Š <code>__MICROLIB</code> å®å®šä¹‰ï¼Œé“¾æ¥å™¨åŠ ä¸Š <code>--library_type=microlib</code> ç­‰å„ç§é…ç½®ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>set_runtimes(&quot;microlib&quot;)</code> ç›´æ¥è®¾ç½®åˆ° microlib è¿è¡Œæ—¶åº“ï¼Œå¯ä»¥è‡ªåŠ¨è®¾ç½®ä¸Šæ‰€æœ‰ç›¸å…³é€‰é¡¹ã€‚</p>
<h3 id="%E9%9D%99%E6%80%81%E5%BA%93%E7%A8%8B%E5%BA%8F">é™æ€åº“ç¨‹åº</h3>

<pre class="language-lua"><code class="language-lua">add_rules(&quot;mode.debug&quot;, &quot;mode.release&quot;)

target(&quot;foo&quot;, function()
    add_rules(&quot;mdk.static&quot;)
    add_files(&quot;src/foo/*.c&quot;)
    set_runtimes(&quot;microlib&quot;)
end)
</code></pre>
<h2 id="Keil/C51-%E5%B5%8C%E5%85%A5%E5%BC%8F%E7%A8%8B%E5%BA%8F">Keil/C51 åµŒå…¥å¼ç¨‹åº</h2>
<h3 id="%E5%8F%AF%E6%89%A7%E8%A1%8C%E7%A8%8B%E5%BA%8F">å¯æ‰§è¡Œç¨‹åº</h3>

<pre class="language-lua"><code class="language-lua">target(&quot;hello&quot;, function()
    add_rules(&quot;c51.binary&quot;)
    set_toolchains(&quot;c51&quot;)
    add_files(&quot;src/main.c&quot;)
end)
</code></pre>
<h2 id="Lua-%E6%A8%A1%E5%9D%97">Lua æ¨¡å—</h2>
<p>å‚è€ƒ <a href="https://github.com/xmake-io/luarocks-build-xmake"  target="_blank">https://github.com/xmake-io/luarocks-build-xmake</a><br />
å¦‚æœä½ çš„ lua æ¨¡å—å«æœ‰ C ä»£ç ï¼Œä½ å¯ä»¥ä½¿ç”¨ <a href="https://github.com/Neopallium/LuaNativeObjects"  target="_blank">LuaNativeObjects</a> å»ä» lua ä»£ç ç”Ÿæˆ C ä»£ç ã€‚<br />
å‚è€ƒ<a href="https://github.com/Freed-Wu/rime.nvim/blob/main/xmake.lua"  target="_blank">ä¾‹å­</a>ã€‚</p>
<h2 id="Nodejs-%E6%A8%A1%E5%9D%97">Nodejs æ¨¡å—</h2>
<p>å‚è€ƒ<a href="https://github.com/tonyfettes/coc-rime/blob/master/xmake.lua"  target="_blank">ä¾‹å­</a>ã€‚</p>
<h2 id="Linux-%E5%86%85%E6%A0%B8%E9%A9%B1%E5%8A%A8%E6%A8%A1%E5%9D%97">Linux å†…æ ¸é©±åŠ¨æ¨¡å—</h2>
<p>xmake å®Œæ•´æ”¯æŒäº† Linux å†…æ ¸é©±åŠ¨æ¨¡å—çš„æ„å»ºï¼Œè¿™ä¹Ÿè®¸é¦–ä¸ªä¹Ÿæ˜¯å”¯ä¸€ä¸€ä¸ªæ”¯æŒç¼–è¯‘ Linux å†…æ ¸é©±åŠ¨çš„ç¬¬ä¸‰æ–¹æ„å»ºå·¥å…·äº†ã€‚</p>
<h3 id="Hello-world-%E6%A8%A1%E5%9D%97">Hello world æ¨¡å—</h3>
<p>å®Œæ•´ä¾‹å­ï¼š<a href="https://github.com/xmake-io/xmake/tree/master/tests/projects/linux/driver/hello"  target="_blank">Linux Kernel Driver Modules</a></p>
<p>å®ƒçš„é…ç½®éå¸¸ç®€å•ï¼Œåªéœ€è¦é…ç½®ä¸Šæ”¯æŒæ¨¡å—çš„ linux-headers åŒ…ï¼Œç„¶ååº”ç”¨ <code>platform.linux.module</code> æ„å»ºè§„åˆ™å°±è¡Œäº†ã€‚</p>

<pre class="language-lua"><code class="language-lua">add_requires(&quot;linux-headers&quot;, {configs = {driver_modules = true}})

target(&quot;hello&quot;, function()
    add_rules(&quot;platform.linux.module&quot;)
    add_files(&quot;src/*.c&quot;)
    add_packages(&quot;linux-headers&quot;)
    set_license(&quot;GPL-2.0&quot;)
end)
</code></pre>
<p>ç„¶åç›´æ¥æ‰§è¡Œ xmake å‘½ä»¤ï¼Œä¸€é”®ç¼–è¯‘ï¼Œç”Ÿæˆå†…æ ¸é©±åŠ¨æ¨¡å— hello.koã€‚</p>

<pre class="language-bash"><code class="language-bash">$ xmake
[ 20%]: cache compiling.release src/add.c
[ 20%]: cache compiling.release src/hello.c
[ 60%]: linking.release build/linux/x86_64/release/hello.ko
[100%]: build ok!
</code></pre>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹å®Œæ•´æ„å»ºå‘½ä»¤å‚æ•°ã€‚</p>

<pre class="language-bash"><code class="language-bash">$ xmake -v
[ 20%]: cache compiling.release src/add.c
/usr/bin/ccache /usr/bin/gcc -c -m64 -O2 -std=gnu89 -I/usr/src/linux-headers-5.11.0-41-generic/arch/x86/include -I/usr/src/linux-headers-5.11.0-41-generic/arch/x86/include/generated -I/usr/src/linux-headers-5.11.0-41-generic/include -I/usr/src/linux-headers-5.11.0-41-generic/arch/x86/include/uapi -I/usr/src/linux-headers-5.11.0-41-generic/arch/x86/include/generated/uapi -I/usr/src/linux-headers-5.11.0-41-generic/include/uapi -I/usr/src/linux-headers-5.11.0-41-generic/include/generated/uapi -D__KERNEL__ -DMODULE -DKBUILD_MODNAME=\&quot;hello\&quot; -DCONFIG_X86_X32_ABI -isystem /usr/lib/gcc/x86_64-linux-gnu/10/include -include /usr/src/linux-headers-5.11.0-41-generic/include/linux/kconfig.h -include /usr/src/linux-headers-5.11.0-41-generic/include/linux/compiler_types.h -nostdinc -mno-sse -mno-mmx -mno-sse2 -mno-3dnow -mno-avx -mno-80387 -mno-fp-ret-in-387 -mpreferred-stack-boundary=3 -mskip-rax-setup -mtune=generic -mno-red-zone -mcmodel=kernel -mindirect-branch=thunk-extern -mindirect-branch-register -mrecord-mcount -fmacro-prefix-map=./= -fno-strict-aliasing -fno-common -fshort-wchar -fno-PIE -fcf-protection=none -falign-jumps=1 -falign-loops=1 -fno-asynchronous-unwind-tables -fno-jump-tables -fno-delete-null-pointer-checks -fno-allow-store-data-races -fno-reorder-blocks -fno-ipa-cp-clone -fno-partial-inlining -fstack-protector-strong -fno-inline-functions-called-once -falign-functions=32 -fno-strict-overflow -fno-stack-check -fconserve-stack -DKBUILD_BASENAME=\&quot;add\&quot; -o build/.objs/hello/linux/x86_64/release/src/add.c.o src/add.c
[ 20%]: cache compiling.release src/hello.c
/usr/bin/ccache /usr/bin/gcc -c -m64 -O2 -std=gnu89 -I/usr/src/linux-headers-5.11.0-41-generic/arch/x86/include -I/usr/src/linux-headers-5.11.0-41-generic/arch/x86/include/generated -I/usr/src/linux-headers-5.11.0-41-generic/include -I/usr/src/linux-headers-5.11.0-41-generic/arch/x86/include/uapi -I/usr/src/linux-headers-5.11.0-41-generic/arch/x86/include/generated/uapi -I/usr/src/linux-headers-5.11.0-41-generic/include/uapi -I/usr/src/linux-headers-5.11.0-41-generic/include/generated/uapi -D__KERNEL__ -DMODULE -DKBUILD_MODNAME=\&quot;hello\&quot; -DCONFIG_X86_X32_ABI -isystem /usr/lib/gcc/x86_64-linux-gnu/10/include -include /usr/src/linux-headers-5.11.0-41-generic/include/linux/kconfig.h -include /usr/src/linux-headers-5.11.0-41-generic/include/linux/compiler_types.h -nostdinc -mno-sse -mno-mmx -mno-sse2 -mno-3dnow -mno-avx -mno-80387 -mno-fp-ret-in-387 -mpreferred-stack-boundary=3 -mskip-rax-setup -mtune=generic -mno-red-zone -mcmodel=kernel -mindirect-branch=thunk-extern -mindirect-branch-register -mrecord-mcount -fmacro-prefix-map=./= -fno-strict-aliasing -fno-common -fshort-wchar -fno-PIE -fcf-protection=none -falign-jumps=1 -falign-loops=1 -fno-asynchronous-unwind-tables -fno-jump-tables -fno-delete-null-pointer-checks -fno-allow-store-data-races -fno-reorder-blocks -fno-ipa-cp-clone -fno-partial-inlining -fstack-protector-strong -fno-inline-functions-called-once -falign-functions=32 -fno-strict-overflow -fno-stack-check -fconserve-stack -DKBUILD_BASENAME=\&quot;hello\&quot; -o build/.objs/hello/linux/x86_64/release/src/hello.c.o src/hello.c
[ 60%]: linking.release build/linux/x86_64/release/hello.ko
/usr/bin/ld -m elf_x86_64 -r -o build/.objs/hello/linux/x86_64/release/build/linux/x86_64/release/hello.ko.o build/.objs/hello/linux/x86_64/release/src/add.c.o build/.objs/hello/linux/x86_64/release/src/hello.c.o
/usr/src/linux-headers-5.11.0-41-generic/scripts/mod/modpost -m -a -o build/.objs/hello/linux/x86_64/release/build/linux/x86_64/release/Module.symvers -e -N -T -
WARNING: modpost: Symbol info of vmlinux is missing. Unresolved symbol check will be entirely skipped.
/usr/bin/ccache /usr/bin/gcc -c -m64 -O2 -std=gnu89 -I/usr/src/linux-headers-5.11.0-41-generic/arch/x86/include -I/usr/src/linux-headers-5.11.0-41-generic/arch/x86/include/generated -I/usr/src/linux-headers-5.11.0-41-generic/include -I/usr/src/linux-headers-5.11.0-41-generic/arch/x86/include/uapi -I/usr/src/linux-headers-5.11.0-41-generic/arch/x86/include/generated/uapi -I/usr/src/linux-headers-5.11.0-41-generic/include/uapi -I/usr/src/linux-headers-5.11.0-41-generic/include/generated/uapi -D__KERNEL__ -DMODULE -DKBUILD_MODNAME=\&quot;hello\&quot; -DCONFIG_X86_X32_ABI -isystem /usr/lib/gcc/x86_64-linux-gnu/10/include -include /usr/src/linux-headers-5.11.0-41-generic/include/linux/kconfig.h -include /usr/src/linux-headers-5.11.0-41-generic/include/linux/compiler_types.h -nostdinc -mno-sse -mno-mmx -mno-sse2 -mno-3dnow -mno-avx -mno-80387 -mno-fp-ret-in-387 -mpreferred-stack-boundary=3 -mskip-rax-setup -mtune=generic -mno-red-zone -mcmodel=kernel -mindirect-branch=thunk-extern -mindirect-branch-register -mrecord-mcount -fmacro-prefix-map=./= -fno-strict-aliasing -fno-common -fshort-wchar -fno-PIE -fcf-protection=none -falign-jumps=1 -falign-loops=1 -fno-asynchronous-unwind-tables -fno-jump-tables -fno-delete-null-pointer-checks -fno-allow-store-data-races -fno-reorder-blocks -fno-ipa-cp-clone -fno-partial-inlining -fstack-protector-strong -fno-inline-functions-called-once -falign-functions=32 -fno-strict-overflow -fno-stack-check -fconserve-stack -o build/.objs/hello/linux/x86_64/release/build/linux/x86_64/release/hello.ko.mod.o build/.objs/hello/linux/x86_64/release/build/linux/x86_64/release/hello.ko.mod.c
/usr/bin/ld -m elf_x86_64 -r --build-id=sha1 -T /usr/src/linux-headers-5.11.0-41-generic/scripts/module.lds -o build/linux/x86_64/release/hello.ko build/.objs/hello/linux/x86_64/release/build/linux/x86_64/release/hello.ko.o build/.objs/hello/linux/x86_64/release/build/linux/x86_64/release/hello.ko.mod.o

</code></pre>
<p>é€šè¿‡ <code>add_requires(&quot;linux-headers&quot;, {configs = {driver_modules = true}})</code> é…ç½®åŒ…ï¼Œxmake ä¼šè‡ªåŠ¨ä¼˜å…ˆä»ç³»ç»Ÿä¸­æŸ¥æ‰¾å¯¹åº”çš„ linux-headers åŒ…ã€‚</p>
<p>å¦‚æœæ²¡æ‰¾åˆ°ï¼Œxmake ä¹Ÿä¼šè‡ªåŠ¨ä¸‹è½½å®ƒï¼Œç„¶åè‡ªåŠ¨é…ç½®æ„å»ºå¸¦æœ‰ driver modules çš„å†…æ ¸æºç åï¼Œä½¿ç”¨å®ƒç»§ç»­æ„å»ºå†…æ ¸æ¨¡å—ã€‚</p>
<h3 id="%E8%87%AA%E5%AE%9A%E4%B9%89-linux-headers-%E8%B7%AF%E5%BE%84">è‡ªå®šä¹‰ linux-headers è·¯å¾„</h3>
<p>æœ‰å¾ˆå¤šç”¨æˆ·åé¦ˆï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œlinux å†…æ ¸é©±åŠ¨æ„å»ºéƒ½æ˜¯åŸºäºå®šåˆ¶ç‰ˆçš„ linux kernelï¼Œå› æ­¤éœ€è¦èƒ½å¤Ÿè‡ªå®šä¹‰é…ç½® linux-headers è·¯å¾„ï¼Œè€Œä¸æ˜¯èµ°è¿œç¨‹ä¾èµ–åŒ…æ¨¡å¼ã€‚</p>
<p>å…¶å®ï¼Œæˆ‘ä»¬é€šè¿‡è‡ªå·±é‡å†™ linux-headers åŒ…ï¼Œä¹Ÿæ˜¯å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹çš„ã€‚</p>

<pre class="language-lua"><code class="language-lua">package(&quot;linux-headers&quot;)
    on_fetch(function (package, opt)
        return {includedirs = &quot;/usr/src/linux-headers-5.0/include&quot;}
    end)
package_end()

add_requires(&quot;linux-headers&quot;)

target(&quot;test&quot;, function()
    add_rules(&quot;platform.linux.module&quot;)
    add_files(&quot;src/*.c&quot;)
    add_packages(&quot;linux-headers&quot;)
end)
</code></pre>
<p>ä¸è¿‡è¿™æ ·ï¼Œä¹Ÿè®¸è¿˜æœ‰ç‚¹ç¹çï¼Œå› æ­¤æˆ‘ä»¬æ”¯æŒæ›´åŠ æ–¹ä¾¿çš„è®¾ç½® linux-headers è·¯å¾„ã€‚</p>

<pre class="language-lua"><code class="language-lua">target(&quot;hello&quot;, function()
    add_rules(&quot;platform.linux.module&quot;)
    add_files(&quot;src/*.c&quot;)
    set_values(&quot;linux.driver.linux-headers&quot;, &quot;/usr/src/linux-headers-5.11.0-41-generic&quot;)
end)
</code></pre>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡å®šä¹‰ option é€‰é¡¹ï¼Œå°† linux-headers è·¯å¾„ä½œä¸º <code>xmake f --linux-headers=/usr/src/linux-headers</code> çš„æ–¹å¼ä¼ å…¥ã€‚</p>

<pre class="language-lua"><code class="language-lua">option(&quot;linux-headers&quot;, {showmenu = true, description = &quot;Set linux-headers path.&quot;})
target(&quot;hello&quot;, function()
    add_rules(&quot;platform.linux.module&quot;)
    add_files(&quot;src/*.c&quot;)
    set_values(&quot;linux.driver.linux-headers&quot;, &quot;$(linux-headers)&quot;)
end)
</code></pre>
<p>æ›´å¤šè¯¦æƒ…è§ï¼š<a href="https://github.com/xmake-io/xmake/issues/1923"  target="_blank">#1923</a></p>
<h3 id="%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91">äº¤å‰ç¼–è¯‘</h3>
<p>æˆ‘ä»¬ä¹Ÿæ”¯æŒå†…æ ¸é©±åŠ¨æ¨¡å—çš„äº¤å‰ç¼–è¯‘ï¼Œæ¯”å¦‚åœ¨ Linux x86_64 ä¸Šä½¿ç”¨äº¤å‰ç¼–è¯‘å·¥å…·é“¾æ¥æ„å»º Linux Arm/Arm64 çš„é©±åŠ¨æ¨¡å—ã€‚</p>
<p>æˆ‘ä»¬åªéœ€è¦å‡†å¤‡å¥½è‡ªå·±çš„äº¤å‰ç¼–è¯‘å·¥å…·é“¾ï¼Œé€šè¿‡ <code>--sdk=</code> æŒ‡å®šå®ƒçš„æ ¹ç›®å½•ï¼Œç„¶åé…ç½®åˆ‡æ¢åˆ° <code>-p cross</code> å¹³å°ï¼Œ æœ€åæŒ‡å®šéœ€è¦æ„å»ºçš„æ¶æ„ arm/arm64 å³å¯ã€‚</p>
<p>è¿™é‡Œç”¨åˆ°çš„äº¤å‰å·¥å…·é“¾ï¼Œå¯ä»¥ä»è¿™é‡Œä¸‹è½½: <a href="https://releases.linaro.org/components/toolchain/binaries/latest-7/aarch64-linux-gnu/"  target="_blank">Download toolchains</a></p>
<p>æ›´å¤šï¼Œäº¤å‰ç¼–è¯‘é…ç½®æ–‡æ¡£ï¼Œè§ï¼š<a href="/zh-cn/guide/configuration?id=common-cross-compilation-configuration"  >é…ç½®äº¤å‰ç¼–è¯‘</a></p>
<blockquote>
<p>ç›®å‰ä»…ä»…æ”¯æŒ arm/arm64 äº¤å‰ç¼–è¯‘æ¶æ„ï¼Œåç»­ä¼šæ”¯æŒæ›´å¤šçš„å¹³å°æ¶æ„ã€‚</p>
</blockquote>
<h4 id="%E6%9E%84%E5%BB%BA-Arm-%E9%A9%B1%E5%8A%A8%E6%A8%A1%E5%9D%97">æ„å»º Arm é©±åŠ¨æ¨¡å—</h4>

<pre class="language-bash"><code class="language-bash">$ xmake f -p cross -a arm --sdk=/mnt/gcc-linaro-7.5.0-2019.12-x86_64_arm-linux-gnueabihf -c
$ xmake -v
checking for arm-linux-gnueabihf-g++ ... /mnt/gcc-linaro-7.5.0-2019.12-x86_64_arm-linux-gnueabihf/bin/arm-linux-gnueabihf-g++
checking for the linker (ld) ... arm-linux-gnueabihf-g++
checking for /mnt/gcc-linaro-7.5.0-2019.12-x86_64_arm-linux-gnueabihf/bin/arm-linux-gnueabihf-g++ ... ok
checking for flags (-fPIC) ... ok
checking for /mnt/gcc-linaro-7.5.0-2019.12-x86_64_arm-linux-gnueabihf/bin/arm-linux-gnueabihf-gcc ... ok
checking for flags (-fPIC) ... ok
checking for flags (-O2) ... ok
checking for ccache ... /usr/bin/ccache
[ 20%]: cache compiling.release src/add.c
/usr/bin/ccache /mnt/gcc-linaro-7.5.0-2019.12-x86_64_arm-linux-gnueabihf/bin/arm-linux-gnueabihf-gcc -c -O2 -std=gnu89 -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/7695a30b7add4d3aa4685cbac6815805/arch/arm/include -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/7695a30b7add4d3aa4685cbac6815805/arch/arm/include/generated -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/7695a30b7add4d3aa4685cbac6815805/include -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/7695a30b7add4d3aa4685cbac6815805/arch/arm/include/uapi -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/7695a30b7add4d3aa4685cbac6815805/arch/arm/include/generated/uapi -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/7695a30b7add4d3aa4685cbac6815805/include/uapi -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/7695a30b7add4d3aa4685cbac6815805/include/generated/uapi -D__KERNEL__ -DMODULE -DKBUILD_MODNAME=\&quot;hello\&quot; -D__LINUX_ARM_ARCH__=6 -isystem /mnt/gcc-linaro-7.5.0-2019.12-x86_64_arm-linux-gnueabihf/bin/../lib/gcc/arm-linux-gnueabihf/7.5.0/include -include /home/ruki/.xmake/packages/l/linux-headers/5.10.46/7695a30b7add4d3aa4685cbac6815805/include/linux/kconfig.h -include /home/ruki/.xmake/packages/l/linux-headers/5.10.46/7695a30b7add4d3aa4685cbac6815805/include/linux/compiler_types.h -nostdinc -fno-strict-aliasing -fno-common -fshort-wchar -fno-PIE -falign-jumps=1 -falign-loops=1 -fno-asynchronous-unwind-tables -fno-jump-tables -fno-delete-null-pointer-checks -fno-reorder-blocks -fno-ipa-cp-clone -fno-partial-inlining -fstack-protector-strong -fno-inline-functions-called-once -falign-functions=32 -fno-strict-overflow -fno-stack-check -fconserve-stack -mbig-endian -mabi=aapcs-linux -mfpu=vfp -marm -march=armv6k -mtune=arm1136j-s -msoft-float -Uarm -DKBUILD_BASENAME=\&quot;add\&quot; -o build/.objs/hello/cross/arm/release/src/add.c.o src/add.c
[ 20%]: cache compiling.release src/hello.c
/usr/bin/ccache /mnt/gcc-linaro-7.5.0-2019.12-x86_64_arm-linux-gnueabihf/bin/arm-linux-gnueabihf-gcc -c -O2 -std=gnu89 -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/7695a30b7add4d3aa4685cbac6815805/arch/arm/include -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/7695a30b7add4d3aa4685cbac6815805/arch/arm/include/generated -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/7695a30b7add4d3aa4685cbac6815805/include -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/7695a30b7add4d3aa4685cbac6815805/arch/arm/include/uapi -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/7695a30b7add4d3aa4685cbac6815805/arch/arm/include/generated/uapi -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/7695a30b7add4d3aa4685cbac6815805/include/uapi -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/7695a30b7add4d3aa4685cbac6815805/include/generated/uapi -D__KERNEL__ -DMODULE -DKBUILD_MODNAME=\&quot;hello\&quot; -D__LINUX_ARM_ARCH__=6 -isystem /mnt/gcc-linaro-7.5.0-2019.12-x86_64_arm-linux-gnueabihf/bin/../lib/gcc/arm-linux-gnueabihf/7.5.0/include -include /home/ruki/.xmake/packages/l/linux-headers/5.10.46/7695a30b7add4d3aa4685cbac6815805/include/linux/kconfig.h -include /home/ruki/.xmake/packages/l/linux-headers/5.10.46/7695a30b7add4d3aa4685cbac6815805/include/linux/compiler_types.h -nostdinc -fno-strict-aliasing -fno-common -fshort-wchar -fno-PIE -falign-jumps=1 -falign-loops=1 -fno-asynchronous-unwind-tables -fno-jump-tables -fno-delete-null-pointer-checks -fno-reorder-blocks -fno-ipa-cp-clone -fno-partial-inlining -fstack-protector-strong -fno-inline-functions-called-once -falign-functions=32 -fno-strict-overflow -fno-stack-check -fconserve-stack -mbig-endian -mabi=aapcs-linux -mfpu=vfp -marm -march=armv6k -mtune=arm1136j-s -msoft-float -Uarm -DKBUILD_BASENAME=\&quot;hello\&quot; -o build/.objs/hello/cross/arm/release/src/hello.c.o src/hello.c
checking for flags (-MMD -MF) ... ok
checking for flags (-fdiagnostics-color=always) ... ok
[ 60%]: linking.release build/cross/arm/release/hello.ko
/mnt/gcc-linaro-7.5.0-2019.12-x86_64_arm-linux-gnueabihf/bin/arm-linux-gnueabihf-ld -EB -r -o build/.objs/hello/cross/arm/release/build/cross/arm/release/hello.ko.o build/.objs/hello/cross/arm/release/src/add.c.o build/.objs/hello/cross/arm/release/src/hello.c.o
/home/ruki/.xmake/packages/l/linux-headers/5.10.46/7695a30b7add4d3aa4685cbac6815805/scripts/mod/modpost -m -a -o build/.objs/hello/cross/arm/release/build/cross/arm/release/Module.symvers -e -N -T -
WARNING: modpost: Symbol info of vmlinux is missing. Unresolved symbol check will be entirely skipped.
/usr/bin/ccache /mnt/gcc-linaro-7.5.0-2019.12-x86_64_arm-linux-gnueabihf/bin/arm-linux-gnueabihf-gcc -c -O2 -std=gnu89 -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/7695a30b7add4d3aa4685cbac6815805/arch/arm/include -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/7695a30b7add4d3aa4685cbac6815805/arch/arm/include/generated -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/7695a30b7add4d3aa4685cbac6815805/include -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/7695a30b7add4d3aa4685cbac6815805/arch/arm/include/uapi -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/7695a30b7add4d3aa4685cbac6815805/arch/arm/include/generated/uapi -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/7695a30b7add4d3aa4685cbac6815805/include/uapi -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/7695a30b7add4d3aa4685cbac6815805/include/generated/uapi -D__KERNEL__ -DMODULE -DKBUILD_MODNAME=\&quot;hello\&quot; -D__LINUX_ARM_ARCH__=6 -isystem /mnt/gcc-linaro-7.5.0-2019.12-x86_64_arm-linux-gnueabihf/bin/../lib/gcc/arm-linux-gnueabihf/7.5.0/include -include /home/ruki/.xmake/packages/l/linux-headers/5.10.46/7695a30b7add4d3aa4685cbac6815805/include/linux/kconfig.h -include /home/ruki/.xmake/packages/l/linux-headers/5.10.46/7695a30b7add4d3aa4685cbac6815805/include/linux/compiler_types.h -nostdinc -fno-strict-aliasing -fno-common -fshort-wchar -fno-PIE -falign-jumps=1 -falign-loops=1 -fno-asynchronous-unwind-tables -fno-jump-tables -fno-delete-null-pointer-checks -fno-reorder-blocks -fno-ipa-cp-clone -fno-partial-inlining -fstack-protector-strong -fno-inline-functions-called-once -falign-functions=32 -fno-strict-overflow -fno-stack-check -fconserve-stack -mbig-endian -mabi=aapcs-linux -mfpu=vfp -marm -march=armv6k -mtune=arm1136j-s -msoft-float -Uarm -o build/.objs/hello/cross/arm/release/build/cross/arm/release/hello.ko.mod.o build/.objs/hello/cross/arm/release/build/cross/arm/release/hello.ko.mod.c
/mnt/gcc-linaro-7.5.0-2019.12-x86_64_arm-linux-gnueabihf/bin/arm-linux-gnueabihf-ld -EB --be8 -r --build-id=sha1 -T /home/ruki/.xmake/packages/l/linux-headers/5.10.46/7695a30b7add4d3aa4685cbac6815805/scripts/module.lds -o build/cross/arm/release/hello.ko build/.objs/hello/cross/arm/release/build/cross/arm/release/hello.ko.o build/.objs/hello/cross/arm/release/build/cross/arm/release/hello.ko.mod.o
[100%]: build ok!

</code></pre>
<h4 id="%E6%9E%84%E5%BB%BA-Arm64-%E9%A9%B1%E5%8A%A8%E6%A8%A1%E5%9D%97">æ„å»º Arm64 é©±åŠ¨æ¨¡å—</h4>

<pre class="language-bash"><code class="language-bash">$ xmake f -p cross -a arm64 --sdk=/mnt/gcc-linaro-7.5.0-2019.12-x86_64_aarch64-linux-gnu -c
checking for aarch64-linux-gnu-g++ ... /mnt/gcc-linaro-7.5.0-2019.12-x86_64_aarch64-linux-gnu/bin/aarch64-linux-gnu-g++
checking for the linker (ld) ... aarch64-linux-gnu-g++
checking for /mnt/gcc-linaro-7.5.0-2019.12-x86_64_aarch64-linux-gnu/bin/aarch64-linux-gnu-g++ ... ok
checking for flags (-fPIC) ... ok
checking for /mnt/gcc-linaro-7.5.0-2019.12-x86_64_aarch64-linux-gnu/bin/aarch64-linux-gnu-gcc ... ok
checking for flags (-fPIC) ... ok
checking for flags (-O2) ... ok
checking for ccache ... /usr/bin/ccache
[ 20%]: cache compiling.release src/add.c
/usr/bin/ccache /mnt/gcc-linaro-7.5.0-2019.12-x86_64_aarch64-linux-gnu/bin/aarch64-linux-gnu-gcc -c -O2 -std=gnu89 -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/8f80101835834bc2866f3a827836b5de/arch/arm64/include -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/8f80101835834bc2866f3a827836b5de/arch/arm64/include/generated -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/8f80101835834bc2866f3a827836b5de/include -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/8f80101835834bc2866f3a827836b5de/arch/arm64/include/uapi -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/8f80101835834bc2866f3a827836b5de/arch/arm64/include/generated/uapi -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/8f80101835834bc2866f3a827836b5de/include/uapi -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/8f80101835834bc2866f3a827836b5de/include/generated/uapi -D__KERNEL__ -DMODULE -DKBUILD_MODNAME=\&quot;hello\&quot; -isystem /mnt/gcc-linaro-7.5.0-2019.12-x86_64_aarch64-linux-gnu/bin/../lib/gcc/aarch64-linux-gnu/7.5.0/include -include /home/ruki/.xmake/packages/l/linux-headers/5.10.46/8f80101835834bc2866f3a827836b5de/include/linux/kconfig.h -include /home/ruki/.xmake/packages/l/linux-headers/5.10.46/8f80101835834bc2866f3a827836b5de/include/linux/compiler_types.h -nostdinc -fno-strict-aliasing -fno-common -fshort-wchar -fno-PIE -falign-jumps=1 -falign-loops=1 -fno-asynchronous-unwind-tables -fno-jump-tables -fno-delete-null-pointer-checks -fno-reorder-blocks -fno-ipa-cp-clone -fno-partial-inlining -fstack-protector-strong -fno-inline-functions-called-once -falign-functions=32 -fno-strict-overflow -fno-stack-check -fconserve-stack -DKBUILD_BASENAME=\&quot;add\&quot; -o build/.objs/hello/cross/arm64/release/src/add.c.o src/add.c
[ 20%]: cache compiling.release src/hello.c
/usr/bin/ccache /mnt/gcc-linaro-7.5.0-2019.12-x86_64_aarch64-linux-gnu/bin/aarch64-linux-gnu-gcc -c -O2 -std=gnu89 -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/8f80101835834bc2866f3a827836b5de/arch/arm64/include -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/8f80101835834bc2866f3a827836b5de/arch/arm64/include/generated -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/8f80101835834bc2866f3a827836b5de/include -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/8f80101835834bc2866f3a827836b5de/arch/arm64/include/uapi -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/8f80101835834bc2866f3a827836b5de/arch/arm64/include/generated/uapi -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/8f80101835834bc2866f3a827836b5de/include/uapi -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/8f80101835834bc2866f3a827836b5de/include/generated/uapi -D__KERNEL__ -DMODULE -DKBUILD_MODNAME=\&quot;hello\&quot; -isystem /mnt/gcc-linaro-7.5.0-2019.12-x86_64_aarch64-linux-gnu/bin/../lib/gcc/aarch64-linux-gnu/7.5.0/include -include /home/ruki/.xmake/packages/l/linux-headers/5.10.46/8f80101835834bc2866f3a827836b5de/include/linux/kconfig.h -include /home/ruki/.xmake/packages/l/linux-headers/5.10.46/8f80101835834bc2866f3a827836b5de/include/linux/compiler_types.h -nostdinc -fno-strict-aliasing -fno-common -fshort-wchar -fno-PIE -falign-jumps=1 -falign-loops=1 -fno-asynchronous-unwind-tables -fno-jump-tables -fno-delete-null-pointer-checks -fno-reorder-blocks -fno-ipa-cp-clone -fno-partial-inlining -fstack-protector-strong -fno-inline-functions-called-once -falign-functions=32 -fno-strict-overflow -fno-stack-check -fconserve-stack -DKBUILD_BASENAME=\&quot;hello\&quot; -o build/.objs/hello/cross/arm64/release/src/hello.c.o src/hello.c
checking for flags (-MMD -MF) ... ok
checking for flags (-fdiagnostics-color=always) ... ok
[ 60%]: linking.release build/cross/arm64/release/hello.ko
/mnt/gcc-linaro-7.5.0-2019.12-x86_64_aarch64-linux-gnu/bin/aarch64-linux-gnu-ld -EL -maarch64elf -r -o build/.objs/hello/cross/arm64/release/build/cross/arm64/release/hello.ko.o build/.objs/hello/cross/arm64/release/src/add.c.o build/.objs/hello/cross/arm64/release/src/hello.c.o
/home/ruki/.xmake/packages/l/linux-headers/5.10.46/8f80101835834bc2866f3a827836b5de/scripts/mod/modpost -m -a -o build/.objs/hello/cross/arm64/release/build/cross/arm64/release/Module.symvers -e -N -T -
WARNING: modpost: Symbol info of vmlinux is missing. Unresolved symbol check will be entirely skipped.
/usr/bin/ccache /mnt/gcc-linaro-7.5.0-2019.12-x86_64_aarch64-linux-gnu/bin/aarch64-linux-gnu-gcc -c -O2 -std=gnu89 -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/8f80101835834bc2866f3a827836b5de/arch/arm64/include -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/8f80101835834bc2866f3a827836b5de/arch/arm64/include/generated -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/8f80101835834bc2866f3a827836b5de/include -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/8f80101835834bc2866f3a827836b5de/arch/arm64/include/uapi -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/8f80101835834bc2866f3a827836b5de/arch/arm64/include/generated/uapi -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/8f80101835834bc2866f3a827836b5de/include/uapi -I/home/ruki/.xmake/packages/l/linux-headers/5.10.46/8f80101835834bc2866f3a827836b5de/include/generated/uapi -D__KERNEL__ -DMODULE -DKBUILD_MODNAME=\&quot;hello\&quot; -isystem /mnt/gcc-linaro-7.5.0-2019.12-x86_64_aarch64-linux-gnu/bin/../lib/gcc/aarch64-linux-gnu/7.5.0/include -include /home/ruki/.xmake/packages/l/linux-headers/5.10.46/8f80101835834bc2866f3a827836b5de/include/linux/kconfig.h -include /home/ruki/.xmake/packages/l/linux-headers/5.10.46/8f80101835834bc2866f3a827836b5de/include/linux/compiler_types.h -nostdinc -fno-strict-aliasing -fno-common -fshort-wchar -fno-PIE -falign-jumps=1 -falign-loops=1 -fno-asynchronous-unwind-tables -fno-jump-tables -fno-delete-null-pointer-checks -fno-reorder-blocks -fno-ipa-cp-clone -fno-partial-inlining -fstack-protector-strong -fno-inline-functions-called-once -falign-functions=32 -fno-strict-overflow -fno-stack-check -fconserve-stack -o build/.objs/hello/cross/arm64/release/build/cross/arm64/release/hello.ko.mod.o build/.objs/hello/cross/arm64/release/build/cross/arm64/release/hello.ko.mod.c
/mnt/gcc-linaro-7.5.0-2019.12-x86_64_aarch64-linux-gnu/bin/aarch64-linux-gnu-ld -EL -maarch64elf -r --build-id=sha1 -T /home/ruki/.xmake/packages/l/linux-headers/5.10.46/8f80101835834bc2866f3a827836b5de/scripts/module.lds -o build/cross/arm64/release/hello.ko build/.objs/hello/cross/arm64/release/build/cross/arm64/release/hello.ko.o build/.objs/hello/cross/arm64/release/build/cross/arm64/release/hello.ko.mod.o
[100%]: build ok!
</code></pre>
<h2 id="ASN.1-%E7%A8%8B%E5%BA%8F">ASN.1 ç¨‹åº</h2>
<p>ASN.1 ç¨‹åºï¼Œéœ€è¦å€ŸåŠ© <a href="https://github.com/vlm/asn1c"  target="_blank">ASN.1 Compiler</a> å»ç”Ÿæˆç›¸å…³çš„ .c æ–‡ä»¶å‚ä¸é¡¹ç›®ç¼–è¯‘ã€‚</p>
<p>è€Œ Xmake å†…ç½®æä¾›äº† <code>add_rules(&quot;asn1c&quot;)</code> è§„åˆ™å»å¤„ç† <code>.c</code> æ–‡ä»¶ç”Ÿæˆï¼Œ<code>add_requires(&quot;asn1c&quot;)</code> è‡ªåŠ¨æ‹‰å–é›†æˆ ASN.1 ç¼–è¯‘å™¨å·¥å…·ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªåŸºç¡€çš„é…ç½®ä¾‹å­ï¼š</p>

<pre class="language-lua"><code class="language-lua">add_rules(&quot;mode.debug&quot;, &quot;mode.release&quot;)
add_requires(&quot;asn1c&quot;)

target(&quot;test&quot;, function()
    set_kind(&quot;binary&quot;)
    add_files(&quot;src/*.c&quot;)
    add_files(&quot;src/*.asn1&quot;)
    add_rules(&quot;asn1c&quot;)
    add_packages(&quot;asn1c&quot;)
end)
</code></pre>
<p>å…·ä½“è§ <a href="https://github.com/xmake-io/xmake/tree/master/tests/projects/c/asn1c"  target="_blank">å®Œæ•´ä¾‹å­å·¥ç¨‹</a>ã€‚</p>
<h2 id="Verilog-%E4%BB%BF%E7%9C%9F%E7%A8%8B%E5%BA%8F">Verilog ä»¿çœŸç¨‹åº</h2>
<h3 id="iVerilog-%E4%BB%BF%E7%9C%9F%E5%99%A8">iVerilog ä»¿çœŸå™¨</h3>
<p>é€šè¿‡ <code>add_requires(&quot;iverilog&quot;)</code> é…ç½®ï¼Œæˆ‘ä»¬èƒ½å¤Ÿè‡ªåŠ¨æ‹‰å– iverilog å·¥å…·é“¾åŒ…ï¼Œç„¶åä½¿ç”¨ <code>set_toolchains(&quot;@iverilog&quot;)</code> è‡ªåŠ¨ç»‘å®šå·¥å…·é“¾æ¥ç¼–è¯‘å·¥ç¨‹ã€‚</p>

<pre class="language-lua"><code class="language-lua">add_requires(&quot;iverilog&quot;)
target(&quot;hello&quot;, function()
    add_rules(&quot;iverilog.binary&quot;)
    set_toolchains(&quot;@iverilog&quot;)
    add_files(&quot;src/*.v&quot;)
end)
</code></pre>
<h4 id="%E8%AE%BE%E7%BD%AE%E6%8A%BD%E8%B1%A1%E9%85%8D%E7%BD%AE">è®¾ç½®æŠ½è±¡é…ç½®</h4>

<pre class="language-lua"><code class="language-lua">add_requires(&quot;iverilog&quot;)
target(&quot;hello&quot;, function()
    add_rules(&quot;iverilog.binary&quot;)
    set_toolchains(&quot;@iverilog&quot;)
    add_files(&quot;src/*.v&quot;)
    add_defines(&quot;TEST&quot;)
    add_includedirs(&quot;inc&quot;)
    set_languages(&quot;v1800-2009&quot;)
end)
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>set_languages(&quot;v1800-2009&quot;)</code> æ¥è®¾ç½®åˆ‡æ¢ Verilog çš„è¯­è¨€æ ‡å‡†ã€‚</p>
<p>ç›®å‰æ”¯æŒçš„ä¸€äº›å–å€¼å’Œæ˜ å°„å…³ç³»å¦‚ä¸‹ï¼š</p>

<pre class="language-lua"><code class="language-lua">[&quot;v1364-1995&quot;] = &quot;-g1995&quot;
[&quot;v1364-2001&quot;] = &quot;-g2001&quot;
[&quot;v1364-2005&quot;] = &quot;-g2005&quot;
[&quot;v1800-2005&quot;] = &quot;-g2005-sv&quot;
[&quot;v1800-2009&quot;] = &quot;-g2009&quot;
[&quot;v1800-2012&quot;] = &quot;-g2012&quot;
</code></pre>
<h4 id="%E8%AE%BE%E7%BD%AE%E8%87%AA%E5%AE%9A%E4%B9%89-flags">è®¾ç½®è‡ªå®šä¹‰ flags</h4>

<pre class="language-lua"><code class="language-lua">add_requires(&quot;iverilog&quot;)
target(&quot;hello&quot;, function()
    add_rules(&quot;iverilog.binary&quot;)
    set_toolchains(&quot;@iverilog&quot;)
    add_files(&quot;src/*.v&quot;)
    add_values(&quot;iverilogs.flags&quot;, &quot;-DTEST&quot;)
end)
</code></pre>
<h4 id="%E6%9E%84%E5%BB%BA%E5%B7%A5%E7%A8%8B">æ„å»ºå·¥ç¨‹</h4>

<pre class="language-bash"><code class="language-bash">$ xmake
checking for iverilog ... iverilog
checking for vvp ... vvp
[ 50%]: linking.iverilog hello.vvp
[100%]: build ok!
</code></pre>
<h4 id="%E8%BF%90%E8%A1%8C%E7%A8%8B%E5%BA%8F">è¿è¡Œç¨‹åº</h4>

<pre class="language-bash"><code class="language-bash">$ xmake run
hello world!
LXT2 info: dumpfile hello.vcd opened for output.
src/main.v:6: $finish called at 0 (1s)
</code></pre>
<p>æ›´å¤šå®Œæ•´ä¾‹å­ï¼š<a href="https://github.com/xmake-io/xmake/tree/master/tests/projects/embed/iverilog"  target="_blank">iVerilog Examples</a></p>
<h3 id="Verilator-%E4%BB%BF%E7%9C%9F%E5%99%A8">Verilator ä»¿çœŸå™¨</h3>
<p>é€šè¿‡ <code>add_requires(&quot;verilator&quot;)</code> é…ç½®ï¼Œæˆ‘ä»¬èƒ½å¤Ÿè‡ªåŠ¨æ‹‰å– verilator å·¥å…·é“¾åŒ…ï¼Œç„¶åä½¿ç”¨ <code>set_toolchains(&quot;@verilator&quot;)</code> è‡ªåŠ¨ç»‘å®šåˆ°å·¥å…·é“¾æ¥ç¼–è¯‘å·¥ç¨‹ã€‚</p>

<pre class="language-lua"><code class="language-lua">add_requires(&quot;verilator&quot;)
target(&quot;hello&quot;, function()
    add_rules(&quot;verilator.binary&quot;)
    set_toolchains(&quot;@verilator&quot;)
    add_files(&quot;src/*.v&quot;)
    add_files(&quot;src/*.cpp&quot;)
end)
</code></pre>
<p>verilator å·¥ç¨‹ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªé¢å¤–çš„ <code>sim_main.cpp</code> æ–‡ä»¶å‚ä¸ç¼–è¯‘ï¼Œä½œä¸ºç¨‹åºçš„å…¥å£ä»£ç ã€‚</p>

<pre class="language-none"><code class="language-none">#include &quot;hello.h&quot;
#include &quot;verilated.h&quot;

int main(int argc, char** argv) {
    VerilatedContext* contextp = new VerilatedContext;
    contextp-&gt;commandArgs(argc, argv);
    hello* top = new hello{contextp};
    while (!contextp-&gt;gotFinish()) { top-&gt;eval(); }
    delete top;
    delete contextp;
    return 0;
}
</code></pre>
<h4 id="%E8%AE%BE%E7%BD%AE%E6%8A%BD%E8%B1%A1%E9%85%8D%E7%BD%AE">è®¾ç½®æŠ½è±¡é…ç½®</h4>

<pre class="language-lua"><code class="language-lua">add_requires(&quot;verilator&quot;)
target(&quot;hello&quot;, function()
    add_rules(&quot;verilator.binary&quot;)
    set_toolchains(&quot;@verilator&quot;)
    add_files(&quot;src/*.v&quot;)
    add_defines(&quot;TEST&quot;)
    add_includedirs(&quot;inc&quot;)
    set_languages(&quot;v1800-2009&quot;)
end)
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>set_languages(&quot;v1800-2009&quot;)</code> æ¥è®¾ç½®åˆ‡æ¢ Verilog çš„è¯­è¨€æ ‡å‡†ã€‚</p>
<p>ç›®å‰æ”¯æŒçš„ä¸€äº›å–å€¼å’Œæ˜ å°„å…³ç³»å¦‚ä¸‹ï¼š</p>

<pre class="language-lua"><code class="language-lua">-- Verilog
[&quot;v1364-1995&quot;] = &quot;+1364-1995ext+v&quot;,
[&quot;v1364-2001&quot;] = &quot;+1364-2001ext+v&quot;,
[&quot;v1364-2005&quot;] = &quot;+1364-2005ext+v&quot;,
-- SystemVerilog
[&quot;v1800-2005&quot;] = &quot;+1800-2005ext+v&quot;,
[&quot;v1800-2009&quot;] = &quot;+1800-2009ext+v&quot;,
[&quot;v1800-2012&quot;] = &quot;+1800-2012ext+v&quot;,
[&quot;v1800-2017&quot;] = &quot;+1800-2017ext+v&quot;,
</code></pre>
<h4 id="%E8%AE%BE%E7%BD%AE%E8%87%AA%E5%AE%9A%E4%B9%89-flags">è®¾ç½®è‡ªå®šä¹‰ flags</h4>

<pre class="language-lua"><code class="language-lua">add_requires(&quot;verilator&quot;)
target(&quot;hello&quot;, function()
    add_rules(&quot;verilator.binary&quot;)
    set_toolchains(&quot;@verilator&quot;)
    add_files(&quot;src/*.v&quot;)
    add_files(&quot;src/*.cpp&quot;)
    add_values(&quot;verilator.flags&quot;, &quot;--trace&quot;, &quot;--timing&quot;)
end)
</code></pre>
<h4 id="%E6%9E%84%E5%BB%BA%E5%B7%A5%E7%A8%8B">æ„å»ºå·¥ç¨‹</h4>

<pre class="language-bash"><code class="language-bash">$ xmake
[  0%]: compiling.verilog src/main.v
[ 15%]: cache compiling.release /Users/ruki/.xmake/packages/v/verilator/2023.1.10/cd2268409c1d44799288c7759b3cbd56/share/verilator/include/verilated.cpp
[ 15%]: cache compiling.release build/.gens/hello/macosx/x86_64/release/rules/verilator/hello___024root__Slow.cpp
[ 15%]: cache compiling.release build/.gens/hello/macosx/x86_64/release/rules/verilator/hello___024root__DepSet_h9053a130__0__Slow.cpp
[ 15%]: cache compiling.release build/.gens/hello/macosx/x86_64/release/rules/verilator/hello.cpp
[ 15%]: cache compiling.release /Users/ruki/.xmake/packages/v/verilator/2023.1.10/cd2268409c1d44799288c7759b3cbd56/share/verilator/include/verilated_threads.cpp
[ 15%]: cache compiling.release build/.gens/hello/macosx/x86_64/release/rules/verilator/hello__Syms.cpp
[ 15%]: cache compiling.release build/.gens/hello/macosx/x86_64/release/rules/verilator/hello___024root__DepSet_h07139e86__0.cpp
[ 15%]: cache compiling.release src/sim_main.cpp
[ 15%]: cache compiling.release build/.gens/hello/macosx/x86_64/release/rules/verilator/hello___024root__DepSet_h9053a130__0.cpp
[ 84%]: linking.release hello
[100%]: build ok!
</code></pre>
<h4 id="%E8%BF%90%E8%A1%8C%E7%A8%8B%E5%BA%8F">è¿è¡Œç¨‹åº</h4>

<pre class="language-bash"><code class="language-bash">$ xmake run
ruki-2:hello ruki$ xmake run
hello world!
- src/main.v:4: Verilog $finish
</code></pre>
<p>æ›´å¤šå®Œæ•´ä¾‹å­ï¼š<a href="https://github.com/xmake-io/xmake/tree/master/tests/projects/embed/verilator"  target="_blank">Verilator</a></p>
<h4 id="%E7%BC%96%E8%AF%91%E9%9D%99%E6%80%81%E5%BA%93">ç¼–è¯‘é™æ€åº“</h4>
<p>æˆ‘ä»¬ä¹Ÿæä¾›äº† <code>verilator.static</code> è§„åˆ™æ¥ç¼–è¯‘ç”Ÿæˆ verilator é™æ€åº“ã€‚</p>

<pre class="language-lua"><code class="language-lua">add_requires(&quot;verilator&quot;)
target(&quot;hello&quot;, function()
    add_rules(&quot;verilator.static&quot;)
    set_toolchains(&quot;@verilator&quot;)
    add_files(&quot;src/*.v&quot;)
end)

target(&quot;test&quot;, function()
    add_deps(&quot;hello&quot;)
    add_files(&quot;src/*.cpp&quot;)
end)
</code></pre>
<h2 id="Cppfront-%E7%A8%8B%E5%BA%8F">Cppfront ç¨‹åº</h2>

<pre class="language-lua"><code class="language-lua">add_rules(&quot;mode.debug&quot;, &quot;mode.release&quot;)

add_requires(&quot;cppfront&quot;)

target(&quot;test&quot;, function()
    add_rules(&quot;cppfront&quot;)
    set_kind(&quot;binary&quot;)
    add_files(&quot;src/*.cpp2&quot;)
    add_packages(&quot;cppfront&quot;)
end)
</code></pre>
<h2 id="Cosmocc-%E7%A8%8B%E5%BA%8F">Cosmocc ç¨‹åº</h2>

<pre class="language-lua"><code class="language-lua">add_rules(&quot;mode.debug&quot;, &quot;mode.release&quot;)

add_requires(&quot;cosmocc&quot;)

target(&quot;test&quot;, function()
    set_kind(&quot;binary&quot;)
    add_files(&quot;src/*.c&quot;)
    set_toolchains(&quot;@cosmocc&quot;)
end)
</code></pre>

                        
                    </div>
                </div>
                <div id="previous_next">
                    <div id="previous">
                        
                        <a href="/get_started/zh/tutorial/description-scope.html">
                            <span class="icon"></span>
                            <span class="label">æè¿°åŸŸ</span>
                        </a>
                        
                    </div>
                    <div id="next">
                        
                        <a href="/get_started/zh/tutorial/configuration.html">
                            <span class="label">é…ç½®è¯´æ˜</span>
                            <span class="icon"></span>
                        </a>
                        
                    </div>
                </div>
                <div id="comments-container"></div>
            </div>
            <div id="toc_wrapper">
                <div id="toc">
                    <div id="toc_content">
                            
                    </div>
                </div>
            </div>
        </div>
    </div>
    <a id="to_top" href="#"></a>
    <div id="doc_footer">
        <div id="footer">
            <div id="footer_top">
                <ul>
<li><a>é“¾æ¥</a><ul><li><a target="_blank" href="https://teedoc.neucrack.com">ä½¿ç”¨ teedoc æ„å»º</a></li>
<li><a  href="/sitemap.xml">ç½‘ç«™åœ°å›¾</a></li>
</ul>
</li>
<li><a>æºç </a><ul><li><a target="_blank" href="https://github.com/neutree/teedoc">github</a></li>
<li><a target="_blank" href="https://gitee.com/teedoc/teedoc">gitee</a></li>
<li><a target="_blank" href="https://github.com/teedoc/teedoc.github.io">æœ¬ç½‘ç«™æºæ–‡ä»¶</a></li>
</ul>
</li>
</ul>

            </div>
            <div id="footer_bottom">
                <ul>
<li><a target="_blank" href="https://beian.miit.gov.cn">*ICPå¤‡********å·</a></li>
<li><a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=****************">*å…¬ç½‘å®‰å¤‡***********å·</a></li>
</ul>

            </div>
        </div>
    </div>
    
        <script src="/teedoc-plugin-markdown-parser/mermaid.min.js"></script>
    
        <script>mermaid.initialize({startOnLoad:true});</script>
    
        <script src="/static/js/theme_default/tocbot.min.js"></script>
    
        <script src="/static/js/theme_default/main.js"></script>
    
        <script src="/static/js/theme_default/viewer.min.js"></script>
    
        <script src="/static/css/theme_default/prism.min.js"></script>
    
        <script src="/static/js/search/search_main.js"></script>
    
        <script src="/static/js/plugin_blog/main.js"></script>
    
        <script src="/static/js/custom.js"></script>
    
</body>

</html>