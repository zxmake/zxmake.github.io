<!DOCTYPE html>

<html lang="zh-CN"  class=" language_zh  heading_no_counter ">


<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="keywords" content="">
    
    
    <meta name="description" content="">
    
    <meta name="generator" content="teedoc">
    <meta name="theme" content="teedoc-plugin-theme-default">
    
        
        <meta name="markdown-generator" content="teedoc-plugin-markdown-parser">
        
        <script>
MathJax = {"loader": {"load": ["output/svg"]}, "tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]]}, "svg": {"fontCache": "global"}};
</script>
        
        <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        
        <script src="/static/js/theme_default/pre_main.js"></script>
        
        <link rel="stylesheet" href="/static/css/theme_default/prism.min.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/theme_default/viewer.min.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/theme_default/dark.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/theme_default/light.css" type="text/css"/>
        
        <script src="/static/js/theme_default/jquery.min.js"></script>
        
        <script src="/static/js/theme_default/split.js"></script>
        
        <link rel="stylesheet" href="/static/css/search/style.css" type="text/css"/>
        
        <meta name="blog-generator" content="teedoc-plugin-blog">
        
        <link rel="stylesheet" href="/static/css/custom.css" type="text/css"/>
        
    
    
    <title>mysite</title>
    
    <script type="text/javascript">js_vars = {}</script>
    <script type="text/javascript">metadata = {"tags": [], "date": false, "update": [], "ts": 0, "author": "", "brief": "", "cover": "", "class": "heading_no_counter"}</script>
</head>


<body class="type_doc">
    
    <div id="navbar">
        <div id="navbar_menu">
            <a class="site_title" href="/">
                
                    <img class="site_logo" src="/static/image/logo-1600.png" alt="logo">
                
                
                    <h2>xmake</h2>
                
        </a>
            <a id="navbar_menu_btn"></a>
        </div>
        <div id="navbar_items">
            <div>
                <ul id="nav_left">
<li class=""><a  href="/get_started/zh/tutorial/quick-start.md">安装使用</a></li>
<li class=""><a  href="/dev/">开发文档</a></li>
</ul>

            </div>
            <div>
                <ul id="nav_right">
<li class=""><a target="_blank" href="https://github.com/neutree/teedoc">github</a></li>
<li class="sub_items "><a  >Language: 中文 简体</a><ul><li class=""><a  href="/get_started/en/tutorial/configuration.html">English</a></li>
<li class="active"><a  href="/get_started/zh/tutorial/configuration.html">中文 简体</a></li>
</ul></li>
</ul>

                <ul class="nav_plugins"><li><a id="themes" class="light"></a></li></ul><ul class="nav_plugins"><li><a id="search"><span class="icon"></span><span class="placeholder">搜索</span>
                            <div id="search_hints">
                                <span id="search_input_hint">输入关键词，多关键词空格隔开</span>
                                <span id="search_loading_hint">正在加载，请稍候。。。</span>
                                <span id="search_download_err_hint">下载文件失败，请刷新重试或检查网络</span>
                                <span id="search_other_docs_result_hint">来自其它文档的结果</span>
                                <span id="search_curr_doc_result_hint">当前文档搜索结果</span>
                            </div></a></li></ul>
            </div>
        </div>
    </div>
    
    <div id="wrapper">
        <div id="sidebar_wrapper">
            <div id="sidebar">
                <div id="sidebar_title">
                    
                </div>
                <ul class="show">
<li class="not_active no_link sidebar_category"><span class="label">新手教程</span></li>
<li class="not_active with_link"><a href="/get_started/zh/tutorial/install.html"><span class="label">安装</span><span class=""></span></a></li>
<li class="active_parent with_link"><a href="/get_started/zh/tutorial/quick-start.html"><span class="label">快速入门</span><span class="sub_indicator"></span></a><ul class="show">
<li class="not_active with_link"><a href="/get_started/zh/tutorial/syntax-description.html"><span class="label">语法描述</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/get_started/zh/tutorial/description-scope.html"><span class="label">描述域</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active with_link"><a href="/get_started/zh/tutorial/project-examples.html"><span class="label">工程例子</span><span class=""></span></a></li>
<li class="active with_link"><a href="/get_started/zh/tutorial/configuration.html"><span class="label">配置说明</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/get_started/zh/tutorial/environment-variables.html"><span class="label">环境变量</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/get_started/zh/tutorial/build-policies.html"><span class="label">构建策略</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/get_started/zh/tutorial/builtin-variables.html"><span class="label">内置变量</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/get_started/zh/tutorial/FAQ.html"><span class="label">FAQ</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">target 编译目标</span><span class="sub_indicator"></span></a><ul class="show">
<li class="not_active with_link"><a href="/get_started/zh/target/description-scope.html"><span class="label">描述域</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">option 选项</span><span class="sub_indicator"></span></a><ul class="show">
<li class="not_active with_link"><a href="/get_started/zh/option/description-scope.html"><span class="label">描述域</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">package 包管理</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/get_started/zh/package/description-scope.html"><span class="label">描述域</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/get_started/zh/package/local-package.html"><span class="label">使用本地包</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active with_link"><a href="/get_started/zh/rule/index.html"><span class="label">rule 规则</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/get_started/zh/rule/builtin-rules.html"><span class="label">内建规则</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/get_started/zh/rule/description-scope.html"><span class="label">描述域</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">toolchain 工具链</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/get_started/zh/toolchain/builtin-toolchains.html"><span class="label">内置工具链</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/get_started/zh/toolchain/custom-toolchains.html"><span class="label">自定义工具链</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/get_started/zh/toolchain/remote-toolchains.html"><span class="label">远程工具链</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active with_link"><a href="/get_started/zh/no_translate.html?ref=plugin/index.html&from=/get_started/zh/plugin/index.html"><span class="label">plugin 插件</span><span class=""></span></a></li>
</ul>

            </div>
        </div>
        <div id="article">
            <div id="menu_wrapper">
                <div id="menu">
                </div>
            </div>
            <div id="content_wrapper">
                <div id="content_body">
                    <div id="article_head">
                        <div id="article_title">
                            
                            <h1></h1>
                            
                        </div>
                        <div id="article_tags">
                            <ul>
                            
                            </ul>
                        </div>
                        <div id="article_info">
                        <div id="article_info_left">
                            <span class="article_author">
                                
                            </span>
                            
                        </div>
                        <div id="article_info_right">
                            
                            <div id="source_link">
                                <a href="https://github.com/TOMO-CAT/xmake-teedoc/docs/get_started/zh/tutorial/configuration.md" target="_blank">
                                    编辑本页
                                </a>
                            </div>
                            
                        </div>
                        </div>
                    </div>
                    <div id="article_tools">
                        <span></span>
                        <span id="toc_btn"></span>
                    </div>
                    <div id="update_history">
                        
                    </div>
                    <div id="article_content">
                        
                            <h1 id="%E9%85%8D%E7%BD%AE%E8%AF%B4%E6%98%8E">配置说明</h1>
<p>通过 <code>xmake f|config</code> 配置命令，设置构建前的相关配置信息，详细参数选项，请运行: <code>xmake f --help</code>。</p>
<blockquote>
<p><strong>Tips</strong>:<br />
你可以使用命令行缩写来简化输入，也可以使用全名，例如:</p>
<ul>
<li><code>xmake f</code> 或者 <code>xmake config</code></li>
<li><code>xmake f -p linux</code> 或者 <code>xmake config --plat=linux</code></li>
</ul>
</blockquote>
<h2 id="%E7%9B%AE%E6%A0%87%E5%B9%B3%E5%8F%B0">目标平台</h2>
<h3 id="%E4%B8%BB%E6%9C%BA%E5%B9%B3%E5%8F%B0">主机平台</h3>

<pre class="language-bash"><code class="language-bash">$ xmake
</code></pre>
<blockquote>
<p>xmake将会自动探测当前主机平台，默认自动生成对应的目标程序。</p>
</blockquote>
<h3 id="Linux">Linux</h3>

<pre class="language-bash"><code class="language-bash">$ xmake f -p linux [-a i386|x86_64]
$ xmake
</code></pre>
<h3 id="Android">Android</h3>

<pre class="language-bash"><code class="language-bash">$ xmake f -p android --ndk=~/files/android-ndk-r10e/ [-a armeabi-v7a|arm64-v8a]
$ xmake
</code></pre>
<p>如果要手动指定 ndk 中具体某个工具链，而不是使用默认检测的配置，可以通过<a href="#--bin"  >--bin</a>来设置，例如：</p>

<pre class="language-bash"><code class="language-bash">$ xmake f -p android --ndk=~/files/android-ndk-r10e/ -a arm64-v8a --bin=~/files/android-ndk-r10e/toolchains/aarch64-linux-android-4.9/prebuilt/darwin-x86_64/bin
</code></pre>
<p><a href="#--bin"  >--bin</a>主要用于设置选择编译工具的具体 bin 目录，这个的使用跟<a href="#%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91%E9%85%8D%E7%BD%AE"  >交叉编译</a>中的<a href="#--bin"  >--bin</a>的行为是一致的。</p>
<blockquote>
<p>如果手动设置了 bin 目录，没有通过检测，可以看下是否 <code>--arch=</code> 参数没有匹配对。</p>
</blockquote>
<h3 id="iPhoneOS">iPhoneOS</h3>

<pre class="language-bash"><code class="language-bash">$ xmake f -p iphoneos [-a armv7|armv7s|arm64|i386|x86_64]
$ xmake
</code></pre>
<p>由于 m1 设备上模拟器也支持 arm64 架构，因此之前单纯从 arch 去区分是否为模拟器，已无法满足需求。<br />
因此我们新增了一个参数配置去区分是否为模拟器目标。</p>

<pre class="language-bash"><code class="language-bash">$ xmake f -p iphoneos --appledev=simulator
$ xmake f -p watchos --appledev=simulator
$ xmake f -p appletvos --appledev=simulator
</code></pre>
<h3 id="Mac-Catalyst">Mac Catalyst</h3>
<p>我们也可以指定构建 Mac Catalyst 程序。</p>

<pre class="language-bash"><code class="language-bash">$ xmake f --appledev=catalyst
</code></pre>
<h3 id="Apple-WatchOS">Apple WatchOS</h3>

<pre class="language-bash"><code class="language-bash">$ xmake f -p watchos [-a i386|armv7k]
$ xmake
</code></pre>
<h3 id="Wasm-%28WebAssembly%29">Wasm (WebAssembly)</h3>
<p>此平台用于编译 WebAssembly 程序（内部会使用 emcc 工具链），在切换此平台之前，我们需要先进入 Emscripten 工具链环境，确保 emcc 等编译器可用。</p>

<pre class="language-bash"><code class="language-bash">$ xmake f -p wasm
$ xmake
</code></pre>
<p>xmake 也支持 Qt for wasm 编译，只需要：</p>

<pre class="language-bash"><code class="language-bash">$ xmake f -p wasm [--qt=~/Qt]
$ xmake
</code></pre>
<p>其中 <code>--qt</code> 参数设置是可选的，通常 xmake 都能检测到 qt 的 sdk 路径。</p>
<p>需要注意的一点是，Emscripten 和 Qt SDK 的版本是有对应关系的，不匹配的版本，可能会有 Qt/Wasm 之间的兼容问题。</p>
<p>关于版本对应关系，可以看下：<a href="https://wiki.qt.io/Qt_for_WebAssembly"  target="_blank">https://wiki.qt.io/Qt_for_WebAssembly</a></p>
<p>更多详情见：<a href="https://github.com/xmake-io/xmake/issues/956"  target="_blank">https://github.com/xmake-io/xmake/issues/956</a></p>
<p>除了 emscripten 以外，还有一个常用的 wasm 工具链 wasi-sdk，用于构建基于 wasi 的程序，我们仅仅只需要切换工具链即可。</p>

<pre class="language-bash"><code class="language-bash">$ xmake f -p wasm --toolchain=wasi
$ xmake
</code></pre>
<h3 id="HarmonyOS-%28%E9%B8%BF%E8%92%99%29">HarmonyOS (鸿蒙)</h3>
<p>xmake 也提供了鸿蒙 OS 平台的 native 工具链编译支持：</p>

<pre class="language-bash"><code class="language-bash">$ xmake f -p harmony
</code></pre>
<p>xmake 会自动探测默认的 SDK 路径，当然我们也可以指定 Harmony SDK 路径。</p>

<pre class="language-bash"><code class="language-bash">$ xmake f -p Harmony --sdk=/Users/ruki/Library/Huawei/Sdk/openharmony/10/native
</code></pre>
<h2 id="%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91%E9%85%8D%E7%BD%AE">交叉编译配置</h2>
<p>通常，如果我们需要在当前 pc 环境编译生成其他设备上才能运行的目标文件时候，就需要通过对应的交叉编译工具链来编译生成它们，比如在 macos 上编译 linux 的程序，或者在 linux 上编译其他嵌入式设备的目标文件等。</p>
<p>通常的交叉编译工具链都是基于 gcc/clang 的，大都具有类似如下的结构：</p>

<pre class="language-none"><code class="language-none">/home/toolchains_sdkdir
   - bin
       - arm-linux-armeabi-gcc
       - arm-linux-armeabi-ld
       - ...
   - lib
       - libxxx.a
   - include
       - xxx.h
</code></pre>
<p>每个工具链都有对应的 include/lib 目录，用于放置一些系统库和头文件，例如 libc, stdc++ 等，而 bin 目录下放置的就是编译工具链一系列工具。例如：</p>

<pre class="language-none"><code class="language-none">arm-linux-armeabi-ar
arm-linux-armeabi-as
arm-linux-armeabi-c++
arm-linux-armeabi-cpp
arm-linux-armeabi-g++
arm-linux-armeabi-gcc
arm-linux-armeabi-ld
arm-linux-armeabi-nm
arm-linux-armeabi-strip
</code></pre>
<p>其中 <code>arm-linux-armeabi-</code> 前缀就是 cross，通过用来标示目标平台和架构，主要用于跟主机自身的 gcc/clang 进行区分。</p>
<p>里面的 gcc/g++ 就是 c/c++ 的编译器，通常也可以作为链接器使用，链接的时候内部会去调用 ld 来链接，并且自动追加一些 c++ 库。</p>
<p>cpp 是预处理器，as 是汇编器，ar 用于生成静态库，strip 用于裁剪掉一些符号信息，使得目标程序会更加的小。nm 用于查看导出符号列表。</p>
<h3 id="%E8%87%AA%E5%8A%A8%E6%8E%A2%E6%B5%8B%E5%92%8C%E7%BC%96%E8%AF%91">自动探测和编译</h3>
<p>如果我们的交叉编译工具链是上文的结构，xmake 会自动检测识别这个 sdk 的结构，提取里面的 cross，以及 include/lib 路径位置，用户通常不需要做额外的参数设置，只需要配置好 sdk 根目录就可以编译了，例如：</p>

<pre class="language-bash"><code class="language-bash">$ xmake f -p cross --sdk=/home/toolchains_sdkdir
$ xmake
</code></pre>
<p>其中，<code>-p cross</code> 用于指定当前的平台是交叉编译平台，<code>--sdk=</code> 用于指定交叉工具链的根目录。</p>
<blockquote>
<p>注：我们也可以指定 <code>-p linux</code> 平台来配置交叉编译，效果是一样的，唯一的区别是额外标识了 linux 平台名，方便 xmake.lua 里面通过 <code>is_plat(&quot;linux&quot;)</code> 来判断平台。</p>
</blockquote>
<p>这个时候，xmake 会去自动探测 gcc 等编译器的前缀名 cross：<code>arm-linux-armeabi-</code>，并且编译的时候，也会自动加上<strong>链接库</strong>和<strong>头文件</strong>的搜索选项，例如：</p>

<pre class="language-none"><code class="language-none">-I/home/toolchains_sdkdir/include
-L/home/toolchains_sdkdir/lib
</code></pre>
<p>这些都是 xmake 自动处理的，不需要手动配置他们。</p>
<h3 id="%E6%89%8B%E5%8A%A8%E9%85%8D%E7%BD%AE%E7%BC%96%E8%AF%91">手动配置编译</h3>
<p>如果上面的自动检测对某些工具链，还无法完全通过编译，就需要用户自己手动设置一些交叉编译相关的配置参数，来调整适应这些特殊的工具链了，下面我会逐一讲解如何配置。</p>
<h3 id="%E8%AE%BE%E7%BD%AE%E5%B7%A5%E5%85%B7%E9%93%BE-bin-%E7%9B%AE%E5%BD%95">设置工具链 bin 目录</h3>
<p>对于不规则工具链目录结构，靠单纯地<a href="#--sdk"  >--sdk</a>选项设置，没法完全检测通过的情况下，可以通过这个选项继续附加设置工具链的 bin 目录位置。</p>
<p>例如：一些特殊的交叉工具链的，编译器bin目录，并不在  <code>/home/toolchains_sdkdir/bin</code>  这个位置，而是独立到了 <code>/usr/opt/bin</code>。</p>
<p>这个时候，我们可以在设置了 sdk 参数的基础上追加 bin 目录的参数设置，来调整工具链的 bin 目录。</p>

<pre class="language-bash"><code class="language-bash">$ xmake f -p cross --sdk=/home/toolchains_sdkdir --bin=/usr/opt/bin
$ xmake
</code></pre>
<h3 id="%E8%AE%BE%E7%BD%AE%E4%BA%A4%E5%8F%89%E5%B7%A5%E5%85%B7%E9%93%BE%E5%B7%A5%E5%85%B7%E5%89%8D%E7%BC%80">设置交叉工具链工具前缀</h3>
<p>像 <code>aarch64-linux-android-</code> 这种，通常如果你配置了<code>--sdk</code> 或者 <code>--bin</code> 的情况下，xmake 会去自动检测的，不需要自己手动设置。</p>
<p>但是对于一些极特殊的工具链，一个目录下同时有多个 cross 前缀的工具 bin 混在一起的情况，你需要手动设置这个配置，来区分到底需要选用哪个 bin。</p>
<p>例如，toolchains 的 bin 目录下同时存在两个不同的编译器：</p>

<pre class="language-none"><code class="language-none">/opt/bin
  - armv7-linux-gcc
  - aarch64-linux-gcc
</code></pre>
<p>我们现在想要选用 armv7 的版本，那么我们可以追加 <code>--cross=</code> 配置编译工具前缀名，例如：</p>

<pre class="language-bash"><code class="language-bash">$ xmake f -p cross --sdk=/usr/toolsdk --bin=/opt/bin --cross=armv7-linux-
</code></pre>
<h3 id="%E8%AE%BE%E7%BD%AE-c/c%2B%2B-%E7%BC%96%E8%AF%91%E5%99%A8">设置 c/c++ 编译器</h3>
<p>如果还要继续细分选择编译器，则继续追加相关编译器选项，例如：</p>

<pre class="language-bash"><code class="language-bash">$ xmake f -p cross --sdk=/user/toolsdk --cc=armv7-linux-clang --cxx=armv7-linux-clang++
</code></pre>
<p>当然，我们也可以指定编译器全路径。</p>
<p><code>--cc</code> 用于指定 c 编译器名，<code>--cxx</code> 用于指定 c++ 编译器名。</p>
<blockquote>
<p>注：如果存在 CC/CXX 环境变量的话，会优先使用当前环境变量中指定的值。</p>
</blockquote>
<p>如果指定的编译器名不是那些 xmake 内置可识别的名字（带有 gcc, clang 等字样），那么编译器工具检测就会失败。</p>
<p>这个时候我们可以通过：</p>

<pre class="language-bash"><code class="language-bash">xmake f --cxx=clang++@/home/xxx/c++mips.exe
</code></pre>
<p>设置 c++mips.exe 编译器作为类 clang++ 的使用方式来编译。</p>
<p>也就是说，在指定编译器为 <code>c++mips.exe</code> 的同时，告诉 xmake，它跟 clang++ 用法和参数选项基本相同。</p>
<h3 id="%E8%AE%BE%E7%BD%AE-c/c%2B%2B-%E9%93%BE%E6%8E%A5%E5%99%A8">设置 c/c++ 链接器</h3>
<p>如果还要继续细分选择链接器，则继续追加相关链接器选项，例如：</p>

<pre class="language-bash"><code class="language-bash">$ xmake f -p cross --sdk=/user/toolsdk --ld=armv7-linux-clang++ --sh=armv7-linux-clang++ --ar=armv7-linux-ar
</code></pre>
<p>ld 指定可执行程序链接器，sh 指定共享库程序链接器，ar 指定生成静态库的归档器。</p>
<p>注：如果存在 LD/SH/AR 环境变量的话，会优先使用当前环境变量中指定的值。</p>
<h3 id="%E8%AE%BE%E7%BD%AE%E5%A4%B4%E6%96%87%E4%BB%B6%E5%92%8C%E5%BA%93%E6%90%9C%E7%B4%A2%E7%9B%AE%E5%BD%95">设置头文件和库搜索目录</h3>
<p>如果 sdk 里面还有额外的其他 include/lib 目录不在标准的结构中，导致交叉编译找不到库和头文件，那么我们可以通过 <code>--includedirs</code> 和 <code>--linkdirs</code> 来追加搜索路径，然后通过 <code>--links</code> 添加额外的链接库。</p>

<pre class="language-bash"><code class="language-bash">$ xmake f -p cross --sdk=/usr/toolsdk --includedirs=/usr/toolsdk/xxx/include --linkdirs=/usr/toolsdk/xxx/lib --links=pthread
</code></pre>
<blockquote>
<p>注：如果要指定多个搜索目录，可以通过 <code>:</code> 或者 <code>;</code> 来分割，也就是不同主机平台的路径分隔符，linux/macos下用<code>:</code>，win下用<code>;</code>。</p>
</blockquote>
<h3 id="%E8%AE%BE%E7%BD%AE%E7%BC%96%E8%AF%91%E5%92%8C%E9%93%BE%E6%8E%A5%E9%80%89%E9%A1%B9">设置编译和链接选项</h3>
<p>我们也可以根据实际情况通过 <code>--cflags</code>, <code>--cxxflags</code>，<code>--ldflags</code>，<code>--shflags</code> 和 <code>--arflags</code> 额外配置一些编译和链接选项。</p>
<ul>
<li>cflags: 指定c编译参数</li>
<li>cxxflags：指定c++编译参数</li>
<li>cxflags: 指定c/c++编译参数</li>
<li>asflags: 指定汇编器编译参数</li>
<li>ldflags: 指定可执行程序链接参数</li>
<li>shflags: 指定动态库程序链接参数</li>
<li>arflags: 指定静态库的生成参数</li>
</ul>
<p>例如：</p>

<pre class="language-bash"><code class="language-bash">$ xmake f -p cross --sdk=/usr/toolsdk --cflags=&quot;-DTEST -I/xxx/xxx&quot; --ldflags=&quot;-lpthread&quot;
</code></pre>
<h3 id="%E9%A1%B9%E7%9B%AE%E6%8F%8F%E8%BF%B0%E8%AE%BE%E7%BD%AE">项目描述设置</h3>
<h4 id="set_toolchains">set_toolchains</h4>
<p>这对某个特定的 target 单独切换设置不同的工具链，和 set_toolset 不同的是，此接口是对完整工具链的整体切换，比如 cc/ld/sh 等一系列工具集。</p>
<p>这也是推荐做法，因为像 gcc/clang 等大部分编译工具链，编译器和链接器都是配套使用的，要切就得整体切，单独零散的切换设置会很繁琐。</p>
<p>比如我们切换 test 目标到 clang+yasm 两个工具链：</p>

<pre class="language-lua"><code class="language-lua">target(&quot;test&quot;, function()
    set_kind(&quot;binary&quot;)
    add_files(&quot;src/*.c&quot;)
    set_toolchains(&quot;clang&quot;, &quot;yasm&quot;)
end)
</code></pre>
<h4 id="set_toolset">set_toolset</h4>
<p>如果觉得每次通过命令行配置比较繁琐，有些配置可以通过在 xmake.lua 预先配置好，来简化命令配置，比如编译器的指定，就可以通过 <code>set_toolset</code> 来对每个 target 单独设置。</p>

<pre class="language-lua"><code class="language-lua">target(&quot;test&quot;, function()
    set_kind(&quot;binary&quot;)
    set_toolset(&quot;cxx&quot;, &quot;clang&quot;)
    set_toolset(&quot;ld&quot;, &quot;clang++&quot;)
end)
</code></pre>
<p>强制 test 目标的编译器和链接器使用 clang 编译器，或者指定交叉编译工具链中的编译器名或者路径。</p>
<h4 id="set_config">set_config</h4>
<p>我们也可以通过 <code>set_config</code> 来设置在 <code>xmake f/config</code> 命令中的每个配置参数的默认值，这是个全局 api，对每个 target 都会生效。</p>

<pre class="language-lua"><code class="language-lua">set_config(&quot;cflags&quot;, &quot;-DTEST&quot;)
set_config(&quot;sdk&quot;, &quot;/home/xxx/tooksdk&quot;)
set_config(&quot;cc&quot;, &quot;gcc&quot;)
set_config(&quot;ld&quot;, &quot;g++&quot;)
</code></pre>
<p>不过，我们还是可以通过 <code>xmake f --name=value</code> 的方式，去修改 xmake.lua 中的默认配置。</p>
<h3 id="%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BC%96%E8%AF%91%E5%B9%B3%E5%8F%B0">自定义编译平台</h3>
<p>如果某个交叉工具链编译后目标程序有对应的平台需要指定，并且需要在 xmake.lua 里面根据不同的交叉编译平台，还需要配置一些额外的编译参数，那么上文的 <code>-p cross</code> 设置就不能满足需求了。</p>
<p>其实，<code>-p/--plat=</code> 参数也可以设置为其他自定义的值，只需要跟 <code>is_plat</code> 保持对应关系就可以，所有非内置平台名，都会默认采用交叉编译模式，例如：</p>

<pre class="language-bash"><code class="language-bash">$ xmake f -p myplat --sdk=/usr/local/arm-xxx-gcc/
$ xmake
</code></pre>
<p>我们传入了 myplat 自定义平台名，作为当前交叉工具链的编译平台，然后 xmake.lua 里面我们对这个平台，配置下对应的设置：</p>

<pre class="language-lua"><code class="language-lua">if is_plat(&quot;myplat&quot;) then
    add_defines(&quot;TEST&quot;)
end
</code></pre>
<p>通过这种方式，xmake 就可以很方便的扩展处理各种编译平台，用户可以自己扩展支持 freebsd, netbsd, sunos 等其他各种平台的交叉编译。</p>
<p>我摘录一段之前移植 libuv 写的交叉编译的配置，直观感受下：</p>

<pre class="language-lua"><code class="language-lua">-- for dragonfly/freebsd/netbsd/openbsd platform
if is_plat(&quot;dragonfly&quot;, &quot;freebsd&quot;, &quot;netbsd&quot;, &quot;openbsd&quot;) then
    add_files(&quot;src/unix/bsd-ifaddrs.c&quot;)
    add_files(&quot;src/unix/freebsd.c&quot;)
    add_files(&quot;src/unix/kqueue.c&quot;)
    add_files(&quot;src/unix/posix-hrtime.c&quot;)
    add_headerfiles(&quot;(include/uv-bsd.h)&quot;)
end

-- for sunos platform
if is_plat(&quot;sunos&quot;) then
    add_files(&quot;src/unix/no-proctitle.c&quot;)
    add_files(&quot;src/unix/sunos.c&quot;)
    add_defines(&quot;__EXTENSIONS_&quot;, &quot;_XOPEN_SOURCE=600&quot;)
    add_headerfiles(&quot;(include/uv-sunos.h)&quot;)
end
</code></pre>
<p>然后，我们就可以切换这些平台来编译：</p>

<pre class="language-bash"><code class="language-bash">$ xmake f -p [dragonfly|freebsd|netbsd|openbsd|sunos] --sdk=/home/arm-xxx-gcc/
$ xmake
</code></pre>
<p>另外，内置的 linux 平台也是支持交叉编译的，如果不想配置其他平台名，统一作为 linux 平台来交叉编译，也是可以的。</p>

<pre class="language-bash"><code class="language-bash">$ xmake f -p linux --sdk=/usr/local/arm-xxx-gcc/
$ xmake
</code></pre>
<p>只要设置了 <code>--sdk=</code> 等参数，就会启用linux平台的交叉编译模式。</p>
<h3 id="%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E9%93%BE%E9%85%8D%E7%BD%AE">常用工具链配置</h3>
<p>完整的工具链列表，请执行下面的命令查看：</p>

<pre class="language-bash"><code class="language-bash">$ xmake show -l toolchains
</code></pre>
<p>上文讲述的是通用的交叉编译工具链配置，如果一些特定的工具链需要额外传入 <code>--ldflags/--includedirs</code> 等场景就比较繁琐了,<br />
因此 xmake 也内置了一些常用工具链，可以省去交叉编译工具链复杂的配置过程，只需要执行：</p>

<pre class="language-bash"><code class="language-bash">$ xmake f --toolchain=gnu-rm --sdk=/xxx/
$ xmake
</code></pre>
<p>就可以快速切换的指定的交叉编译工具链，如果这个工具链需要追加一些特定的 flags 设置，也会自动设置好，简化配置。</p>
<p>其中，gnu-rm 就是内置的 GNU Arm Embedded Toolchain。</p>
<p>比如，我们也可以快速从 gcc 工具链整体切换到 clang 或者 llvm 工具链，不再需要 <code>xmake f --cc=clang --cxx=clang --ld=clang++</code> 等挨个配置了。</p>

<pre class="language-bash"><code class="language-bash">$ xmake f --toolchain=clang
$ xmake
</code></pre>
<p>或者</p>

<pre class="language-bash"><code class="language-bash">$ xmake f --toolchain=llvm --sdk=/xxx/llvm
$ xmake
</code></pre>
<p>具体 xmake 持哪些工具链，可以通过下面的命令查看：</p>

<pre class="language-bash"><code class="language-bash">$ xmake show -l toolchains
xcode         Xcode IDE
vs            VisualStudio IDE
yasm          The Yasm Modular Assembler
clang         A C language family frontend for LLVM
go            Go Programming Language Compiler
dlang         D Programming Language Compiler
sdcc          Small Device C Compiler
cuda          CUDA Toolkit
ndk           Android NDK
rust          Rust Programming Language Compiler
llvm          A collection of modular and reusable compiler and toolchain technologies
cross         Common cross compilation toolchain
nasm          NASM Assembler
gcc           GNU Compiler Collection
mingw         Minimalist GNU for Windows
gnu-rm        GNU Arm Embedded Toolchain
envs          Environment variables toolchain
fasm          Flat Assembler
</code></pre>
<h4 id="%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B7%A5%E5%85%B7%E9%93%BE">自定义工具链</h4>
<p>另外，我们也可以在 xmake.lua 中自定义 toolchain，然后通过 <code>xmake f --toolchain=myclang</code> 指定切换，例如：</p>

<pre class="language-lua"><code class="language-lua">toolchain(&quot;myclang&quot;, function()
    set_kind(&quot;standalone&quot;)
    set_toolset(&quot;cc&quot;, &quot;clang&quot;)
    set_toolset(&quot;cxx&quot;, &quot;clang&quot;, &quot;clang++&quot;)
    set_toolset(&quot;ld&quot;, &quot;clang++&quot;, &quot;clang&quot;)
    set_toolset(&quot;sh&quot;, &quot;clang++&quot;, &quot;clang&quot;)
    set_toolset(&quot;ar&quot;, &quot;ar&quot;)
    set_toolset(&quot;ex&quot;, &quot;ar&quot;)
    set_toolset(&quot;strip&quot;, &quot;strip&quot;)
    set_toolset(&quot;mm&quot;, &quot;clang&quot;)
    set_toolset(&quot;mxx&quot;, &quot;clang&quot;, &quot;clang++&quot;)
    set_toolset(&quot;as&quot;, &quot;clang&quot;)

    -- ...
end)
</code></pre>
<p>关于这块的详情介绍，可以到<a href="/zh-cn/manual/custom_toolchain"  >自定义工具链</a>章节查看</p>
<p>更多详情见：<a href="https://github.com/xmake-io/xmake/issues/780"  target="_blank">#780</a></p>
<h4 id="LLVM-%E5%B7%A5%E5%85%B7%E9%93%BE">LLVM 工具链</h4>
<p>llvm 工具链下载地址：<a href="https://releases.llvm.org/"  target="_blank">https://releases.llvm.org/</a></p>

<pre class="language-bash"><code class="language-bash">$ xmake f -p cross --toolchain=llvm --sdk=&quot;C:\Program Files\LLVM&quot;
$ xmake
</code></pre>
<h4 id="GNU-RM-%E5%B7%A5%E5%85%B7%E9%93%BE">GNU-RM 工具链</h4>
<p>工具链地址：<a href="https://developer.arm.com/tools-and-software/open-source-software/developer-tools/gnu-toolchain/gnu-rm/downloads#"  target="_blank">https://developer.arm.com/tools-and-software/open-source-software/developer-tools/gnu-toolchain/gnu-rm/downloads#</a></p>

<pre class="language-bash"><code class="language-bash">$ xmake f -p cross --toolchain=gnu-rm --sdk=/xxx/cc-arm-none-eabi-9-2019-q4-major
$ xmake
</code></pre>
<h4 id="TinyC-%E5%B7%A5%E5%85%B7%E9%93%BE">TinyC 工具链</h4>

<pre class="language-bash"><code class="language-bash">$ xmake f --toolchain=tinyc
$ xmake
</code></pre>
<blockquote>
<p>Releases 目录下，我们还提供了特殊的 xmake-tinyc-vX.X.X.win32.exe 安装包，内置 tinyc 工具链，无需依赖 msvc，也可以编译 c 代码，开箱即用无依赖。</p>
</blockquote>
<h4 id="Emcc-%E5%B7%A5%E5%85%B7%E9%93%BE">Emcc 工具链</h4>
<p>通常只需要切换到 Wasm 平台，里面内置了 emcc 工具链，还会额外调整目标程序的扩展名为 <code>*.html</code> 以及输出 <code>*.wasm</code>。</p>

<pre class="language-bash"><code class="language-bash">$ xmake f -p wasm
$ xmake
</code></pre>
<p>不过我们也能够直接切换到 emcc 工具链，但是后缀名不会被修改。</p>

<pre class="language-bash"><code class="language-bash">$ xmake f --toolchain=emcc
$ xmake
</code></pre>
<h4 id="Intel-C%2B%2B-%E7%BC%96%E8%AF%91%E5%B7%A5%E5%85%B7%E9%93%BE">Intel C++ 编译工具链</h4>

<pre class="language-bash"><code class="language-bash">$ xmake f --toolchain=icc
$ xmake
</code></pre>
<h4 id="Intel-Fortran-%E7%BC%96%E8%AF%91%E5%B7%A5%E5%85%B7%E9%93%BE">Intel Fortran 编译工具链</h4>

<pre class="language-bash"><code class="language-bash">$ xmake f --toolchain=ifort
$ xmake
</code></pre>
<h3 id="%E9%80%9A%E7%94%A8%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91%E9%85%8D%E7%BD%AE">通用交叉编译配置</h3>
<table>
<thead>
<tr>
  <th>参数名</th>
  <th>描述</th>
</tr>
</thead>
<tbody>
<tr>
  <td><a href="#--sdk"  >--sdk</a></td>
  <td>设置交叉工具链的sdk根目录</td>
</tr>
<tr>
  <td><a href="#--bin"  >--bin</a></td>
  <td>设置工具链bin目录</td>
</tr>
<tr>
  <td><a href="#--cross"  >--cross</a></td>
  <td>设置交叉工具链工具前缀</td>
</tr>
<tr>
  <td><a href="#--as"  >--as</a></td>
  <td>设置<code>asm</code>汇编器</td>
</tr>
<tr>
  <td><a href="#--cc"  >--cc</a></td>
  <td>设置<code>c</code>编译器</td>
</tr>
<tr>
  <td><a href="#--cxx"  >--cxx</a></td>
  <td>设置<code>c++</code>编译器</td>
</tr>
<tr>
  <td><a href="#--mm"  >--mm</a></td>
  <td>设置<code>objc</code>编译器</td>
</tr>
<tr>
  <td><a href="#--mxx"  >--mxx</a></td>
  <td>设置<code>objc++</code>编译器</td>
</tr>
<tr>
  <td><a href="#--sc"  >--sc</a></td>
  <td>设置<code>swift</code>编译器</td>
</tr>
<tr>
  <td><a href="#--gc"  >--gc</a></td>
  <td>设置<code>golang</code>编译器</td>
</tr>
<tr>
  <td><a href="#--dc"  >--dc</a></td>
  <td>设置<code>dlang</code>编译器</td>
</tr>
<tr>
  <td><a href="#--rc"  >--rc</a></td>
  <td>设置<code>rust</code>编译器</td>
</tr>
<tr>
  <td><a href="#--cu"  >--cu</a></td>
  <td>设置<code>cuda</code>编译器</td>
</tr>
<tr>
  <td><a href="#--ld"  >--ld</a></td>
  <td>设置<code>c/c++/objc/asm</code>链接器</td>
</tr>
<tr>
  <td><a href="#--sh"  >--sh</a></td>
  <td>设置<code>c/c++/objc/asm</code>共享库链接器</td>
</tr>
<tr>
  <td><a href="#--ar"  >--ar</a></td>
  <td>设置<code>c/c++/objc/asm</code>静态库归档器</td>
</tr>
<tr>
  <td><a href="#--scld"  >--scld</a></td>
  <td>设置<code>swift</code>链接器</td>
</tr>
<tr>
  <td><a href="#--scsh"  >--scsh</a></td>
  <td>设置<code>swift</code>共享库链接器</td>
</tr>
<tr>
  <td><a href="#--gcld"  >--gcld</a></td>
  <td>设置<code>golang</code>链接器</td>
</tr>
<tr>
  <td><a href="#--gcar"  >--gcar</a></td>
  <td>设置<code>golang</code>静态库归档器</td>
</tr>
<tr>
  <td><a href="#--dcld"  >--dcld</a></td>
  <td>设置<code>dlang</code>链接器</td>
</tr>
<tr>
  <td><a href="#--dcsh"  >--dcsh</a></td>
  <td>设置<code>dlang</code>共享库链接器</td>
</tr>
<tr>
  <td><a href="#--dcar"  >--dcar</a></td>
  <td>设置<code>dlang</code>静态库归档器</td>
</tr>
<tr>
  <td><a href="#--rcld"  >--rcld</a></td>
  <td>设置<code>rust</code>链接器</td>
</tr>
<tr>
  <td><a href="#--rcsh"  >--rcsh</a></td>
  <td>设置<code>rust</code>共享库链接器</td>
</tr>
<tr>
  <td><a href="#--rcar"  >--rcar</a></td>
  <td>设置<code>rust</code>静态库归档器</td>
</tr>
<tr>
  <td><a href="#--cu-ccbin"  >--cu-ccbin</a></td>
  <td>设置<code>cuda</code> host编译器</td>
</tr>
<tr>
  <td><a href="#--culd"  >--culd</a></td>
  <td>设置<code>cuda</code>链接器</td>
</tr>
<tr>
  <td><a href="#--asflags"  >--asflags</a></td>
  <td>设置<code>asm</code>汇编编译选项</td>
</tr>
<tr>
  <td><a href="#--cflags"  >--cflags</a></td>
  <td>设置<code>c</code>编译选项</td>
</tr>
<tr>
  <td><a href="#--cxflags"  >--cxflags</a></td>
  <td>设置<code>c/c++</code>编译选项</td>
</tr>
<tr>
  <td><a href="#--cxxflags"  >--cxxflags</a></td>
  <td>设置<code>c++</code>编译选项</td>
</tr>
<tr>
  <td><a href="#--mflags"  >--mflags</a></td>
  <td>设置<code>objc</code>编译选项</td>
</tr>
<tr>
  <td><a href="#--mxflags"  >--mxflags</a></td>
  <td>设置<code>objc/c++</code>编译选项</td>
</tr>
<tr>
  <td><a href="#--mxxflags"  >--mxxflags</a></td>
  <td>设置<code>objc++</code>编译选项</td>
</tr>
<tr>
  <td><a href="#--scflags"  >--scflags</a></td>
  <td>设置<code>swift</code>编译选项</td>
</tr>
<tr>
  <td><a href="#--gcflags"  >--gcflags</a></td>
  <td>设置<code>golang</code>编译选项</td>
</tr>
<tr>
  <td><a href="#--dcflags"  >--dcflags</a></td>
  <td>设置<code>dlang</code>编译选项</td>
</tr>
<tr>
  <td><a href="#--rcflags"  >--rcflags</a></td>
  <td>设置<code>rust</code>编译选项</td>
</tr>
<tr>
  <td><a href="#--cuflags"  >--cuflags</a></td>
  <td>设置<code>cuda</code>编译选项</td>
</tr>
<tr>
  <td><a href="#--ldflags"  >--ldflags</a></td>
  <td>设置链接选项</td>
</tr>
<tr>
  <td><a href="#--shflags"  >--shflags</a></td>
  <td>设置共享库链接选项</td>
</tr>
<tr>
  <td><a href="#--arflags"  >--arflags</a></td>
  <td>设置静态库归档选项</td>
</tr>
</tbody>
</table>
<blockquote>
<p>如果你想要了解更多参数选项，请运行: <code>xmake f --help</code>。</p>
</blockquote>
<h4 id="--sdk">--sdk</h4>
<ul>
<li>设置交叉工具链的sdk根目录</li>
</ul>
<p>大部分情况下，都不需要配置很复杂的 toolchains 前缀，例如：<code>arm-linux-</code> 什么的</p>
<p>只要这个工具链的 sdk 目录满足如下结构（大部分的交叉工具链都是这个结构）：</p>

<pre class="language-none"><code class="language-none">/home/toolchains_sdkdir
   - bin
       - arm-linux-gcc
       - arm-linux-ld
       - ...
   - lib
       - libxxx.a
   - include
       - xxx.h
</code></pre>
<p>那么，使用 xmake 进行交叉编译的时候，只需要进行如下配置和编译：</p>

<pre class="language-bash"><code class="language-bash">$ xmake f -p linux --sdk=/home/toolchains_sdkdir
$ xmake
</code></pre>
<p>这个时候，xmake 会去自动探测，gcc 等编译器的前缀名：<code>arm-linux-</code>，并且编译的时候，也会自动加上<strong>链接库</strong>和<strong>头文件</strong>的搜索选项，例如：</p>

<pre class="language-none"><code class="language-none">-I/home/toolchains_sdkdir/include -L/home/toolchains_sdkdir/lib
</code></pre>
<p>这些都是xmake自动处理的，不需要手动配置他们。。</p>
<h4 id="--bin">--bin</h4>
<ul>
<li>设置工具链bin目录</li>
</ul>
<p>对于不规则工具链目录结构，靠单纯地<a href="--sdk"  >--sdk</a>选项设置，没法完全检测通过的情况下，可以通过这个选项继续附加设置工具链的 bin 目录位置。</p>
<p>例如：一些特殊的交叉工具链的，编译器 bin 目录，并不在 <code>/home/toolchains_sdkdir/bin</code> 这个位置，而是独立到了 <code>/usr/opt/bin</code>。</p>

<pre class="language-bash"><code class="language-bash">$ xmake f -p linux --sdk=/home/toolchains_sdkdir --bin=/usr/opt/bin
$ xmake
</code></pre>
<h4 id="--cross">--cross</h4>
<ul>
<li>设置交叉工具链工具前缀</li>
</ul>
<p>像 <code>aarch64-linux-android-</code> 这种，通常如果你配置了<a href="#--sdk"  >--sdk</a>或者<a href="#--bin"  >--bin</a>的情况下，xmake 会去自动检测的，不需要自己手动设置。</p>
<p>但是对于一些极特殊的工具链，一个目录下同时有多个 cross 前缀的工具 bin 混在一起的情况，你需要手动设置这个配置，来区分到底需要选用哪个 bin。</p>
<p>例如，toolchains 的 bin 目录下同时存在两个不同的编译器：</p>

<pre class="language-none"><code class="language-none">/opt/bin
 - armv7-linux-gcc
 - aarch64-linux-gcc
</code></pre>
<p>我们现在想要选用 armv7 的版本，则配置如下：</p>

<pre class="language-bash"><code class="language-bash">$ xmake f -p linux --sdk=/usr/toolsdk --bin=/opt/bin --cross=armv7-linux-
</code></pre>
<h4 id="--as">--as</h4>
<ul>
<li>设置 <code>asm</code> 汇编器</li>
</ul>
<p>如果还要继续细分选择编译器，则继续追加相关编译器选项，例如：</p>

<pre class="language-bash"><code class="language-bash">$ xmake f -p linux --sdk=/user/toolsdk --as=armv7-linux-as
</code></pre>
<p>如果存在 <code>AS</code> 环境变量的话，会优先使用当前环境变量中指定的值。</p>
<blockquote>
<p>如果指定的编译器名不是那些 xmake 内置可识别的名字（带有 gcc, clang 等字样），那么编译器工具检测就会失败。<br />
这个时候我们可以通过：<code>xmake f --as=gcc@/home/xxx/asmips.exe</code> 设置ccmips.exe编译器作为类 gcc 的使用方式来编译。<br />
也就是说，在指定编译器为 <code>asmips.exe</code> 的同时，告诉 xmake，它跟 gcc 用法和参数选项基本相同。</p>
</blockquote>
<h4 id="--cc">--cc</h4>
<ul>
<li>设置c编译器</li>
</ul>
<p>如果还要继续细分选择编译器，则继续追加相关编译器选项，例如：</p>

<pre class="language-bash"><code class="language-bash">$ xmake f -p linux --sdk=/user/toolsdk --cc=armv7-linux-clang
</code></pre>
<p>如果存在 <code>CC</code> 环境变量的话，会优先使用当前环境变量中指定的值。</p>
<blockquote>
<p>如果指定的编译器名不是那些 xmake 内置可识别的名字（带有 gcc, clang 等字样），那么编译器工具检测就会失败。<br />
这个时候我们可以通过：<code>xmake f --cc=gcc@/home/xxx/ccmips.exe</code> 设置 ccmips.exe 编译器作为类 gcc 的使用方式来编译。<br />
也就是说，在指定编译器为 <code>ccmips.exe</code> 的同时，告诉 xmake，它跟 gcc 用法和参数选项基本相同。</p>
</blockquote>
<h4 id="--cxx">--cxx</h4>
<ul>
<li>设置 <code>c++</code> 编译器</li>
</ul>
<p>如果还要继续细分选择编译器，则继续追加相关编译器选项，例如：</p>

<pre class="language-bash"><code class="language-bash">$ xmake f -p linux --sdk=/user/toolsdk --cxx=armv7-linux-clang++
</code></pre>
<p>如果存在 <code>CXX</code> 环境变量的话，会优先使用当前环境变量中指定的值。</p>
<blockquote>
<p>如果指定的编译器名不是那些 xmake 内置可识别的名字（带有 gcc, clang 等字样），那么编译器工具检测就会失败。<br />
这个时候我们可以通过：<code>xmake f --cxx=clang++@/home/xxx/c++mips.exe</code> 设置 c++mips.exe 编译器作为类 clang++ 的使用方式来编译。<br />
也就是说，在指定编译器为 <code>c++mips.exe</code> 的同时，告诉 xmake，它跟 clang++ 用法和参数选项基本相同。</p>
</blockquote>
<h4 id="--ld">--ld</h4>
<ul>
<li>设置 <code>c/c++/objc/asm</code> 链接器</li>
</ul>
<p>如果还要继续细分选择链接器，则继续追加相关编译器选项，例如：</p>

<pre class="language-bash"><code class="language-bash">$ xmake f -p linux --sdk=/user/toolsdk --ld=armv7-linux-clang++
</code></pre>
<p>如果存在 <code>LD</code> 环境变量的话，会优先使用当前环境变量中指定的值。</p>
<blockquote>
<p>如果指定的编译器名不是那些 xmake 内置可识别的名字（带有 gcc, clang 等字样），那么链接器工具检测就会失败。<br />
这个时候我们可以通过：<code>xmake f --ld=g++@/home/xxx/c++mips.exe</code> 设置 c++mips.exe 链接器作为类 g++ 的使用方式来编译。<br />
也就是说，在指定链接器为 <code>c++mips.exe</code> 的同时，告诉 xmake，它跟 g++ 用法和参数选项基本相同。</p>
</blockquote>
<h4 id="--sh">--sh</h4>
<ul>
<li>设置 <code>c/c++/objc/asm</code> 共享库链接器</li>
</ul>

<pre class="language-bash"><code class="language-bash">$ xmake f -p linux --sdk=/user/toolsdk --sh=armv7-linux-clang++
</code></pre>
<p>如果存在 <code>SH</code> 环境变量的话，会优先使用当前环境变量中指定的值。</p>
<h4 id="--ar">--ar</h4>
<ul>
<li>设置 <code>c/c++/objc/asm</code> 静态库归档器</li>
</ul>

<pre class="language-bash"><code class="language-bash">$ xmake f -p linux --sdk=/user/toolsdk --ar=armv7-linux-ar
</code></pre>
<p>如果存在<code>AR</code>环境变量的话，会优先使用当前环境变量中指定的值。</p>
<h2 id="%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE">全局配置</h2>
<p>我们也可以将一些常用配置保存到全局配置中，来简化频繁地输入：</p>
<p>例如:</p>

<pre class="language-bash"><code class="language-bash">$ xmake g --ndk=~/files/android-ndk-r10e/
</code></pre>
<p>现在，我们重新配置和编译 <code>android</code> 程序：</p>

<pre class="language-bash"><code class="language-bash">$ xmake f -p android
$ xmake
</code></pre>
<p>以后，就不需要每次重复配置 `--ndk=参数了。</p>
<blockquote>
<p>每个命令都有其简写，例如: <code>xmake g</code> 或者 <code>xmake global</code>。</p>
</blockquote>
<h2 id="%E6%B8%85%E9%99%A4%E9%85%8D%E7%BD%AE">清除配置</h2>
<p>有时候，配置出了问题编译不过，或者需要重新检测各种依赖库和接口，可以加上 <code>-c</code> 参数，清除缓存的配置，强制重新检测和配置：</p>

<pre class="language-bash"><code class="language-bash">$ xmake f -c
$ xmake
</code></pre>
<p>或者：</p>

<pre class="language-bash"><code class="language-bash">$ xmake f -p iphoneos -c
$ xmake
</code></pre>
<h2 id="%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA%E9%85%8D%E7%BD%AE">导入导出配置</h2>
<p>我们还可以导入导出已经配置好的配置集，方便配置的快速迁移。</p>
<h3 id="%E5%AF%BC%E5%87%BA%E9%85%8D%E7%BD%AE">导出配置</h3>

<pre class="language-bash"><code class="language-bash">$ xmake f --export=/tmp/config.txt
$ xmake f -m debug --xxx=y --export=/tmp/config.txt
</code></pre>
<h3 id="%E5%AF%BC%E5%85%A5%E9%85%8D%E7%BD%AE">导入配置</h3>

<pre class="language-bash"><code class="language-bash">$ xmake f --import=/tmp/config.txt
$ xmake f -m debug --xxx=y --import=/tmp/config.txt
</code></pre>
<h3 id="%E5%AF%BC%E5%87%BA%E9%85%8D%E7%BD%AE%EF%BC%88%E5%B8%A6%E8%8F%9C%E5%8D%95%EF%BC%89">导出配置（带菜单）</h3>

<pre class="language-bash"><code class="language-bash">$ xmake f --menu --export=/tmp/config.txt
$ xmake f --menu -m debug --xxx=y --export=/tmp/config.txt
</code></pre>
<h3 id="%E5%AF%BC%E5%85%A5%E9%85%8D%E7%BD%AE%EF%BC%88%E5%B8%A6%E8%8F%9C%E5%8D%95%EF%BC%89">导入配置（带菜单）</h3>

<pre class="language-bash"><code class="language-bash">$ xmake f --menu --import=/tmp/config.txt
$ xmake f --menu -m debug --xxx=y --import=/tmp/config.txt
</code></pre>

                        
                    </div>
                </div>
                <div id="previous_next">
                    <div id="previous">
                        
                        <a href="/get_started/zh/tutorial/project-examples.html">
                            <span class="icon"></span>
                            <span class="label">工程例子</span>
                        </a>
                        
                    </div>
                    <div id="next">
                        
                        <a href="/get_started/zh/tutorial/environment-variables.html">
                            <span class="label">环境变量</span>
                            <span class="icon"></span>
                        </a>
                        
                    </div>
                </div>
                <div id="comments-container"></div>
            </div>
            <div id="toc_wrapper">
                <div id="toc">
                    <div id="toc_content">
                            
                    </div>
                </div>
            </div>
        </div>
    </div>
    <a id="to_top" href="#"></a>
    <div id="doc_footer">
        <div id="footer">
            <div id="footer_top">
                <ul>
<li><a>链接</a><ul><li><a target="_blank" href="https://teedoc.neucrack.com">使用 teedoc 构建</a></li>
<li><a  href="/sitemap.xml">网站地图</a></li>
</ul>
</li>
<li><a>源码</a><ul><li><a target="_blank" href="https://github.com/neutree/teedoc">github</a></li>
<li><a target="_blank" href="https://gitee.com/teedoc/teedoc">gitee</a></li>
<li><a target="_blank" href="https://github.com/teedoc/teedoc.github.io">本网站源文件</a></li>
</ul>
</li>
</ul>

            </div>
            <div id="footer_bottom">
                <ul>
<li><a target="_blank" href="https://beian.miit.gov.cn">*ICP备********号</a></li>
<li><a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=****************">*公网安备***********号</a></li>
</ul>

            </div>
        </div>
    </div>
    
        <script src="/teedoc-plugin-markdown-parser/mermaid.min.js"></script>
    
        <script>mermaid.initialize({startOnLoad:true});</script>
    
        <script src="/static/js/theme_default/tocbot.min.js"></script>
    
        <script src="/static/js/theme_default/main.js"></script>
    
        <script src="/static/js/theme_default/viewer.min.js"></script>
    
        <script src="/static/css/theme_default/prism.min.js"></script>
    
        <script src="/static/js/search/search_main.js"></script>
    
        <script src="/static/js/plugin_blog/main.js"></script>
    
        <script src="/static/js/custom.js"></script>
    
</body>

</html>